> * åŸæ–‡åœ°å€ï¼š[Understanding React Render Props and HOC](https://blog.bitsrc.io/understanding-react-render-props-and-hoc-b37a9576e196)
> * åŸæ–‡ä½œè€…ï¼š[Aditya Agarwal](https://blog.bitsrc.io/@adityaa803?source=post_header_lockup)
> * è¯‘æ–‡å‡ºè‡ªï¼š[æ˜é‡‘ç¿»è¯‘è®¡åˆ’](https://github.com/xitu/gold-miner)
> * æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š[https://github.com/xitu/gold-miner/blob/master/TODO1/understanding-react-render-props-and-hoc.md](https://github.com/xitu/gold-miner/blob/master/TODO1/understanding-react-render-props-and-hoc.md)
> * è¯‘è€…ï¼š[wuzhengyan2015](https://github.com/wuzhengyan2015)
> * æ ¡å¯¹è€…ï¼š[Ivocin](https://github.com/Ivocin), [Moonliujk](https://github.com/Moonliujk)

# ç†è§£ React Render Props å’Œ HOC

## React ä¸­ Render Props å’Œé«˜é˜¶ç»„ä»¶çš„è¯¦ç»†ä»‹ç»

![](https://cdn-images-1.medium.com/max/1000/1*ORm5S_4kr4hcNSnyoXZSKQ.png)

reactjs.org

å¦‚æœä½ æœ€è¿‘æœ‰åœ¨åš [React å¼€å‘](https://blog.bitsrc.io/how-to-write-better-code-in-react-best-practices-b8ca87d462b0)ï¼Œä½ è‚¯å®šæœ‰é‡åˆ°åƒ HOCs å’Œ Render Props è¿™æ ·çš„æœ¯è¯­ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨è¿™ä¸¤ç§æ¨¡å¼ï¼Œä»¥ä¾¿äº†è§£æˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦å®ƒä»¬ï¼Œä»¥åŠå¦‚ä½•æ­£ç¡®åœ°ä½¿ç”¨å®ƒä»¬æ¥æ„å»ºæ›´å¥½çš„ React åº”ç”¨ã€‚

### ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦è¿™äº›æ¨¡å¼ï¼Ÿ

React æä¾›äº†ä¸€ç§ç®€å•çš„ä»£ç å¤ç”¨æ–¹å¼ï¼Œå³**ç»„ä»¶**ã€‚ç»„ä»¶å°è£…äº†å¾ˆå¤šä¸œè¥¿ï¼ŒåŒ…æ‹¬å†…å®¹ã€æ ·å¼å’Œä¸šåŠ¡é€»è¾‘ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œåœ¨å•ä¸ªç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å°† htmlã€css å’Œ js ç»“åˆèµ·æ¥ï¼Œæ‰€æœ‰çš„è¿™äº›æ˜¯ä¸ºäº†ä¸€ä¸ªç›®çš„ï¼Œ[å•ä¸€èŒè´£](https://blog.bitsrc.io/solid-principles-every-developer-should-know-b3bfa96bb688)ã€‚

æç¤ºï¼šä½¿ç”¨ [**Bit** (Github)](https://github.com/teambit/bit)ï¼Œä½ å¯ä»¥ç»„ç»‡å’Œåˆ†äº«**å¯å¤ç”¨çš„ç»„ä»¶**ï¼Œè¿™äº›ç»„ä»¶å¯ä»¥ä»ä¸åŒçš„é¡¹ç›®å’Œåº”ç”¨ä¸­è¢«å‘ç°ï¼Œåˆ†äº«å’Œå¼€å‘ã€‚è¿™æ¯”é‡å†™ç»„ä»¶æˆ–è€…ç»´æŠ¤ä¸€ä¸ªå¤§å‹åº“è¦å¿«å¾—å¤šã€‚è¯•è¯•çœ‹ :)

- [**Bit â€” åˆ†äº«å’Œæ„å»ºç»„ä»¶ä»£ç **ï¼šBit å¸®åŠ©ä½ ä»ä¸åŒçš„é¡¹ç›®å’Œåº”ç”¨ä¸­åˆ†äº«ï¼Œå‘ç°å’Œä½¿ç”¨ç»„ä»¶ä»£ç ï¼Œä»¥æ­¤æ¥æ„å»ºæ–°ç‰¹æ€§å’Œ...](https://bitsrc.io "https://bitsrc.io")

#### ä¾‹å­

å‡è®¾æˆ‘ä»¬æ­£åœ¨å¼€å‘ä¸€ä¸ªç”µå­å•†åŠ¡åº”ç”¨ç¨‹åºã€‚å®ƒä¸å…¶ä»–ç”µå­å•†åŠ¡åº”ç”¨ç¨‹åºä¸€æ ·ï¼Œå‘ç”¨æˆ·æ˜¾ç¤ºæ‰€æœ‰å¯è´­ä¹°äº§å“ï¼Œå¹¶ä¸”ç”¨æˆ·å¯ä»¥å°†ä»»ä½•äº§å“æ·»åŠ åˆ°è´­ç‰©è½¦ã€‚æˆ‘ä»¬å°†ä» API è·å–äº§å“æ•°æ®ï¼Œå¹¶å°†äº§å“ç›®å½•æ˜¾ç¤ºä¸ºå¡ç‰‡åˆ—è¡¨ã€‚

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒReact ç»„ä»¶å¯ä»¥åƒè¿™æ ·å®ç°ï¼š

![](https://cdn-images-1.medium.com/max/800/1*Y_sQCauEZZUycXS4HDs6-Q.png)

[ä»£ç é“¾æ¥](https://carbon.now.sh/?bg=rgba%28171%2C184%2C195%2C0%29&t=material&wt=none&l=jsx&ds=true&dsyoff=20px&dsblur=68px&wc=true&wa=false&pv=48px&ph=32px&ln=false&fm=Hack&fs=14px&lh=133%25&si=false&code=import%2520React%252C%2520%257B%2520Component%2520%257D%2520from%2520%2522react%2522%253B%250A%250Aclass%2520ProductList%2520extends%2520Component%2520%257B%250A%2520%2520state%2520%253D%2520%257B%250A%2520%2520%2520%2520products%253A%2520%255B%255D%250A%2520%2520%257D%253B%250A%250A%2520%2520componentDidMount%28%29%2520%257B%250A%2520%2520%2520%2520getProducts%28%29.then%28products%2520%253D%253E%2520%257B%250A%2520%2520%2520%2520%2520%2520this.setState%28%257B%250A%2520%2520%2520%2520%2520%2520%2520%2520products%250A%2520%2520%2520%2520%2520%2520%257D%29%253B%250A%2520%2520%2520%2520%257D%29%253B%250A%2520%2520%257D%250A%250A%2520%2520render%28%29%2520%257B%250A%2520%2520%2520%2520return%2520%28%250A%2520%2520%2520%2520%2520%2520%253Cul%253E%250A%2520%2520%2520%2520%2520%2520%2520%2520%257Bthis.state.products.map%28product%2520%253D%253E%2520%28%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%253Cli%253E%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%253Cspan%253E%257Bproduct.name%257D%253C%252Fspan%253E%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%253Ca%2520href%253D%2522%2523%2522%253EAdd%2520to%2520Cart%253C%252Fa%253E%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%253C%252Fli%253E%250A%2520%2520%2520%2520%2520%2520%2520%2520%29%29%257D%250A%2520%2520%2520%2520%2520%2520%253C%252Ful%253E%250A%2520%2520%2520%2520%29%253B%250A%2520%2520%257D%250A%257D%250A%250Aexport%2520%257B%2520ProductList%2520%257D%253B&es=2x&wm=false&ts=false)

å¯¹äºæˆ‘ä»¬çš„ç®¡ç†å‘˜ï¼Œæœ‰ä¸€ä¸ªç®¡ç†é—¨æˆ·ï¼Œä»–ä»¬å¯ä»¥åœ¨å…¶ä¸­æ·»åŠ æˆ–åˆ é™¤äº§å“ã€‚åœ¨æ­¤é—¨æˆ·ä¸­ï¼Œæˆ‘ä»¬ä»åŒä¸€ API è·å–äº§å“æ•°æ®ï¼Œå¹¶ä»¥è¡¨æ ¼å½¢å¼æ˜¾ç¤ºäº§å“ç›®å½•ã€‚

è¿™ä¸ª React ç»„ä»¶å¯ä»¥åƒè¿™æ ·å®ç°ï¼š

![](https://cdn-images-1.medium.com/max/800/1*rbLMZdroffO_nUWVA1rpGQ.png)

[ä»£ç é“¾æ¥](https://carbon.now.sh/?bg=rgba%28171%2C184%2C195%2C0%29&t=material&wt=none&l=jsx&ds=true&dsyoff=20px&dsblur=68px&wc=true&wa=false&pv=48px&ph=32px&ln=false&fm=Hack&fs=14px&lh=133%25&si=false&code=import%2520React%252C%2520%257B%2520Component%2520%257D%2520from%2520%2522react%2522%253B%250A%250Aclass%2520ProductTable%2520extends%2520Component%2520%257B%250A%2520%2520state%2520%253D%2520%257B%250A%2520%2520%2520%2520products%253A%2520%255B%255D%250A%2520%2520%257D%253B%250A%250A%2520%2520componentDidMount%28%29%2520%257B%250A%2520%2520%2520%2520getProducts%28%29.then%28products%2520%253D%253E%2520%257B%250A%2520%2520%2520%2520%2520%2520this.setState%28%257B%250A%2520%2520%2520%2520%2520%2520%2520%2520products%250A%2520%2520%2520%2520%2520%2520%257D%29%253B%250A%2520%2520%2520%2520%257D%29%253B%250A%2520%2520%257D%250A%250A%2520%2520handleDelete%2520%253D%2520currentProduct%2520%253D%253E%2520%257B%250A%2520%2520%2520%2520const%2520remainingProducts%2520%253D%2520this.state.products.filter%28%250A%2520%2520%2520%2520%2520%2520product%2520%253D%253E%2520product.id%2520!%253D%253D%2520currentProduct.id%250A%2520%2520%2520%2520%29%253B%250A%2520%2520%2520%2520deleteProducts%28currentProduct.id%29.then%28%28%29%2520%253D%253E%2520%257B%250A%2520%2520%2520%2520%2520%2520this.setState%28%257B%250A%2520%2520%2520%2520%2520%2520%2520%2520products%253A%2520remainingProducts%250A%2520%2520%2520%2520%2520%2520%257D%29%253B%250A%2520%2520%2520%2520%257D%29%253B%250A%2520%2520%257D%253B%250A%250A%2520%2520render%28%29%2520%257B%250A%2520%2520%2520%2520return%2520%28%250A%2520%2520%2520%2520%2520%2520%253Ctable%253E%250A%2520%2520%2520%2520%2520%2520%2520%2520%253Cthead%253E%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%253Ctr%253E%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%253Cth%253EProduct%2520Name%253C%252Fth%253E%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%253Cth%253EActions%253C%252Fth%253E%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%253C%252Ftr%253E%250A%2520%2520%2520%2520%2520%2520%2520%2520%253C%252Fthead%253E%250A%2520%2520%2520%2520%2520%2520%2520%2520%253Ctbody%253E%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%257Bthis.state.products.map%28product%2520%253D%253E%2520%28%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%253Ctr%2520key%253D%257Bproduct.id%257D%253E%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%253Ctd%253E%257Bproduct.name%257D%253C%252Ftd%253E%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%253Ctd%253E%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%253Cbutton%2520onClick%253D%257B%28%29%2520%253D%253E%2520this.handleDelete%28product%29%257D%253E%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520Delete%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%253C%252Fbutton%253E%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%253C%252Ftd%253E%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%253C%252Ftr%253E%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%29%29%257D%250A%2520%2520%2520%2520%2520%2520%2520%2520%253C%252Ftbody%253E%250A%2520%2520%2520%2520%2520%2520%253C%252Ftable%253E%250A%2520%2520%2520%2520%29%253B%250A%2520%2520%257D%250A%257D%250A%250Aexport%2520%257B%2520ProductTable%2520%257D%253B&es=2x&wm=false&ts=false)

æœ‰ä¸€ä»¶äº‹å¾ˆæ˜æ˜¾ï¼Œè¿™ä¸¤ä¸ªç»„ä»¶éƒ½å®ç°äº†äº§å“çš„æ•°æ®è·å–é€»è¾‘ã€‚

ç»§ç»­æ·±å…¥ï¼Œä»¥ä¸‹è¿™äº›æƒ…å†µä¹Ÿå¯èƒ½å‡ºç°ï¼š

*   æˆ‘ä»¬å¿…é¡»ä½¿ç”¨äº§å“æ•°æ®å¹¶ä»¥ä¸åŒçš„æ–¹å¼æ˜¾ç¤ºå®ƒã€‚
*   ä»ä¸åŒçš„ API ä¸­è·å–äº§å“æ•°æ®ï¼ˆåœ¨ç”¨æˆ·çš„è´­ç‰©è½¦é¡µé¢ä¸­å¾ˆæœ‰ç”¨ï¼‰ï¼Œä½†æ•°æ®çš„æ˜¾ç¤ºå’Œæˆ‘ä»¬åœ¨ `ProductList` ä¸­çš„åšæ³•ç±»ä¼¼ã€‚
*   æˆ‘ä»¬å¿…é¡»ä» localStorage è®¿é—®å®ƒï¼Œè€Œä¸æ˜¯ä» API è·å–æ•°æ®ã€‚
*   åœ¨äº§å“ç›®å½•è¡¨æ ¼ä¸­ï¼Œéœ€è¦ä½¿ç”¨å…·æœ‰ä¸åŒæ“ä½œçš„æŒ‰é’®è€Œä¸æ˜¯åˆ é™¤æŒ‰é’®ã€‚

å¦‚æœæˆ‘ä»¬ä¸ºè¿™äº›æ¯ä¸€ç‚¹éƒ½å†™ä¸ªä¸åŒçš„ç»„ä»¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°†è¦å¤åˆ¶å¤§é‡çš„ä»£ç ã€‚

è·å–æ•°æ®å’Œæ˜¾ç¤ºæ•°æ®æ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„å…³æ³¨ç‚¹ã€‚æ­£å¦‚å‰é¢æ‰€è¯´çš„ï¼Œå¦‚æœä¸€ä¸ªç»„ä»¶æœ‰ä¸€ä¸ªè´£ä»»ä¼šæ›´å¥½ã€‚

è®©æˆ‘ä»¬é‡æ„ç¬¬ä¸€ä¸ªç»„ä»¶ã€‚å®ƒå°†æ¥å—äº§å“æ•°æ®ä¸ºå±æ€§ï¼Œå¹¶åƒä¹‹å‰ä¸€æ ·æŠŠäº§å“ç›®å½•æ¸²æŸ“æˆå¡ç‰‡åˆ—è¡¨ã€‚ç”±äºæˆ‘ä»¬ä¸éœ€è¦[ç»„ä»¶çŠ¶æ€å’Œç”Ÿå‘½å‘¨æœŸæ–¹æ³•](https://blog.bitsrc.io/understanding-react-v16-4-new-component-lifecycle-methods-fa7b224efd7d)ï¼Œæˆ‘ä»¬æŠŠå®ƒè½¬æ¢æˆå‡½æ•°å¼ç»„ä»¶ã€‚

å®ƒç°åœ¨çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š

![](https://cdn-images-1.medium.com/max/800/1*H5Bao06wMbFJX1ILLd6QJA.png)

ProductList.js ([ä»£ç é“¾æ¥](https://carbon.now.sh/?bg=rgba%28171%2C184%2C195%2C0%29&t=material&wt=none&l=jsx&ds=true&dsyoff=20px&dsblur=68px&wc=true&wa=false&pv=48px&ph=32px&ln=false&fm=Hack&fs=14px&lh=133%25&si=false&code=import%2520React%2520from%2520%2522react%2522%253B%250A%250Aconst%2520ProductList%2520%253D%2520%28%257B%2520products%2520%257D%29%2520%253D%253E%2520%257B%250A%2520%2520return%2520%28%250A%2520%2520%2520%2520%253Cul%253E%250A%2520%2520%2520%2520%2520%2520%257Bproducts.map%28product%2520%253D%253E%2520%28%250A%2520%2520%2520%2520%2520%2520%2520%2520%253Cli%2520key%253D%257Bproduct.id%257D%253E%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%253Cspan%253E%257Bproduct.name%257D%253C%252Fspan%253E%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520%253Ca%2520href%253D%2522%2523%2522%253EAdd%2520to%2520Cart%253C%252Fa%253E%250A%2520%2520%2520%2520%2520%2520%2520%2520%253C%252Fli%253E%250A%2520%2520%2520%2520%2520%2520%29%29%257D%250A%2520%2520%2520%2520%253C%252Ful%253E%250A%2520%2520%29%253B%250A%257D%253B%250A%250Aexport%2520%257B%2520ProductList%2520%257D%253B&es=2x&wm=false&ts=false))

å°±åƒ `ProductList` å’Œ `ProductTable` ä¼šæ˜¯ä¸€ä¸ªå‡½æ•°ç»„ä»¶ï¼Œå®ƒæ¥æ”¶äº§å“æ•°æ®ä¸ºå±æ€§ï¼Œå¹¶æŠŠæ•°æ®æ¸²æŸ“åˆ°è¡¨çš„è¡Œä¸­å»ã€‚

ç°åœ¨è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåä¸º `ProductsData` çš„ç»„ä»¶ã€‚å®ƒä» API è·å–äº§å“æ•°æ®ã€‚æ•°æ®çš„è·å–å’ŒçŠ¶æ€çš„æ›´æ–°å°†å’ŒåŸå…ˆçš„ `ProductList` ç»„ä»¶ä¸€æ ·ã€‚ä½†æ˜¯æˆ‘ä»¬åº”è¯¥åœ¨è¿™ä¸ªç»„ä»¶çš„ render æ–¹æ³•ä¸­æ”¾å…¥ä»€ä¹ˆå‘¢ï¼Ÿ

![](https://cdn-images-1.medium.com/max/800/1*YUTzVts0O0Nx8JdoBt0sRw.png)

ProductData.js ([ä»£ç é“¾æ¥](https://carbon.now.sh/?bg=rgba%28171%2C184%2C195%2C0%29&t=material&wt=none&l=jsx&ds=true&dsyoff=20px&dsblur=68px&wc=true&wa=false&pv=48px&ph=32px&ln=false&fm=Hack&fs=14px&lh=133%25&si=false&code=import%2520React%252C%2520%257B%2520Component%2520%257D%2520from%2520%2522react%2522%253B%250A%250Aclass%2520ProductData%2520extends%2520Component%2520%257B%250A%2520%2520state%2520%253D%2520%257B%250A%2520%2520%2520%2520products%253A%2520%255B%255D%250A%2520%2520%257D%253B%250A%250A%2520%2520componentDidMount%28%29%2520%257B%250A%2520%2520%2520%2520getProducts%28%29.then%28products%2520%253D%253E%2520%257B%250A%2520%2520%2520%2520%2520%2520this.setState%28%257B%250A%2520%2520%2520%2520%2520%2520%2520%2520products%250A%2520%2520%2520%2520%2520%2520%257D%29%253B%250A%2520%2520%2520%2520%257D%29%253B%250A%2520%2520%257D%250A%250A%2520%2520render%28%29%2520%257B%250A%2520%2520%2520%2520return%2520%27what%2520should%2520we%2520return%2520here%253F%27%253B%250A%2520%2520%257D%250A%257D%250A%250Aexport%2520%257B%2520ProductData%2520%257D%253B%250A&es=2x&wm=false&ts=false))

å¦‚æœæˆ‘ä»¬åªæ˜¯ç®€å•çš„æ”¾å…¥ ProductList ç»„ä»¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ä¸èƒ½å¤ç”¨è¿™ä¸ªç»„ä»¶äº ProductTableã€‚ä¸ç®¡æ€æ ·ï¼Œå¦‚æœè¿™ä¸ªç»„ä»¶å¯ä»¥è¯¢é—®è¦æ¸²æŸ“ä»€ä¹ˆï¼Œé‚£ä¸ªé—®é¢˜å°±ä¼šå¾—åˆ°è§£å†³ã€‚åœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œæˆ‘ä»¬å°†å‘Šè¯‰å®ƒè¦æ¸²æŸ“ `ProductList` ç»„ä»¶ï¼Œè€Œåœ¨ç®¡ç†é—¨æˆ·ä¸­ï¼Œæˆ‘ä»¬å‘Šè¯‰å®ƒè¦æ¸²æŸ“ `ProductTable` ç»„ä»¶ã€‚

è¿™å°±æ˜¯ Render Props å’Œ HOCs å‘æŒ¥ä½œç”¨çš„åœ°æ–¹ã€‚å®ƒä»¬åªæ˜¯ä¸€ç±»æ–¹æ³•ï¼Œå³å¯¹äºä¸€ä¸ªç»„ä»¶ï¼Œä¼šè¯¢é—®åº”è¯¥æ¸²æŸ“ä»€ä¹ˆå†…å®¹ã€‚è¿™è¿›ä¸€æ­¥æ¨åŠ¨äº†ä»£ç çš„å¤ç”¨ã€‚

ç°åœ¨æˆ‘ä»¬çŸ¥é“äº†ä¸ºä»€ä¹ˆéœ€è¦å®ƒä»¬ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•ä½¿ç”¨å®ƒä»¬ã€‚

### Render Props

åœ¨æ¦‚å¿µå±‚é¢ç†è§£ Render Props éå¸¸ç®€å•ã€‚è®©æˆ‘ä»¬å¿˜æ‰ React ä¸€ä¼šï¼Œç„¶åçœ‹çœ‹åŸç”Ÿ JavaScript ä¸‹çš„äº‹æƒ…ã€‚

æˆ‘ä»¬æœ‰ä¸€ä¸ªè®¡ç®—ä¸¤ä¸ªæ•°å­—ä¹‹å’Œçš„å‡½æ•°ã€‚èµ·åˆæˆ‘ä»¬åªæƒ³è¦æŠŠç»“æœè®°å½•åˆ°æ§åˆ¶å°ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬è¿™æ ·è®¾è®¡å‡½æ•°ï¼š

![](https://cdn-images-1.medium.com/max/800/1*3fUyzeYTNnRlxS9-A5Ic_Q.png)

ä½†æ˜¯ï¼Œæˆ‘ä»¬å¾ˆå¿«å‘ç° sum å‡½æ•°éå¸¸æœ‰ç”¨ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å…¶ä»–åœ°æ–¹ä½¿ç”¨åˆ°å®ƒã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¸Œæœ› sum å‡½æ•°åªæä¾›ç»“æœï¼Œè€Œä¸æ˜¯å°†å…¶è®°å½•åˆ°æ§åˆ¶å°ï¼Œå¹¶è®©è°ƒç”¨è€…å†³å®šå¦‚ä½•ä½¿ç”¨ç»“æœã€‚

å®ƒå¯ä»¥è¿™ä¹ˆåšï¼š

![](https://cdn-images-1.medium.com/max/800/1*KO9pes8Nw2CAtOoum9iOoA.png)

[ä»£ç é“¾æ¥](https://carbon.now.sh/?bg=rgba%28171%2C184%2C195%2C0%29&t=material&wt=none&l=javascript&ds=true&dsyoff=20px&dsblur=68px&wc=true&wa=false&pv=48px&ph=32px&ln=false&fm=Hack&fs=14px&lh=133%25&si=false&code=const%2520sum%2520%253D%2520%28a%252C%2520b%252C%2520fn%29%2520%253D%253E%2520%257B%250A%2520%2520const%2520result%2520%253D%2520a%2520%252B%2520b%253B%250A%2520%2520fn%28result%29%253B%250A%257D%250A%250A%250A%252F%252FUsage%250A%250Asum%281%252C%25202%252C%2520%28result%29%2520%253D%253E%2520%257B%250A%2520%2520console.log%28result%29%253B%250A%257D%29%250A%250Aconst%2520alertFn%2520%253D%2520%28result%29%2520%253D%253E%2520%257B%250A%2520%2520alert%28result%29%253B%250A%257D%250A%250Asum%283%252C%25206%252C%2520alertFn%29&es=2x&wm=false&ts=false)

æˆ‘ä»¬ä¼ ç»™ `sum` å‡½æ•°ä¸€ä¸ª `fn` å›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ã€‚ç„¶å `sum` å‡½æ•°è®¡ç®—ç»“æœå¹¶æŠŠç»“æœä½œä¸ºå‚æ•°è°ƒç”¨ `fn`ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå›è°ƒå‡½æ•°å¯ä»¥è·å¾—ç»“æœï¼Œå¹¶ä¸”å¯ä»¥è‡ªç”±åœ°å¯¹ç»“æœè¿›è¡Œä»»ä½•æ“ä½œã€‚

è¿™å°±æ˜¯ Render Props çš„æœ¬è´¨ã€‚æˆ‘ä»¬å°†é€šè¿‡ä½¿ç”¨è¿™ä¸ªæ¨¡å¼æ¥æ›´æ¸…æ™°åœ°è®¤è¯†å®ƒï¼Œæ‰€ä»¥è®©æˆ‘ä»¬ç«‹åˆ»æŠŠå®ƒç”¨åˆ°æˆ‘ä»¬ç°åœ¨é¢ä¸´çš„é—®é¢˜ä¸­å»å§ã€‚

åœ¨è¿™ä¸æ˜¯è®¡ç®—ä¸¤ä¸ªæ•°å­—ä¹‹å’Œçš„å‡½æ•°ï¼Œè€Œæ˜¯è·å–äº§å“æ•°æ®çš„ç»„ä»¶ `ProductsData`ã€‚ç°åœ¨å¯ä»¥é€šè¿‡å±æ€§ä¼ é€’ç»™ `ProductsData` ç»„ä»¶ä¸€ä¸ªå‡½æ•°ã€‚ç„¶å `ProductsData` ç»„ä»¶å°†è·å–äº§å“æ•°æ®ï¼Œå¹¶å°†è¿™äº›æ•°æ®æä¾›ç»™ä»¥å±æ€§æ–¹å¼ä¼ é€’è¿›æ¥çš„å‡½æ•°ã€‚ä¼ é€’è¿›æ¥çš„å‡½æ•°ç°åœ¨å¯ä»¥å¯¹äº§å“æ•°æ®åšä»»ä½•å®ƒæƒ³åšçš„äº‹æƒ…ã€‚

åœ¨ React ä¸­ï¼Œå®ƒå¯ä»¥åƒè¿™æ ·å®ç°ï¼š

![](https://cdn-images-1.medium.com/max/800/1*bVc30RctgB9yecfgqJLJcg.png)

[ä»£ç é“¾æ¥](https://carbon.now.sh/?bg=rgba%28171%2C184%2C195%2C0%29&t=material&wt=none&l=jsx&ds=true&dsyoff=20px&dsblur=68px&wc=true&wa=false&pv=48px&ph=32px&ln=false&fm=Hack&fs=14px&lh=133%25&si=false&code=import%2520React%252C%2520%257B%2520Component%2520%257D%2520from%2520%2522react%2522%253B%250A%250Aclass%2520ProductData%2520extends%2520Component%2520%257B%250A%2520%2520state%2520%253D%2520%257B%250A%2520%2520%2520%2520products%253A%2520%255B%255D%250A%2520%2520%257D%253B%250A%250A%2520%2520componentDidMount%28%29%2520%257B%250A%2520%2520%2520%2520getProducts%28%29.then%28products%2520%253D%253E%2520%257B%250A%2520%2520%2520%2520%2520%2520this.setState%28%257B%250A%2520%2520%2520%2520%2520%2520%2520%2520products%250A%2520%2520%2520%2520%2520%2520%257D%29%253B%250A%2520%2520%2520%2520%257D%29%253B%250A%2520%2520%257D%250A%250A%2520%2520render%28%29%2520%257B%250A%2520%2520%2520%2520return%2520this.props.render%28%257B%250A%2520%2520%2520%2520%2520%2520products%253A%2520this.state.products%250A%2520%2520%2520%2520%257D%29%253B%250A%2520%2520%257D%250A%257D%250A%250Aexport%2520%257B%2520ProductData%2520%257D%253B%250A&es=2x&wm=false&ts=false)

å°±åƒ `fn` å‚æ•°ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ª **render** å±æ€§ï¼Œå®ƒå°†ä½œä¸ºä¸€ä¸ªå‡½æ•°è¢«ä¼ é€’ã€‚ç„¶å `ProductData` ç»„ä»¶æŠŠäº§å“æ•°æ®ä½œä¸ºå‚æ•°è°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚

å› æ­¤æˆ‘ä»¬å¯ä»¥ä»¥è¿™ç§æ–¹å¼ä½¿ç”¨ `ProductData` ç»„ä»¶ã€‚

![](https://cdn-images-1.medium.com/max/800/1*_nSoSbkcZpgkxGrYtrea8g.png)

[ä»£ç é“¾æ¥](https://carbon.now.sh/?bg=rgba%28171%2C184%2C195%2C0%29&t=material&wt=none&l=jsx&ds=true&dsyoff=20px&dsblur=68px&wc=true&wa=false&pv=48px&ph=32px&ln=false&fm=Hack&fs=14px&lh=133%25&si=false&code=%253CProductData%250A%2520%2520render%253D%257B%28%257B%2520products%2520%257D%29%2520%253D%253E%2520%253CProductList%2520products%253D%257Bproducts%257D%2520%252F%253E%257D%250A%252F%253E%250A%250A%250A%253CProductData%250A%2520%2520render%253D%257B%28%257B%2520products%2520%257D%29%2520%253D%253E%2520%253CProductTable%2520products%253D%257Bproducts%257D%2520%252F%253E%257D%250A%252F%253E%250A%250A%250A%253CProductData%2520render%253D%257B%28%257B%2520products%2520%257D%29%2520%253D%253E%2520%28%250A%2520%2520%253Ch1%253E%250A%2520%2520%2520%2520%2520%2520Number%2520of%2520Products%253A%250A%2520%2520%2520%2520%2520%2520%253Cstrong%253E%257Bproducts.length%257D%253C%252Fstrong%253E%250A%2520%2520%253C%252Fh1%253E%250A%2520%2520%250A%29%257D%2520%252F%253E%250A&es=2x&wm=false&ts=false)

æ­£å¦‚æˆ‘ä»¬æ‰€çœ‹åˆ°çš„ **Render Props** æ˜¯ä¸€ç§ç›¸å½“é€šç”¨çš„æ¨¡å¼ã€‚å¤§éƒ¨åˆ†äº‹æƒ…éƒ½å¯ä»¥éå¸¸ç›´æ¥åœ°å®Œæˆã€‚ä½†è¿™ä¹Ÿæ˜¯æˆ‘ä»¬æ¬èµ·çŸ³å¤´ç ¸è‡ªå·±çš„è„šçš„åŸå› ï¼š

![](https://i.loli.net/2018/12/17/5c17638f6b5ad.png)

![](https://i.loli.net/2018/12/17/5c17639dc0217.png)

![](https://i.loli.net/2018/12/17/5c1763acaf846.png)

é¿å…åµŒå¥—çš„ä¸€ç§ç®€å•æ–¹æ³•æ˜¯æŠŠç»„ä»¶æ‹†è§£æˆæ›´å°çš„ç»„ä»¶ï¼Œå¹¶å°†è¿™äº›ç»„ä»¶ä¿å­˜åœ¨å•ç‹¬çš„æ–‡ä»¶ä¸­ã€‚å¦ä¸€ç§æ–¹æ³•æ˜¯ç¼–å†™æ›´å¤šçš„ç»„ä»¶å¹¶ç»„åˆå®ƒä»¬ï¼Œè€Œä¸æ˜¯åœ¨ Render Props ä¸­ä½¿ç”¨é•¿å‡½æ•°ã€‚

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†çœ‹ä¸‹å¦ä¸€ç§æµè¡Œçš„æ¨¡å¼ï¼Œå®ƒè¢«ç§°ä¸º HOCã€‚

### é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰

åœ¨è¿™ä¸ªæ¨¡å¼ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥å—ä¸€ä¸ªç»„ä»¶ä½œä¸ºå‚æ•°ï¼Œç„¶åè¿”å›ç›¸åŒçš„ç»„ä»¶ï¼Œä½†æ˜¯æ·»åŠ äº†ä¸€äº›åŠŸèƒ½ã€‚

å¦‚æœè¿™å¬èµ·æ¥å¾ˆç†Ÿæ‚‰ï¼Œé‚£æ˜¯å› ä¸ºå®ƒç±»ä¼¼äº Mobx ä¸­å¹¿æ³›ä½¿ç”¨çš„è£…é¥°å™¨æ¨¡å¼ã€‚åƒ Python è¿™æ ·çš„è®¸å¤šè¯­è¨€éƒ½å†…ç½®äº†è£…é¥°å™¨ï¼ŒJavaScriptä¹Ÿå¾ˆå¿«å°±ä¼šæ”¯æŒè£…é¥°å™¨ã€‚HOCs å¾ˆåƒè£…é¥°å™¨ã€‚

æ¯”èµ·ç”¨æ–‡å­—è§£é‡Šï¼Œç”¨é€šè¿‡ä»£ç æ¥ç†è§£ HOCs ä¼šå®¹æ˜“å¾ˆå¤šã€‚æ‰€ä»¥è®©æˆ‘ä»¬å…ˆæ¥çœ‹ä»£ç ã€‚

![](https://cdn-images-1.medium.com/max/800/1*c9Y18PctkxW_GpUuYggojw.png)

[ä»£ç é“¾æ¥](https://carbon.now.sh/?bg=rgba%28171%2C184%2C195%2C0%29&t=material&wt=none&l=jsx&ds=true&dsyoff=20px&dsblur=68px&wc=true&wa=false&pv=48px&ph=32px&ln=false&fm=Hack&fs=14px&lh=133%25&si=false&code=import%2520React%252C%2520%257B%2520Component%2520%257D%2520from%2520%2522react%2522%253B%250A%250Aconst%2520withProductData%2520%253D%2520WrappedComponent%2520%253D%253E%250A%2520%2520class%2520ProductData%2520extends%2520Component%2520%257B%250A%2520%2520%2520%2520state%2520%253D%2520%257B%250A%2520%2520%2520%2520%2520%2520products%253A%2520%255B%255D%250A%2520%2520%2520%2520%257D%253B%250A%250A%2520%2520%2520%2520componentDidMount%28%29%2520%257B%250A%2520%2520%2520%2520%2520%2520getProducts%28%29.then%28products%2520%253D%253E%2520%257B%250A%2520%2520%2520%2520%2520%2520%2520%2520this.setState%28%257B%250A%2520%2520%2520%2520%2520%2520%2520%2520%2520%2520products%250A%2520%2520%2520%2520%2520%2520%2520%2520%257D%29%253B%250A%2520%2520%2520%2520%2520%2520%257D%29%253B%250A%2520%2520%2520%2520%257D%250A%250A%2520%2520%2520%2520render%28%29%2520%257B%250A%2520%2520%2520%2520%2520%2520return%2520%253CWrappedComponent%2520products%253D%257Bthis.state.products%257D%2520%252F%253E%253B%250A%2520%2520%2520%2520%257D%250A%2520%2520%257D%253B%250A%250Aexport%2520%257B%2520withProductData%2520%257D%253B%250A&es=2x&wm=false&ts=false)

æ­£å¦‚æˆ‘ä»¬æ‰€çœ‹åˆ°çš„ï¼Œæ•°æ®è·å–å’ŒçŠ¶æ€æ›´æ–°é€»è¾‘å°±å’Œæˆ‘ä»¬åœ¨ Render Props æ‰€åšçš„ä¸€æ ·ã€‚å”¯ä¸€çš„å˜åŒ–å°±æ˜¯ç»„ä»¶ç±»æ˜¯ä½äºå‡½æ•°å†…éƒ¨ã€‚è¯¥å‡½æ•°æ¥å—ä¸€ä¸ªç»„ä»¶ä¸ºå‚æ•°ï¼Œç„¶ååœ¨å†…éƒ¨çš„ render æ–¹æ³•ä¸­æ¸²æŸ“è¿™ä¸ªç»„ä»¶ï¼Œä½†æ˜¯ä¼šæ·»åŠ é¢å¤–çš„å±æ€§ã€‚å¯¹äºåç§°å¦‚æ­¤å¤æ‚çš„æ¨¡å¼ï¼Œå®ç°èµ·æ¥ç›¸å½“ç®€å•ï¼Œå¯¹å§ï¼Ÿ

![](https://cdn-images-1.medium.com/max/800/1*k-Px1N8t5dnq0snEtdHE_g.png)

[ä»£ç é“¾æ¥](https://carbon.now.sh/?bg=rgba%28171%2C184%2C195%2C0%29&t=material&wt=none&l=jsx&ds=true&dsyoff=20px&dsblur=68px&wc=true&wa=false&pv=48px&ph=32px&ln=false&fm=Hack&fs=14px&lh=133%25&si=false&code=%252F%252F%2520Wrap%2520ProductList%252C%2520ProductTable%2520to%2520get%2520the%2520higher%2520order%2520components%250Aconst%2520ProductListWithData%2520%253D%2520withProductData%28ProductList%29%253B%250Aconst%2520ProductTableWithData%2520%253D%2520withProductData%28ProductTable%29%253B%250A%250A%250A%252F%252F%2520Use%2520the%2520higher%2520order%2520components%2520just%2520like%2520normal%2520components.%250A%250A%253Cdiv%253E%250A%2520%2520%253CProductListWithData%2520%252F%253E%250A%2520%2520%253CProductTableWithData%2520%252F%253E%250A%253C%252Fdiv%253E&es=2x&wm=false&ts=false)

ç°åœ¨æˆ‘ä»¬å·²ç»äº†è§£äº†ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ Render Propsï¼ŒHOCs ä»¥åŠæˆ‘ä»¬å¦‚ä½•å®ç°å®ƒä»¬ã€‚

è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼šå¦‚ä½•åœ¨ Render Props å’Œ HOCs ä¸­è¿›è¡Œé€‰æ‹©ï¼Ÿå…³äºè¿™ä¸ªè¯é¢˜çš„æ–‡ç« å·²ç»æœ‰å¾ˆå¤šäº†ï¼Œæ‰€ä»¥æˆ‘ç°åœ¨ä¸è®¨è®ºè¿™ä¸ªè¯é¢˜ã€‚ä¹Ÿè®¸åœ¨æˆ‘çš„ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ :)

[ä»€ä¹ˆæ—¶å€™ä¸è¦ä½¿ç”¨ Render Props](https://blog.kentcdodds.com/when-to-not-use-render-props-5397bbeff746)â€Šâ€”â€ŠKent C. Dodds

[HOCs vs Render Props](https://www.richardkotze.com/coding/hoc-vs-render-props-react) â€”â€ŠRichard Kotze

### ç»“è®º

åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬äº†è§£äº†ä¸ºä»€ä¹ˆéœ€è¦è¿™äº›æ¨¡å¼ï¼Œæ¯ä¸ªæ¨¡å¼çš„æœ¬è´¨å’Œå¦‚ä½•åˆ©ç”¨è¿™äº›æ¨¡å¼æ¥æ„å»ºé«˜åº¦å¯å¤ç”¨çš„ç»„ä»¶ã€‚ä»¥ä¸Šå°±æ˜¯å…¨éƒ¨å†…å®¹ï¼Œå¸Œæœ›ä½ å–œæ¬¢ï¼Œè¯·éšæ„**è¯„è®ºå’Œæé—®**ã€‚æˆ‘å¾ˆä¹æ„äº¤æµ ğŸ‘

> 2018 å¹´ 10 æœˆæ›´æ–°ï¼šReact hooks å·²ç»åœ¨ alpha ç‰ˆæœ¬ä¸­ä¸­å‘å¸ƒã€‚å®ƒä»¬å°†æ¶ˆé™¤ç¼–å†™ç±»ç»„ä»¶ã€HOCs å’Œ Render Props çš„ç—›è‹¦ã€‚æˆ‘å¾ˆå¿«å°±ä¼šå†™ä¸€ç¯‡æ¥è§£é‡Šï¼Œå…³æ³¨æˆ‘çš„ [Twitter](https://twitter.com/dev__adi) å’Œ [Medium](https://medium.com/@adityaa803) æˆ–è€…è®¢é˜… [æˆ‘çš„æ—¶äº‹é€šè®¯](https://buttondown.email/itaditya) æ¥è·å–æœ€æ–°æ¶ˆæ¯ã€‚

> å¦‚æœå‘ç°è¯‘æ–‡å­˜åœ¨é”™è¯¯æˆ–å…¶ä»–éœ€è¦æ”¹è¿›çš„åœ°æ–¹ï¼Œæ¬¢è¿åˆ° [æ˜é‡‘ç¿»è¯‘è®¡åˆ’](https://github.com/xitu/gold-miner) å¯¹è¯‘æ–‡è¿›è¡Œä¿®æ”¹å¹¶ PRï¼Œä¹Ÿå¯è·å¾—ç›¸åº”å¥–åŠ±ç§¯åˆ†ã€‚æ–‡ç« å¼€å¤´çš„ **æœ¬æ–‡æ°¸ä¹…é“¾æ¥** å³ä¸ºæœ¬æ–‡åœ¨ GitHub ä¸Šçš„ MarkDown é“¾æ¥ã€‚


---

> [æ˜é‡‘ç¿»è¯‘è®¡åˆ’](https://github.com/xitu/gold-miner) æ˜¯ä¸€ä¸ªç¿»è¯‘ä¼˜è´¨äº’è”ç½‘æŠ€æœ¯æ–‡ç« çš„ç¤¾åŒºï¼Œæ–‡ç« æ¥æºä¸º [æ˜é‡‘](https://juejin.im) ä¸Šçš„è‹±æ–‡åˆ†äº«æ–‡ç« ã€‚å†…å®¹è¦†ç›– [Android](https://github.com/xitu/gold-miner#android)ã€[iOS](https://github.com/xitu/gold-miner#ios)ã€[å‰ç«¯](https://github.com/xitu/gold-miner#å‰ç«¯)ã€[åç«¯](https://github.com/xitu/gold-miner#åç«¯)ã€[åŒºå—é“¾](https://github.com/xitu/gold-miner#åŒºå—é“¾)ã€[äº§å“](https://github.com/xitu/gold-miner#äº§å“)ã€[è®¾è®¡](https://github.com/xitu/gold-miner#è®¾è®¡)ã€[äººå·¥æ™ºèƒ½](https://github.com/xitu/gold-miner#äººå·¥æ™ºèƒ½)ç­‰é¢†åŸŸï¼Œæƒ³è¦æŸ¥çœ‹æ›´å¤šä¼˜è´¨è¯‘æ–‡è¯·æŒç»­å…³æ³¨ [æ˜é‡‘ç¿»è¯‘è®¡åˆ’](https://github.com/xitu/gold-miner)ã€[å®˜æ–¹å¾®åš](http://weibo.com/juejinfanyi)ã€[çŸ¥ä¹ä¸“æ ](https://zhuanlan.zhihu.com/juejinfanyi)ã€‚
