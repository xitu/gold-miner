> * åŸæ–‡åœ°å€ï¼š[Weâ€™re nearing the 7.0 Babel release. Hereâ€™s all the cool stuff weâ€™ve been doing.](https://medium.freecodecamp.org/were-nearing-the-7-0-babel-release-here-s-all-the-cool-stuff-we-ve-been-doing-8c1ade684039)
> * åŸæ–‡ä½œè€…ï¼š[Henry Zhu](https://medium.freecodecamp.org/@left_pad?source=post_header_lockup)
> * è¯‘æ–‡å‡ºè‡ªï¼š[æ˜é‡‘ç¿»è¯‘è®¡åˆ’](https://github.com/xitu/gold-miner)
> * æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š[https://github.com/xitu/gold-miner/blob/master/TODO1/were-nearing-the-7-0-babel-release-here-s-all-the-cool-stuff-we-ve-been-doing.md](https://github.com/xitu/gold-miner/blob/master/TODO1/were-nearing-the-7-0-babel-release-here-s-all-the-cool-stuff-we-ve-been-doing.md)
> * è¯‘è€…ï¼š[xueshuai](https://github.com/xueshuai)
> * æ ¡å¯¹è€…ï¼š[Colafornia](https://github.com/Colafornia)

# Babel 7.0 ç‰ˆæœ¬å°†å¸¦æ¥çš„å¾ˆé…·çš„äº‹æƒ…

![](https://cdn-images-1.medium.com/max/1000/1*vLtFVPTHJGDfw3XOl4C1Sw.jpeg)

å›¾ç‰‡æ¥è‡ª [â€œMy Life Through A Lensâ€](https://unsplash.com/photos/bq31L0jQAjU?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)ï¼Œå‘å¸ƒäº [Unsplash](https://unsplash.com/search/photos/change?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)

æ¥çœ‹è¿™ğŸ‘‹ï¼æˆ‘æ˜¯ [Henry](http://twitter.com/left_pad)ï¼Œ[Babel](http://babeljs.io) çš„ç»´æŠ¤è€…ä¹‹ä¸€ã€‚

> ç¼–è¾‘ï¼šæˆ‘å·²ç»ç¦»å¼€äº† [Behance](https://www.henryzoo.com/blog/2018/02/15/leaving-behance.html) å¹¶åˆ¶ä½œäº† [Patreon](https://www.patreon.com/henryzhu)ï¼Œå°è¯• [å…¨èŒæŠ•å…¥åˆ°å¼€æºå·¥ä½œä¸Š](https://www.henryzoo.com/blog/2018/03/02/in-pursuit-of-open-source-part-1.html)ï¼Œè¯·ä½ æˆ–ä½ çš„å…¬å¸è€ƒè™‘æçŒ®ã€‚

#### Babel ç®€ä»‹

æœ‰äº›äººå¯èƒ½æŠŠ Babel çœ‹ä½œæ˜¯ä¸€ä¸ªè®©ä½ å†™ ES6 ä»£ç çš„å·¥å…·ã€‚æ›´å‡†ç¡®çš„è¯´ï¼ŒBabel æ˜¯æŠŠ ES6 ä»£ç è½¬æ¢ä¸º ES5 ä»£ç çš„ JavaScript ç¼–è¯‘å™¨ã€‚å½“å®ƒçš„åå­—æ˜¯ 6to5 æ—¶ï¼Œè¿™å¾ˆé€‚åˆï¼Œä½†æ˜¯æˆ‘è®¤ä¸º Babel å·²ç»å˜å¾—ä¸åªæ˜¯è¿™äº›äº†ã€‚

ç°åœ¨è®©æˆ‘ä»¬èŠä¸€äº›èƒŒæ™¯ã€‚è¿™ä¸€ç‚¹éå¸¸å¿…è¦ï¼Œå› ä¸ºä¸åƒè¿è¡Œåœ¨æœåŠ¡å™¨ä¸Šçš„å…¶ä»–è¯­è¨€ï¼ˆç”šè‡³æ˜¯  Node.jsï¼‰ï¼Œä½ èƒ½è¿è¡Œçš„çš„ JavaScript ç‰ˆæœ¬å–å†³äºä½ çš„æµè§ˆå™¨çš„ç‰¹å®šç‰ˆæœ¬ã€‚å¦‚æœä½ ä½¿ç”¨æœ€æ–°çš„æµè§ˆå™¨ï¼Œè€Œä½ çš„ç”¨æˆ·ï¼ˆä½ æƒ³ç•™ä½çš„ï¼‰ä»ç„¶ä½¿ç”¨ IEï¼Œæ˜¯æ²¡æœ‰å…³ç³»çš„ã€‚ä½†æ˜¯ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœä½ æƒ³å†™ `class A {}` ï¼Œé‚£ä¹ˆä½ å°±å¾ˆä¸å¹¸äº† - ä½ çš„ä¸€äº›ç”¨æˆ·å°†ä¼šå¾—åˆ°ä¸€ä¸ª `SyntaxError` å’Œä¸€ä¸ªç©ºç™½é¡µé¢ã€‚

æ‰€ä»¥è¿™å°±æ˜¯åˆ›å»º Babel çš„åŸå› ã€‚å®ƒå…è®¸ä½ å†™ä½ æƒ³å†™çš„ JavaScript ç‰ˆæœ¬ï¼Œä½ çŸ¥é“å®ƒä¼šåœ¨ä½ æ”¯æŒçš„æ‰€æœ‰ï¼ˆæ›´è€ï¼‰çš„æµè§ˆå™¨ä¸Šæ­£ç¡®çš„è¿è¡Œã€‚

ä½†æ˜¯ï¼Œå®ƒå¹¶ä¸åœæ­¢äº â€œES6â€ï¼ˆæœ‰äº›äººå–œæ¬¢è¯´ ES2015ï¼‰ã€‚Babel å·²ç»ç¡®å®æ‰©å±•äº†ä»–çš„æœ€åˆç›®æ ‡ï¼Œå³åªç¼–è¯‘ ES6 ä»£ç ã€‚ç°åœ¨ï¼Œå®ƒèƒ½å¤Ÿç¼–è¯‘ä»»æ„ä¸€ä¸ªä½ æƒ³è¦çš„ ES20XX ç‰ˆæœ¬ï¼ˆJavaScript æœ€æ–°ç‰ˆæœ¬ï¼‰åˆ° ES5.

#### æ­£åœ¨è¿›è¡Œçš„è¿›ç¨‹

å…³äºè¿™ä¸ªé¡¹ç›®çš„ä¸€ä¸ªæœ‰è¶£çš„äº‹æƒ…æ˜¯ï¼Œåªè¦ JavaScript è¯­æ³•è¢«åŠ è¿›å»ï¼ŒBabel å°±éœ€è¦å®ç°ä¸€ä¸ªè½¬æ¢å™¨å»è½¬åŒ–å®ƒã€‚

ä½†æ˜¯ä½ å¯èƒ½ä¼šæƒ³ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬è¦ç»™å·²ç»æ”¯æŒè¯¥è¯­æ³•çš„æµè§ˆå™¨å‘é€ä¸€ä¸ªç¼–è¯‘è¿‡çš„ç‰ˆæœ¬ï¼ˆæ›´å¤§çš„ä»£ç ä½“ç§¯ï¼‰ï¼Ÿæˆ‘ä»¬æ€ä¹ˆçŸ¥é“æ¯ä¸ªæµè§ˆå™¨æ”¯æŒä»€ä¹ˆè¯­æ³•ï¼Ÿ

å¥½äº†ï¼Œæˆ‘ä»¬åˆ¶ä½œäº†ä¸€ä¸ªè®©ä½ èƒ½å¤ŸæŒ‡å®šä½ æ”¯æŒå“ªä¸ªæµè§ˆå™¨çš„å·¥å…· [babel-preset-en](https://babeljs.io/docs/plugins/preset-env)ï¼Œæ¥å¸®åŠ©è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å®ƒå°†ä¼šè‡ªåŠ¨åœ°åªè½¬æ¢é‚£äº›æµè§ˆå™¨åŸç”Ÿä¸æ”¯æŒçš„ä¸œè¥¿ã€‚

é™¤æ­¤ä¹‹å¤–ï¼ŒBabelï¼ˆå› ä¸ºå®ƒåœ¨ç¤¾åŒºçš„ä½¿ç”¨ï¼‰èƒ½å¤Ÿå½±å“ JavaScript è¯­è¨€è‡ªèº«çš„æœªæ¥ã€‚é‰´äºå®ƒæ˜¯ç”¨äºè½¬æ¢ JS ä»£ç çš„å·¥å…·ï¼Œå®ƒä¹Ÿå¯ä»¥ç”¨äºå®ç°æäº¤ç»™ [TC39](http://2ality.com/2015/11/tc39-process.html) çš„ä»»ä½•ææ¡ˆï¼ˆEcma Technical Committee 39ï¼Œä¸€ä¸ªä½¿ JavaScript ä½œä¸ºæ ‡å‡†å‘å‰å‘å±•çš„ç»„ç»‡ï¼‰ã€‚

ä¸€ä¸ª â€œææ¡ˆâ€ è¿›å…¥åˆ°è¯­è¨€ä¸­ä¼šç»å†ä» Stage 0 åˆ° Stage 4 çš„ä¸€ä¸ªå®Œæ•´æµç¨‹ã€‚Babelï¼Œä½œä¸ºä¸€ä¸ªå·¥å…·ï¼Œåœ¨æ­£ç¡®çš„åœ°æ–¹æµ‹è¯•æ–°çš„æƒ³æ³•å¹¶ä¸”è®©å¼€å‘è€…åœ¨ä»–ä»¬çš„åº”ç”¨ä¸­ä½¿ç”¨å®ƒï¼Œä»¥ä¾¿ä»–ä»¬å¯ä»¥å‘å§”å‘˜ä¼šæä¾›åé¦ˆã€‚

å‡ºäºä»¥ä¸‹åŸå› ï¼Œè¿™ä¸€ç‚¹éå¸¸é‡è¦ï¼šå§”å‘˜ä¼šæƒ³ç¡®ä¿¡ä»–ä»¬åšå‡ºçš„æ›´æ”¹æ˜¯ç¤¾åŒºæƒ³è¦çš„ï¼ˆä¸€è‡´ï¼Œç›´è§‚ï¼Œæœ‰æ•ˆï¼‰ã€‚åœ¨æµè§ˆå™¨é‡Œå®ç°ä¸€ä¸ªä¸æ˜çš„æƒ³æ³•æ˜¯ç¼“æ…¢çš„ï¼ˆæµè§ˆå™¨ä¸­çš„ C++ å¯¹æ¯” Babel ä¸­çš„ JavaScriptï¼‰ï¼Œæ˜‚è´µçš„ï¼Œå¹¶ä¸”è¦æ±‚ç”¨æˆ·åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨ä¸€ä¸ªæ ‡å¿—ï¼Œè€Œä¸æ˜¯æ›´æ”¹ä»–ä»¬çš„ Babel é…ç½®æ–‡ä»¶ã€‚

å› ä¸º Babel å·²ç»éå¸¸æ™®åŠäº†ï¼Œè¿™æ˜¯æœ‰ä¸€ä¸ªå¥½çš„æœºä¼šä½¿çœŸæ­£çš„ç”¨é€”å‡ºç°ã€‚è¿™å°†ä½¿ææ¡ˆæ¯”é‚£ä¸ªæ²¡æœ‰å¹¿å¤§ç¤¾åŒºå¼€å‘è€…åé¦ˆçš„å®ç°æ›´å¥½ã€‚

è€Œä¸”ä»–ä¸åªæ˜¯åœ¨äº§å“ä¸­æœ‰ç”¨ã€‚æˆ‘ä»¬çš„åœ¨çº¿ [REPL](https://babeljs.io/repl) å¯¹äººä»¬å­¦ä¹  JavaScript æœ‰å¸®åŠ©ï¼Œå¹¶ä¸”å…è®¸ä»–ä»¬æµ‹è¯•ä¸œè¥¿ã€‚

æˆ‘è®¤ä¸º Babel æ˜¯ä¸€ä¸ªèƒ½å¤Ÿè®©ç¨‹åºå‘˜ä»¬äº†è§£ JavaScript å¦‚ä½•å·¥ä½œçš„éå¸¸å¥½çš„å·¥å…·ã€‚é€šè¿‡ç»™è¿™ä¸ªé¡¹ç›®åšè´¡çŒ®ï¼Œä»–ä»¬å°†ä¼šå­¦ä¹ å¾ˆå¤šå…¶ä»–çš„æ¦‚å¿µï¼Œä¾‹å¦‚ ASTsï¼Œç¼–è¯‘å™¨ï¼Œè¯­è¨€è§„èŒƒç­‰ç­‰ã€‚

æˆ‘ä»¬çœŸçš„å¯¹è¿™ä¸ªé¡¹ç›®çš„æœªæ¥å¾ˆå…´å¥‹ï¼Œå¹¶ä¸”è¿«ä¸åŠå¾…çš„è¦çŸ¥é“è¿™ä¸ªå›¢é˜Ÿèƒ½å¤Ÿèµ°åˆ°å“ªé‡Œã€‚è¯·åŠ å…¥å¹¶å¸®åŠ©æˆ‘ä»¬ï¼

#### æˆ‘çš„æ•…äº‹

è¿™é‡Œæœ‰ä¸€äº›æˆ‘å¸Œæœ›æ¯å¤©éƒ½å·¥ä½œåœ¨è¿™ä¸ªé¡¹ç›®ä¸Šçš„åŸå› ï¼Œç‰¹åˆ«æ˜¯ä½œä¸ºä¸€ä¸ªç»´æŠ¤è€…ã€‚å¤§å¤šæ•°å½“å‰çš„ç»´æŠ¤è€…ï¼ŒåŒ…æ‹¬æˆ‘è‡ªå·±ï¼Œå¹¶ä¸æ˜¯åˆ›å»ºè¿™ä¸ªé¡¹ç›®çš„äººï¼Œè€Œæ˜¯åœ¨ä¸€å¹´ä¹‹ååŠ å…¥çš„ - æƒ³èµ·æˆ‘å¼€å§‹çš„åœ°æ–¹ä»ç„¶å¾ˆ[å…´å¥‹](https://medium.com/@left_pad/ossthanks-some-thoughts-d0267706c2c6)ã€‚

è‡³äºæˆ‘ï¼Œæˆ‘è®¤è¯†åˆ°ä¸€ä¸ªéœ€æ±‚å’Œä¸€ä¸ªæœ‰è¶£çš„é¡¹ç›®ã€‚æˆ‘æ…¢æ…¢å¹¶æŒç»­åœ°æœ‰æ›´å¤šçš„å‚ä¸ï¼Œç°åœ¨æˆ‘å·²ç»èƒ½å¤Ÿæœ‰äº†æˆ‘çš„é›‡ä¸»ï¼Œ[Behance](https://www.behance.net/)ï¼Œèµ„åŠ©æˆ‘ä¸€åŠçš„æ—¶é—´å·¥ä½œåœ¨ Babel ä¸Šã€‚

æœ‰æ—¶å€™â€œç»´æŠ¤â€åªæ˜¯æ„å‘³ç€ä¿®å¤ bugsï¼Œåœ¨ Slack æˆ– [Twitter](https://twitter.com/babeljs/) ä¸Šå›ç­”é—®é¢˜ï¼Œæˆ–æ˜¯ç¼–å†™æ›´æ–°æ—¥å¿—ï¼ˆè¿™çœŸçš„å–å†³äºæˆ‘ä»¬æ¯ä¸€ä¸ªäººï¼‰ã€‚ä½†æ˜¯æœ€è¿‘ï¼Œæˆ‘å·²ç»å‡å°‘äº†åœ¨ bug ä¿®å¤å’Œç‰¹æ€§ä¸Šçš„æ³¨æ„åŠ›ã€‚å–è€Œä»£ä¹‹çš„æ˜¯æˆ‘æŠŠæ—¶é—´æ”¾åœ¨äº†æ€è€ƒæ›´å¤šé«˜å±‚æ¬¡çš„é—®é¢˜ä¸Šï¼Œä¾‹å¦‚ï¼šè¿™ä¸ªé¡¹ç›®çš„æœªæ¥æ˜¯ä»€ä¹ˆï¼Ÿæˆ‘ä»¬å¦‚ä½•å°±ç»´æŠ¤è€…ä¸ç”¨æˆ·çš„æ•°é‡è€Œè¨€ï¼Œä½¿æˆ‘ä»¬çš„ç¤¾åŒºå¢é•¿ã€‚æˆ‘ä»¬å¦‚ä½•åœ¨èµ„é‡‘æ–¹é¢ç»´æŒè¿™ä¸ªé¡¹ç›®ï¼Ÿæˆ‘ä»¬å¦‚ä½•æ•´ä½“çš„èå…¥ JavaScript ç”Ÿæ€ç³»ç»Ÿï¼ˆæ•™è‚²ï¼Œ[TC39](https://github.com/tc39/proposals)ï¼Œå·¥å…·ï¼‰ï¼Ÿè¿™é‡Œæœ‰æ²¡æœ‰ä¸€ä¸ªé€‚åˆæˆ‘ä»¬çš„è§’è‰²æ¥å¸®åŠ©æ–°äººåŠ å…¥å¼€æºé¡¹ç›®ï¼ˆ[RGSoC](https://twitter.com/left_pad/status/959439119960215552) å’Œ [GSoC](https://summerofcode.withgoogle.com/)ï¼‰ï¼Ÿ

å› ä¸ºè¿™äº›é—®é¢˜ï¼Œè¿™ä¸ªç‰ˆæœ¬æœ€è®©æˆ‘æ„Ÿåˆ°å…´å¥‹çš„åœ°æ–¹ä¸æ˜¯é‚£äº›ç‰¹æ€§ï¼ˆæœ‰å¾ˆå¤šï¼šåˆæ­¥å®æ–½çš„æ–°ææ¡ˆæ¯”å¦‚ [Pipeline Operator (a |> b)](https://github.com/babel/babel/tree/master/packages/babel-plugin-proposal-pipeline-operator)ï¼Œæœ‰ TS å›¢é˜Ÿæä¾›å¸®åŠ©çš„ [new TypeScript preset](https://github.com/babel/babel/tree/master/packages/babel-preset-typescript) å’Œ .babelrc.js æ–‡ä»¶ï¼‰ã€‚

è€Œæ˜¯æˆ‘å¯¹è¿™äº›ç‰¹æ€§æ‰€ä»£è¡¨çš„ä¸œè¥¿æ›´å…´å¥‹ï¼šä¸€å¹´æ¥ä¸æ‡ˆçš„åŠªåŠ›ä¸å»æ‰“ç ´ä¸€åˆ‡ï¼Œå¹³è¡¡ç”¨æˆ·çš„æœŸæœ›ï¼ˆä¸ºä»€ä¹ˆæ„å»ºè¿™ä¹ˆæ…¢/ä»£ç è¾“å…¥è¿™ä¹ˆå¤§ï¼Œä¸ºä»€ä¹ˆä»£ç æ²¡æœ‰è¶³å¤Ÿçš„å…¼å®¹ï¼Œä¸ºä»€ä¹ˆè¿™ä¸ªå·¥ä½œä¸èƒ½æ²¡æœ‰é…ç½®ï¼Œä¸ºä»€ä¹ˆè¿™é‡Œæ²¡æœ‰ä¸€ä¸ªå¯¹å…¶ä»–æƒ…å†µçš„é€‰æ‹©ï¼‰å’Œç»´æŒä¸€ä¸ªç”±å¿—æ„¿è€…ç»„æˆçš„åšå®å›¢é˜Ÿã€‚

å¹¶ä¸”æˆ‘çŸ¥é“æˆ‘ä»¬çš„è¡Œä¸šå¯¹â€œä¸»è¦ç‰ˆæœ¬â€æœ‰ä¸€ä¸ªå¾ˆå¤§çš„å…³æ³¨ï¼Œå¤§è‚†å®£ä¼ ç‰¹æ€§å’Œ starsï¼Œä½†é‚£åªæ˜¯ä¸€ä¸ªè¡°è½çš„æ—¥å­ã€‚æˆ‘æƒ³å»ºè®®æˆ‘ä»¬ç»§ç»­æƒ³ä¸€æƒ³ä»€ä¹ˆä½¿ç”Ÿæ€ç³»ç»Ÿä»¥ä¸€ä¸ªå¥åº·çš„æ–¹å¼æŒç»­å‘å‰æ¨è¿›ã€‚

è¿™å¯èƒ½ä»…ä»…æ„å‘³ç€æ€è€ƒç»´æŠ¤è€…çš„å¿ƒç†å’Œæƒ…ç»ªä¸Šçš„è´Ÿæ‹…ã€‚è¿™å¯èƒ½æ„å‘³ç€æ€è€ƒå¦‚ä½•æä¾›æŒ‡å¯¼ï¼ŒæœŸæœ›ç®¡ç†ï¼Œå¹³è¡¡å·¥ä½œ/ç”Ÿæ´»çš„å»ºè®®å’Œå…¶ä»–çš„äººä»¬æƒ³è¦åŠ å…¥çš„èµ„æºï¼Œè€Œä¸åªæ˜¯é¼“åŠ±å¼€å‘è€…æ¥æœŸå¾…å³æ—¶çš„ï¼Œå…è´¹çš„å¸®åŠ©ã€‚

#### æ·±å…¥æ›´æ–°æ—¥å¿—

å—¯ï¼Œæˆ‘å¸Œæœ›ä½ èƒ½äº«å—è¿™ä¸ªé•¿çš„æ›´æ–°æ—¥å¿— ğŸ˜Šã€‚å¦‚æœä½ å¯¹å¸®åŠ©æˆ‘ä»¬æ„Ÿå…´è¶£ï¼Œè¯·è®©æˆ‘ä»¬çŸ¥é“ï¼Œæˆ‘ä»¬å°†å¾ˆä¹æ„å¤šè°ˆã€‚

![](https://cdn-images-1.medium.com/max/800/0*zvhm_vD3VWFaWA1c.png)

å› ä¸ºäººä»¬æƒ³æ›´å¤šåœ°äº†è§£å…³äº Babel å¦‚ä½•å·¥ä½œå’Œå›é¦ˆï¼Œæˆ‘ä»¬å¼€æ”¾äº†ä¸€ä¸ªæ–°çš„ [è§†é¢‘é¡µé¢](https://babeljs.io/docs/community/videos/)ã€‚è¿™ä¸ªé¡µé¢åŒ…å«äº† Babel ä¼šè®®è°ˆè¯çš„è§†é¢‘ï¼Œæ¥è‡ªå›¢é˜Ÿæˆå‘˜å’Œç¤¾åŒºäººä»¬çš„ç›¸å…³æ¦‚å¿µã€‚

![](https://cdn-images-1.medium.com/max/800/0*8q5nV1APkAFKydrZ.png)

æˆ‘ä»¬åŒæ ·åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ [å›¢é˜Ÿé¡µé¢](https://babeljs.io/team)ï¼æˆ‘ä»¬å°†åœ¨æœªæ¥ä½¿ç”¨æ›´å¤šçš„å…³äºäººä»¬åœ¨åšä»€ä¹ˆå·¥ä½œå’Œä¸ºä»€ä¹ˆä»–ä»¬åŠ å…¥çš„ä¿¡æ¯æ¥æ›´æ–°è¿™ä¸ªé¡µé¢ã€‚å¯¹äºä¸€ä¸ªè¿™æ ·å¤§çš„é¡¹ç›®ï¼Œè¿™é‡Œæœ‰å¾ˆå¤šæ–¹æ³•å‚ä¸å…¶ä¸­å¹¶å¸®å¿™ã€‚

è¿™æœ‰ä¸€äº›äº®ç‚¹å’Œç®€çŸ­çš„äº‹å®ï¼š

*   Babel åœ¨ [2017 å¹´ 10 æœˆ 28 æ—¥](https://babeljs.io/blog/2017/10/05/babel-turns-three) å·²ç» 3 å²äº†ï¼
*   Daniel æŠŠ `babel/babylon` å’Œ `babel/babel-preset-env` [ç§»åŠ¨åˆ°](https://twitter.com/left_pad/status/926096965565370369) ä¸»è¦çš„ Babel monorepo é‡Œï¼Œ[babel/babel](https://github.com/babel/babel)ã€‚è¿™åŒ…å« Git å†å²ï¼Œæ ‡ç­¾å’Œææ¡ˆã€‚
*   æˆ‘ä»¬ä» Facebook Open Source æ”¶åˆ°äº† [æ¯æœˆ 1000 ç¾å…ƒçš„æèµ ](https://twitter.com/left_pad/status/923696620935421953)ï¼
*   è¿™æ˜¯æˆ‘ä»¬ä»ä¸€å¼€å§‹æ”¶åˆ°çš„æœ€é«˜çš„æœˆåº¦æèµ ï¼ˆä¸‹ä¸€ä¸ªæ˜¯ 100 ç¾å…ƒ/æœˆï¼‰ã€‚
*   åŒæ—¶ï¼Œæˆ‘ä»¬å°†ç”¨æˆ‘ä»¬çš„èµ„é‡‘å»äº²è‡ªä¼šè§ï¼Œå¹¶æ´¾äººå» TC39 ä¼šè®®ã€‚è¿™äº›ä¼šè®®æ¯éš” 2 ä¸ªæœˆåœ¨ä¸–ç•Œå„åœ°ä¸¾è¡Œã€‚
*  å¦‚æœä¸€ä¸ªå…¬å¸æƒ³åˆ¶å®šèµåŠ©ä»€ä¹ˆï¼Œæˆ‘ä»¬èƒ½åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„è®®é¢˜æ¥è·Ÿè¸ªã€‚è¿™åœ¨ä¹‹å‰æ˜¯å›°éš¾çš„ï¼Œå› ä¸ºæˆ‘ä»¬å¿…é¡»ç”¨ä»å£è¢‹æé’±æ”¯ä»˜ï¼Œæˆ–è€…åœ¨åŒä¸€å‘¨æ‰¾åˆ°ä¸€ä¸ªä¼šè®®å‘è¨€æ¥å¸®åŠ©æ”¯ä»˜è´¹ç”¨ã€‚

#### ä½ æ€ä¹ˆæ‰èƒ½å¸®å¿™

å¦‚æœä½ çš„å…¬å¸æ„¿æ„é€šè¿‡æ”¯æŒä¸€ä¸ª JavaScript å¼€å‘çš„åŸºç¡€éƒ¨åˆ†å’Œä»–çš„æœªæ¥ä½œä¸º **å›æŠ¥**ï¼Œè€ƒè™‘ä¸€ä¸‹ç»™æˆ‘ä»¬çš„ [Open Collective](https://opencollective.com/babel) æçŒ®ã€‚ä½ ä¹Ÿèƒ½è´¡çŒ®å¼€å‘æ—¶é—´æ¥å¸®åŠ©ç»´æŠ¤è¿™ä¸ªé¡¹ç›®ã€‚

#### #1ï¼šå¸®åŠ©ç»´æŠ¤é¡¹ç›®ï¼ˆå·¥ä½œä¸­å¼€å‘äººå‘˜çš„æ—¶é—´ï¼‰

![](https://i.loli.net/2018/05/10/5af3a5e7b9a3f.png)

å¯¹ Babel æœ€å¥½çš„äº‹æƒ…å°±æ˜¯æ‰¾æ„¿æ„å¸®åŠ©é¡¹ç›®çš„äººï¼Œä»–ä»¬èƒ½å¤Ÿæ‰¿æ‹…å¤§é‡çš„å·¥ä½œå¹¶å¯¹éœ€æ±‚è´Ÿè´£ã€‚å†è¯´ä¸€ä¸‹ï¼Œ[æˆ‘ä»æ¥æ²¡è§‰å¾—å‡†å¤‡å¥½](https://dev.to/hzoo/im-the-maintainer-of-babel-ask-me-anything-282/comments/1k6d) æˆä¸ºä¸€ä¸ªç»´æŠ¤è€…ï¼Œä½†ä¸çŸ¥é“æ€ä¹ˆçš„ï¼Œå°±å‘ç°å·²ç»è¿™æ ·äº†ã€‚ä½†æ˜¯æˆ‘åªæ˜¯ä¸€ä¸ªäººï¼Œå¹¶ä¸”æˆ‘çš„å›¢é˜Ÿåªæœ‰å°‘æ•°å‡ ä¸ªäººã€‚

#### #2ï¼šå¸®åŠ©èµ„åŠ©å¼€å‘

![](https://i.loli.net/2018/05/10/5af3a5e8009bc.png)

æˆ‘æ— ç–‘æ˜¯æƒ³èƒ½å¤Ÿç»™å›¢é˜Ÿçš„äººèµ„é‡‘ä½¿ä»–ä»¬èƒ½å¤Ÿå…¨èŒå·¥ä½œã€‚å°¤å…¶æ˜¯ Loganï¼Œä¸ä¹…ä»¥å‰ç¦»å¼€äº†ä»–çš„å·¥ä½œå¹¶ä¸”ç”¨æˆ‘ä»¬çš„èµ„é‡‘æ¥è¿›è¡Œ Babel çš„å…¼èŒå·¥ä½œã€‚

#### #3 ä»å…¶ä»–æ¸ é“åšè´¡çŒ®

ä¾‹å¦‚ï¼Œ[Angus](https://twitter.com/angustweets) ç»™æˆ‘ä»¬åˆ¶ä½œäº†ä¸€ä¸ª [å®˜æ–¹æ­Œæ›²](https://medium.com/@angustweets/hallelujah-in-praise-of-babel-977020010fad)ï¼

#### å‡çº§

æˆ‘ä»¬ä¹Ÿå°†å‡çº§å¸®åŠ©ä½  [é‡å†™ä½ çš„ package.json/.babelrc æ–‡ä»¶](https://github.com/babel/notes/issues/44) çš„å·¥å…·å’Œå…¶ä»–æ›´å¤šçš„ä¸œè¥¿ã€‚ ç†æƒ³æƒ…å†µä¸‹ï¼Œè¿™æ„å‘³ç€å®ƒå°†ä¿®æ”¹ä»»ä½•å¿…è¦çš„ç‰ˆæœ¬å·å˜æ›´ï¼ŒåŒ…çš„é‡å‘½åå’Œé…ç½®çš„å˜æ›´ã€‚

å½“å°è¯•æ›´æ–°çš„æ—¶å€™ï¼Œè¯·ä¼¸å‡ºæ‰‹æ¥å¸®åŠ©å¹¶å‘å¸ƒè®®é¢˜ã€‚è¿™æ˜¯ä¸€ä¸ªå‚ä¸å…¶ä¸­å¹¶å¸®åŠ©ç”Ÿæ€ç³»ç»Ÿæ›´æ–°çš„ç»å¥½çš„æœºä¼šã€‚

#### [å‰ä¸€ä¸ªå‘å¸ƒ](https://babeljs.io/blog/2017/09/12/planning-for-7.0) æ€»ç»“

*   æ”¾å¼ƒå¯¹ Node 0.10/0.12/5 çš„æ”¯æŒ
*   æ›´æ–° [TC39 ææ¡ˆ](https://github.com/babel/proposals/issues)
*   æ•°å­—åˆ†éš”ç¬¦ï¼š `1_000`
*   å¯é€‰çš„é“¾æ¥æ“ä½œç¬¦ï¼š `a?.b`
*   `import.meta` ï¼ˆå¯è§£æï¼‰
*   å¯é€‰çš„ Catch ç»‘å®šï¼š`try { a } catch {}`
*   BigIntï¼ˆå¯è§£æï¼‰ï¼š`2n`
*   åˆ†å‰²å¯¼å‡ºæ‰©å±•åˆ° `export-default-from` å’Œ `export-ns-form`
*   æ”¯æŒ `.babelrc.js`ï¼ˆä½¿ç”¨ JavaScript ä»£æ›¿ JSON çš„é…ç½®ï¼‰
*   å¢åŠ ä¸€ä¸ªæ–°çš„ Typescript Preset å’Œæ‹†åˆ† React/Flow presets
*   å¢åŠ  [JSX åˆ†æ®µæ”¯æŒ](https://reactjs.org/blog/2017/11/28/react-v16.2.0-fragment-support.html) å’Œ å„ç§ Flow æ›´æ–°
*   ä¸ºäº†æ›´å°çš„ä½“ç§¯ï¼Œåˆ é™¤å†…éƒ¨ `babel-runtime` ä¾èµ–

#### æœ€æ–°æ›´æ–°çš„ TC39 ææ¡ˆ

*   Pipeline æ“ä½œç¬¦ï¼š`a |> b`
*   Throw è¡¨è¾¾å¼ï¼š`() => throw 'hi'`
*   æ— æ•ˆåˆå¹¶æ“ä½œç¬¦ï¼š`a ?? b`

#### å¼ƒç”¨å¹´ä»½ presetsï¼ˆä¾‹å¦‚ï¼Œbabel-preset-es20xxï¼‰

æ³¨æ„ï¼šä½¿ç”¨ `babel-preset-env`ï¼š

è¿™æ¯”ä½ å†³å®šä½¿ç”¨å“ªä¸ª Babel preset æ›´å¥½çš„åœ°æ–¹æ˜¯ä»€ä¹ˆï¼Ÿå·²ç»ä¸ºä½ å®Œæˆäº†ï¼Œè‡ªåŠ¨åœ°ï¼

å°½ç®¡ç»´æŠ¤æ•°æ®åˆ—è¡¨çš„å·¥ä½œé‡å¾ˆå¤§ - å†ä¸€æ¬¡ï¼Œæˆ‘ä»¬éœ€è¦å¸®åŠ© - å®ƒè§£å†³äº†å¾ˆå¤šé—®é¢˜ã€‚å®ƒç¡®ä¿äº†ç”¨æˆ·èƒ½å¤ŸåŠæ—¶äº†è§£è§„èŒƒã€‚å®ƒæ„å‘³ç€è¾ƒå°‘çš„é…ç½®/åŒ…çš„æ··ä¹±ã€‚å®ƒæ„å‘³ç€ä¸€ä¸ªç®€å•å‡çº§ä¹‹è·¯ã€‚å¹¶ä¸”å®ƒæ„å‘³ç€æ›´å°‘çš„ä»€ä¹ˆæ˜¯ä»€ä¹ˆçš„é—®é¢˜ã€‚

`babel-preset-env` å…¶å®æ˜¯ä¸€ä¸ªå¾ˆ _è€_ çš„ presetï¼Œå®ƒä»£æ›¿äº†æ¯ä¸ªå…¶ä»–çš„ä½ å°†éœ€è¦çš„ï¼ˆes2015ï¼Œes2016ï¼Œes2017ï¼Œes20xxï¼Œlatest ç­‰ç­‰ï¼‰å¥æ³• presetã€‚

![](https://cdn-images-1.medium.com/max/800/0*wgAjmRI1MVcI_Veg.png)

å®ƒä»£æ›¿äº†æ‰€æœ‰çš„è€çš„ presets æ¥ç¼–è¯‘æœ€æ–°å¹´åº¦çš„ JavaScript ç‰ˆæœ¬ï¼ˆStage 4 é‡Œçš„æ— è®ºä»€ä¹ˆï¼‰ã€‚ä½†æ˜¯å®ƒä¹Ÿæœ‰èƒ½åŠ›æ ¹æ®ä½ æŒ‡å®šçš„ç›®æ ‡ç¯å¢ƒç¼–è¯‘ï¼šå®ƒèƒ½å¤Ÿå¤„ç†å¼€å‘æ¨¡å¼ï¼Œæ¯”å¦‚æœ€æ–°ç‰ˆæœ¬çš„æµè§ˆå™¨ï¼Œæˆ–æ˜¯å¤šé‡æ„å»ºï¼Œä¾‹å¦‚ IE ç‰ˆæœ¬ã€‚ å®ƒç”šè‡³æœ‰å¦ä¸€ä¸ªä¸ºäº†æµè¡Œå¤šå¹´çš„æµè§ˆå™¨æä¾›çš„ç‰ˆæœ¬

#### æ²¡æœ‰ç§»é™¤ Stage presetsï¼ˆbabel-preset-stage-xï¼‰

![](https://i.loli.net/2018/05/10/5af3a6239956e.png)

æˆ‘ä»¬å¯ä»¥éšæ—¶æ›´æ–°å®ƒï¼Œæˆ–è®¸æˆ‘ä»¬åªéœ€è¦å†³å®šä¸€ä¸ªæ¯”å½“å‰ presets æ›´å¥½çš„ç³»ç»Ÿã€‚

ç°åœ¨ï¼Œstage presets åªæ˜¯æˆ‘ä»¬åœ¨æ¯ä¸ª TC39 ä¼šè®®åæ‰‹åŠ¨æ›´æ–°çš„æ’ä»¶åˆ—è¡¨ã€‚è¦ä½¿è¿™ä¸ªå¯ç®¡ç†ï¼Œæˆ‘ä»¬éœ€è¦å…è®¸ä¸»è¦çš„ç‰ˆæœ¬ä¸ºè¿™äº›â€œä¸ç¨³å®šâ€çš„åŒ…åšç¼“å†²ã€‚è¿™æ˜¯ä¸€éƒ¨åˆ†ï¼Œå› ä¸ºå§”å‘˜ä¼šæ— è®ºæ€æ ·éƒ½å°†é‡å»ºè¿™äº›åŒ…ã€‚æ‰€ä»¥æˆ‘ä»¬å¯èƒ½ä¼šä»ä¸€ä¸ªå®˜æ–¹åŒ…åšè¿™ä»¶äº‹ï¼Œå¹¶ä¸”ä¹‹åæˆ‘ä»¬æœ‰èƒ½åŠ›æä¾›è¿‡æ›´å¥½çš„æ¶ˆæ¯ç­‰ç­‰ã€‚

#### é‡å‘½åï¼šScoped Packagesï¼ˆ`@babel/x`ï¼‰

è¿™é‡Œæ˜¯ä¸€ä¸ªå¤§çº¦ä¸€å¹´å‰æˆ‘å‘å¸ƒçš„æŠ•ç¥¨ï¼š

![](https://i.loli.net/2018/05/10/5af3a6402f8b7.png)

é‚£æ—¶å€™ï¼Œæ²¡æœ‰å¾ˆå¤šé¡¹ç›®ä½¿ç”¨ scoped packagesï¼Œæ‰€ä»¥å¾ˆå¤šäººç”šè‡³ä¸çŸ¥é“å®ƒä»¬çš„å­˜åœ¨ã€‚é‚£æ—¶å€™ä½ å¯èƒ½å¿…é¡»ä¸ºäº†ä¸€ä¸ª npm org çš„è´¦æˆ·èŠ±é’±ï¼Œè€Œç°åœ¨å®ƒæ˜¯å…è´¹çš„ï¼ˆå¹¶ä¸”æ”¯æŒä¹Ÿ non-scoped packagesï¼‰ã€‚

æœç´¢ scoped packages çš„é—®é¢˜å·²ç»è¢«è§£å†³äº†ï¼Œä¸‹è½½è®¡æ•°ä¹Ÿå·²ç»ç”Ÿæ•ˆã€‚å”¯ä¸€ä¸€ä¸ªç»Šè„šçŸ³å°±æ˜¯ä¸€äº›ç¬¬ä¸‰æ–¹æ³¨å†Œä»ç„¶ä¸æ”¯æŒ scoped packagesã€‚ä½†æ˜¯æˆ‘æƒ³æˆ‘ä»¬ç°åœ¨æ­£å¤„äºä¸€ä¸ªç‚¹ï¼Œåœ¨è¿™é‡Œçœ‹èµ·æ¥ç­‰å¾…å¾ˆä¸åˆç†ã€‚

ä¸ºä»€ä¹ˆæˆ‘ä»¬æ›´å–œæ¬¢ scoped packagesï¼š

*   å‘½åå›°éš¾ï¼šæˆ‘ä»¬ä¸éœ€è¦å»æ£€æŸ¥åˆ«äººæ˜¯å¦å†³å®šåœ¨ä»–ä»¬çš„æ’ä»¶ä¸Šä½¿ç”¨æˆ‘ä»¬çš„å‘½åæƒ¯ä¾‹
*   åœ¨ package squatting ä¸Šæˆ‘ä»¬æœ‰ç±»ä¼¼çš„é—®é¢˜
*   æœ‰äº›æ—¶å€™äººä»¬åˆ›å»º `babel-preset-20xx` æˆ–æ˜¯å…¶ä»–çš„åŒ…æ˜¯å› ä¸ºå¥½ç©ã€‚æˆ‘ä»¬å¿…é¡»å‘å¸ƒä¸€ä¸ªè®®é¢˜ï¼Œå¹¶ä¸”å‘é‚®ä»¶æŠŠå®ƒè¦å›æ¥
*   æœ‰äººæœ‰ä¸€ä¸ªåˆæ³•çš„åŒ…ï¼Œä½†æ˜¯å®ƒæ°å¥½å’Œæˆ‘ä»¬æƒ³å«çš„åå­—æ˜¯ä¸€æ ·çš„
*   æœ‰äººçœ‹åˆ°ä¸€ä¸ªæ–°çš„ææ¡ˆæ­£åœ¨ mergingï¼ˆåƒ optional chaining æˆ–è€… pipeline æ“ä½œç¬¦ï¼‰ï¼Œå¹¶ä¸”å†³å®šä½¿ç”¨åŒæ ·çš„åå­—æ¥ fork å’Œ publishã€‚ç„¶åï¼Œå½“æˆ‘ä»¬å‘å¸ƒçš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±è¢«å‘ŠçŸ¥åŒ…å·²ç»è¢«å‘å¸ƒäº† ğŸ¤”ã€‚æ‰€ä»¥æˆ‘å¿…é¡»æ‰¾åˆ°ä»–ä»¬å’Œ npm æ”¯æŒå›¢é˜ŸåŒæ–¹çš„ç”µå­é‚®ä»¶ï¼ŒæŠŠåŒ…æ‹¿å›æ¥å†é‡æ–°å‘å¸ƒã€‚
*   åŒä¸€ä¸ªåå­—ä¸‹ï¼Œä»€ä¹ˆæ˜¯â€œå®˜æ–¹â€åŒ…ï¼Œä»€ä¹ˆæ˜¯ç”¨æˆ·/ç¤¾åŒºåŒ…ï¼Ÿæˆ‘ä»¬æ”¶åˆ°äº†æœ‰äº›äººä½¿ç”¨é”™è¯¯çš„åå­—æˆ–è€…éå®˜æ–¹åŒ…çš„é—®é¢˜æŠ¥å‘Šï¼ŒåŸå› æ˜¯ä»–ä»¬ä»¥ä¸ºè¿™æ˜¯ Babel çš„ä¸€éƒ¨åˆ†ã€‚å…³äºè¿™ä¸ªä¸€ä¸ªä¾‹å­æ˜¯æœ‰ä¸€ä»½æŠ¥å‘Šè¯´ `babel-env` é‡å†™äº†ä»–ä»¬çš„ `.babelrc` æ–‡ä»¶ã€‚ä»–ä»¬èŠ±äº†ä¸€äº›æ—¶é—´æ‰æ„è¯†åˆ°å®ƒä¸æ˜¯ `babel-preset-env`ã€‚

æ‰€ä»¥ï¼Œè¿™å·²ç»å¾ˆæ¸…æ¥šäº†ï¼Œæˆ‘ä»¬åº”è¯¥ä½¿ç”¨ scoped packagesï¼Œå¹¶ä¸”ï¼Œä¸è®ºä»€ä¹ˆï¼Œæˆ‘ä»¬åº”è¯¥å¿«ä¸€äº›å®Œæˆå®ƒï¼

scoped name æ›´æ”¹çš„ä¾‹å­:

*   `babel-cli` -> `@babel/cli`
*   `babel-core` -> `@babel/core`
*   `babel-preset-env` -> `@babel/preset-env`

#### é‡å‘½åï¼š`-proposal-`

ç°åœ¨ä»»ä½•ææ¡ˆéƒ½å°†è¢«ä»¥ `-proposal-` å‘½åæ¥æ ‡è®°ä»–ä»¬è¿˜æ²¡æœ‰åœ¨ JavaScript å®˜æ–¹ä¹‹å†…ã€‚

æ‰€ä»¥ `@babel/plugin-transform-class-properties` å˜æˆ `@babel/plugin-proposal-class-properties`ï¼Œå½“å®ƒè¿›å…¥ Stage 4 åï¼Œæˆ‘ä»¬ä¼šæŠŠå®ƒå‘½åå›å»ã€‚

#### é‡å‘½åï¼šæŠŠæ’ä»¶åå­—é‡Œçš„å¹´ä»½å»æ‰

ä¹‹å‰çš„ plugins åå­—é‡Œæœ‰å¹´ä»½ï¼Œä½†æ˜¯ç°åœ¨ä¼¼ä¹å¹¶ä¸æ˜¯å¿…é¡»çš„ã€‚

æ‰€ä»¥ `@babel/plugin-transform-es2015-classes` å˜æˆ `@babel/plugin-transform-classes`ã€‚

å› ä¸ºå¹´ä»½åªæ˜¯ç”¨äº es3/es2015ï¼Œæˆ‘ä»¬æ²¡æœ‰ä» es2016 æˆ– es2017 é‡Œæ”¹å˜ä»»ä½•ä¸œè¥¿ã€‚æ— è®ºæ€æ ·ï¼Œæˆ‘ä»¬å°†é‚£äº› presets è®¾ç½®ä¸º preset-envï¼Œå¹¶ä¸”ï¼Œå¯¹äºå­—é¢æ¨¡æ¿è°ƒæ•´ï¼Œæˆ‘ä»¬åªæ˜¯ç®€å•åœ°æŠŠå®ƒæ·»åŠ åˆ°å­—é¢æ¨¡æ¿è½¬æ¢é‡Œã€‚

#### Peer dependencies å’Œ integrations

æˆ‘ä»¬ä»‹ç»ä¸€ä¸‹ `@babel/core` ä¸Šçš„ peer dependenciesï¼Œç”¨äºæ‰€æœ‰çš„ pluginsï¼ˆ`@babel/plugin-class-properties`ï¼‰ï¼Œpresetsï¼ˆ`@babel/preset-env`ï¼‰å’Œ top level packagesï¼ˆ`@babel/cli`ï¼Œ`babel-loader`ï¼‰

> peerDependencies æ˜¯è¢«ä½ çš„ä»£ç æœŸæœ›ä½¿ç”¨çš„ä¾èµ–ï¼Œä¸åªè¢«ç”¨äºå®ç°ç»†èŠ‚çš„ dependencies ç›¸åã€‚- [Stijn de Witt åœ¨ StackOverflow ä¸Šçš„å›ç­”](https://stackoverflow.com/a/34645112)

`babel-loader` åœ¨ `babel-core` ä¸Š å·²ç»æœ‰ä¸€ä¸ª `peerDependency` äº†ï¼Œæ‰€ä»¥è¿™ä¸ªåªæ˜¯æŠŠå®ƒå˜æˆäº† `@babel/core`ã€‚è¿™ä¸ªæ”¹å˜é˜»æ­¢äº†äººä»¬å°è¯•å»å®‰è£…è¿™äº› Babel åŒ…çš„é”™è¯¯ç‰ˆæœ¬ã€‚

å¯¹äºåœ¨ `babel-core` å·²ç»æœ‰ `peerDependency` å’Œæ²¡æœ‰å‡†å¤‡å¥½ä¸»è¦æ›´æ–°ï¼ˆå› ä¸ºæ”¹å˜ peer dependency æ˜¯ä¸€ä¸ª breaking changeï¼‰çš„å·¥å…·ï¼Œæˆ‘ä»¬å·²ç»å‘å¸ƒäº†ä¸€ä¸ªæ–°ç‰ˆæœ¬çš„ `babel-core` æ¥æ¡¥æ¥æ–°ç‰ˆæœ¬ä¸Šçš„æ”¹å˜ [babel-core@7.0.0-bridge.0](https://github.com/babel/babel-bridge)ã€‚æƒ³è·å¾—æ›´å¤šåœ°ä¿¡æ¯ï¼ŒæŸ¥çœ‹ [è¿™ä¸ªè®®é¢˜](https://github.com/facebook/jest/pull/4557#issuecomment-344048628)ã€‚

ç±»ä¼¼çš„ï¼Œåƒ `gulp-babel`ï¼Œ`rollup-plugin-babel` ç­‰ç­‰çš„åŒ…éƒ½æ›¾ç»æŠŠ `babel-core` ä½œä¸ºä¸€ä¸ª dependencyã€‚ç°åœ¨ï¼Œè¿™äº›å°†ä»…ä»…åœ¨ `@babel/core` ä¸Šæœ‰ `peerDependency`ã€‚å› ä¸ºè¿™ä¸ªï¼Œè¿™äº›åŒ…æ²¡æœ‰å¿…è¦åœ¨ `@babel/core` API æ”¹å˜çš„æ—¶å€™å‡çº§ä¸»è¦ç‰ˆæœ¬

#### [#5224](https://github.com/babel/babel/pull/5224)ï¼šç‹¬ç«‹å‘å¸ƒ experimental packages

æˆ‘åœ¨ [Babel çš„çŠ¶æ€](http://babeljs.io/blog/2016/12/07/the-state-of-babel) çš„ `Versioning` éƒ¨åˆ†æåˆ°è¿‡è¿™ä¸ªã€‚è¿™é‡Œæ˜¯ [Github Issue](https://github.com/babel/babylon/issues/275)ã€‚

ä½ å¯èƒ½è®°å¾—åœ¨ Babel 6 ä¹‹åï¼ŒBabel å˜æˆäº†ä¸€ä¸ªæ‹¥æœ‰å®ƒè‡ªå·±çš„ç”Ÿæ€ç³»ç»Ÿçš„ä¸€å¥— npm åŒ…ï¼Œè¿™ä¸ªç”Ÿæ€ç³»ç»Ÿæœ‰ custom presets å’Œ pluginsã€‚

ç„¶è€Œï¼Œä»é‚£ä»¥åï¼Œæˆ‘ä»¬ä¸€ç›´ä½¿ç”¨ä¸€ä¸ª â€œfixed/synchronizedâ€ çš„ç‰ˆæœ¬ç³»ç»Ÿï¼ˆæ‰€ä»¥æ²¡æœ‰åŒ…æ˜¯åœ¨ v7.0 æˆ–è€…æ˜¯ä»¥ä¸Šçš„ï¼‰ã€‚å½“æˆ‘ä»¬åšä¸€ä¸ªæ–°çš„å‘å¸ƒï¼Œä¾‹å¦‚ `v6.23.0`ï¼Œåªæœ‰æºä»£ç æ›´æ–°è¿‡çš„åŒ…æ‰ä¼šéšç€æ–°ç‰ˆæœ¬ä¸€èµ·è¢«å‘å¸ƒã€‚å…¶ä½™çš„åŒ…ä¿æŒåŸæ ·ã€‚è¿™åœ¨å®è·µä¸­å¤§å¤šæ˜¯ç®¡ç”¨çš„ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨æˆ‘ä»¬çš„åŒ…ä¸­ä½¿ç”¨äº† `^`ã€‚

ä¸å¹¸çš„æ˜¯ï¼Œå½“ä¸€ä¸ªåŒ…éœ€è¦å‘å¸ƒä¸€ä¸ªä¸»ç‰ˆæœ¬æ—¶ï¼Œè¿™ç§ç³»ç»Ÿéœ€è¦ä¸ºæ‰€æœ‰çš„åŒ…éƒ½å‘å¸ƒä¸€ä¸ªã€‚è¿™è¦ä¸æ„å‘³ç€æˆ‘ä»¬åšäº†å¾ˆå¤šå°çš„ breaking changesï¼ˆä¸å¿…è¦çš„ï¼‰ï¼Œè¦ä¸å°±æ„å‘³ç€æˆ‘ä»¬æˆ‘ä»¬æ‰“åŒ…äº†å¾ˆå¤š breaking changes åˆ°ä¸€ä¸ªå‘å¸ƒä¸­ã€‚ç›¸åï¼Œæˆ‘ä»¬æƒ³æŠŠ experimental packagesï¼ˆStage 0 ç­‰ç­‰ï¼‰å’Œ æ‰€æœ‰å…¶ä»–çš„ï¼ˆes2015ï¼‰åŒºåˆ†å¼€ã€‚

å› ä¸ºè¿™ä¸ªï¼Œå½“è§„èŒƒå˜åŒ–æ—¶ï¼Œæˆ‘ä»¬æ‰“ç®—å°†æ‰€æœ‰çš„ experimental proposal plugins çš„ä¸»ç‰ˆæœ¬è¿­ä»£ï¼Œè€Œä¸åªæ˜¯ç­‰å¾…å»æ›´æ–°æ‰€æœ‰çš„ Babelã€‚æ‰€ä»¥ï¼Œä»»ä½• Stage 4 ä¹‹å‰çš„ä¸œè¥¿éƒ½å°†ä»¥ä¸»ç‰ˆæœ¬è¿­ä»£çš„å½¢å¼å¼€æ”¾ç»™ breaking changesã€‚Stage presets è‡ªèº«ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼ˆå¦‚æœæˆ‘ä»¬ä¸æŠŠä»–ä»¬æ•´ä¸ªæ‰”æ‰ï¼‰ã€‚

ä¸è¿™ä¸ªéšä¹‹è€Œæ¥çš„æ˜¯æˆ‘ä»¬è¦æ±‚ TC39 ææ¡ˆä½¿ç”¨ `-proposal-` çš„åå­—çš„å†³å®šï¼Œæˆ‘ä»¬å°†å¯¹æ’ä»¶åŠå…¶æ‰€å±çš„ preset åšä¸€ä¸ªä¸»ç‰ˆæœ¬è¿­ä»£ï¼ˆè€Œä¸æ˜¯åªåšä¸€ä¸ªå¯èƒ½è®©äººå¤±æœ›çš„è¡¥ä¸ç‰ˆæœ¬ï¼‰ã€‚ç„¶åï¼Œæˆ‘ä»¬å°†éœ€è¦å¼ƒç”¨æ—§çš„ç‰ˆæœ¬ï¼Œå¹¶ä¸”å»ºç«‹ä¸€ä¸ªä¸ç®¡è§„èŒƒå˜æˆä»€ä¹ˆæ ·å­éƒ½å°†è‡ªåŠ¨æ›´æ–°ä½¿äººä»¬ä¿æŒæœ€æ–°çš„æ¡†æ¶ï¼ˆå¹¶ä½¿ä»–ä»¬ä¸è¢«ä»€ä¹ˆä¸œè¥¿å¡ä½ã€‚æˆ‘ä»¬æ²¡æœ‰åƒ decorators é‚£ä¹ˆå¹¸è¿ã€‚ï¼‰ã€‚

#### `.babelrc` ä¸­çš„ `env` é€‰é¡¹æ²¡æœ‰æ²¡å¼ƒç”¨

ä¸åƒ[æœ€åä¸€ä¸ªæäº¤](https://babeljs.io/blog/2017/09/12/planning-for-7.0#deprecate-the-env-option-in-babelrc)ï¼Œæˆ‘ä»¬åªæ˜¯ä¿®å¤äº†åˆå¹¶çš„è¡Œä¸ºæ¥ä½¿å…¶[æ›´å…¼å®¹](https://twitter.com/left_pad/status/936687774098444288)

`env` ä¸­çš„é…ç½®è¢«èµ‹äºˆäº†æ¯”æ ¹é…ç½®é¡¹æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚å¹¶ä¸”ç°åœ¨æ ¹æ®å®ƒä»¬çš„æ ‡è¯†æ¥åˆå¹¶ï¼Œè€Œä¸æ˜¯åªæ˜¯åŒæ—¶ä½¿ç”¨ plugins å’Œ presets è¿™ç§å¥‡æ€ªçš„å®ç°ï¼Œæ‰€ä»¥ç°åœ¨æˆ‘ä»¬å¯ä»¥è¿™æ ·åšï¼š

```
{  presets: [    ['env', { modules: false}],  ],  env: {    test: {      presets: [         'env'      ],    }  },}
```

æœ‰äº† `BABEL_ENV=test`ï¼Œå®ƒå°†ä½¿ç”¨æ²¡æœ‰é€‰é¡¹çš„ test ä¸­çš„é…ç½®æ¥æ›¿æ¢æ ¹ç¯å¢ƒé…ç½®ã€‚

#### æ”¯æŒ `[class A extends Array](https://twitter.com/left_pad/status/940723982638157829)` (æœ€æ—©çš„è­¦å‘Š)

Babel å°†è‡ªåŠ¨åŒ…å«åƒ `Array`ï¼Œ `Error` å’Œ `HTMLElement` çš„åŸç”Ÿ built-insï¼Œæ‰€ä»¥åšè¿™ä¸ªä¼šåœ¨ç¼–è¯‘ classes çš„æ—¶å€™ç”Ÿæ•ˆã€‚

#### é€Ÿåº¦

*   å¾ˆå¤šæ¥è‡ª v8 å›¢é˜Ÿ [bmeurer](https://twitter.com/bmeurer) çš„[ä¿®å¤](https://twitter.com/rauchg/status/924349334346276864)ï¼
*   é€šè¿‡ [web-tooling-benchmark](https://github.com/v8/web-tooling-benchmark) [https://twitter.com/left_pad/status/927554660508028929](https://twitter.com/left_pad/status/927554660508028929) æé€Ÿ 60%

#### preset-envï¼š`"useBuiltins"ï¼š"usage"`

`babel-preset-env` ä»‹ç»äº†ç¼–è¯‘è¯­æ³•åˆ°ä¸åŒçš„ç›®æ ‡çš„æƒ³æ³•ã€‚å®ƒåŒæ—¶ä»‹ç»äº†é€šè¿‡ `useBuiltIns` é€‰é¡¹ï¼Œåªä¸ºç›®æ ‡æ·»åŠ ä¸æ”¯æŒçš„ polyfills çš„èƒ½åŠ›ã€‚

æ‰€ä»¥æœ‰äº†è¿™ä¸ªé€‰é¡¹ï¼Œä¸€äº›äº‹æƒ…æ¯”å¦‚ï¼š

```
import "babel-polyfill";
```

èƒ½å¤Ÿå˜æˆ

```
import "core-js/modules/es7.string.pad-start";import "core-js/modules/es7.string.pad-end";// ...
```

å¦‚æœç›®æ ‡ç¯å¢ƒæ°å·§æ”¯æŒ `padStart` æˆ– `padEnd` ä¹‹å¤–çš„ polyfillsã€‚

ä½†æ˜¯ä¸ºäº†ä½¿å®ƒæ›´å¥½ï¼Œæˆ‘ä»¬åº”è¯¥ä»…ä»…å¼•å…¥ä»£ç åº“è‡ªèº«â€œä½¿ç”¨â€çš„ polyfillsã€‚å¦‚æœå®ƒåœ¨ä»£ç ä¸­æ²¡æœ‰ä½¿ç”¨ `padStart`ï¼Œä¸ºä»€ä¹ˆå¼•å…¥ï¼Ÿ

`"useBuiltins": "usage"` æ˜¯æˆ‘ä»¬è§£å†³é‚£ä¸ªæƒ³æ³•çš„ç¬¬ä¸€æ¬¡å°è¯•ã€‚å®ƒåœ¨æ¯ä¸ªæ–‡ä»¶çš„å¤´éƒ¨æ‰§è¡Œäº†ä¸€ä¸ªå¼•å…¥ï¼Œä½†æ˜¯åªæœ‰åœ¨æ‰¾åˆ°å®ƒåœ¨ä»£ç ä¸­è¢«ä½¿ç”¨çš„æ—¶å€™æ‰æ·»åŠ å¼•ç”¨ã€‚è¿™ä¸ªå®ç°æ„å‘³ç€æˆ‘ä»¬èƒ½å¤Ÿä¸ºåº”ç”¨å¼•å…¥æœ€å°é‡çš„ï¼Œå¿…é¡»çš„ polyfillsï¼ˆå¹¶ä¸”åªæœ‰åœ¨ç›®æ ‡ç¯å¢ƒä¸æ”¯æŒå®ƒçš„æ—¶å€™ï¼‰ã€‚

æ‰€ä»¥å¦‚æœä½ åœ¨ä»£ç ä¸­ä½¿ç”¨ `Promise`ï¼Œå®ƒå°†åœ¨æ–‡ä»¶çš„å¤´éƒ¨å¼•å…¥å®ƒï¼ˆå¦‚æœä½ çš„ç›®æ ‡ä¸æ”¯æŒå®ƒï¼‰ã€‚å¦‚æœå®ƒæ˜¯é‡å¤çš„ï¼ŒBundlers å°†ä¼šåˆ é™¤é‡å¤çš„éƒ¨åˆ†ï¼Œæ‰€ä»¥è¿™ä¸ªå®ç°ä¸ä¼šé€ æˆ polyfills çš„å¤šé‡å¼•ç”¨ã€‚

```
import "core-js/modules/es6.promise";var a = new Promise();
```

```
import "core-js/modules/es7.array.includes";[].includesa.includes
```

é€šè¿‡ç±»å‹æ¨æ–­æˆ‘ä»¬èƒ½çŸ¥é“ä¸€ä¸ªåƒ `.includes` çš„å®ä¾‹æ˜¯å¦æ˜¯ä¸€ä¸ª arrayã€‚åœ¨é€»è¾‘å˜å¾—æ›´å¥½ä¹‹å‰ï¼Œå¾—åˆ°ä¸€ä¸ª false positive æ˜¯å¯ä»¥çš„ï¼Œå› ä¸ºå®ƒä»æ—§æ˜¯ä¼˜äºä¹‹å‰å¼•å…¥æ•´ä¸ª polyfill çš„ã€‚

#### å…¶ä»–æ›´æ–°

*   `[babel-template](https://github.com/babel/babel/blob/master/packages/babel-template)` æ›´å¿«å¹¶ä¸”ç”¨èµ·æ¥æ›´ç®€å•
*   [regenerator](https://github.com/facebook/regenerator) åœ¨ [MIT è¯ä¹¦](https://twitter.com/left_pad/status/938825429955125248)ä¸‹å‘å¸ƒ - å®ƒæ˜¯ç”¨æ¥ç¼–è¯‘ generators/async çš„ä¾èµ–
*   é€šè¿‡ [#6952](https://github.com/babel/babel/pull/6952) çš„ `modules-commonjs` plugin çš„ â€œlazyâ€ é€‰é¡¹
*   ä½ ç°åœ¨èƒ½åœ¨ .babelrc ä¸­ä½¿ç”¨ `envName: "something"` æˆ–è€… åœ¨å‘½ä»¤è¡Œè¾“å…¥ `babel --envName=something` æ¥å–ä»£å¿…é¡»ä½¿ç”¨`process.env.BABEL_ENV` æˆ– `process.env.NODE_ENV`
*   `["transform-for-of", { "assumeArray": true }]` æ¥ä½¿æ‰€æœ‰çš„ for-of å¾ªç¯æŒ‰ç…§è§„åˆ™æ•°ç»„è¾“å‡º
*   ä¸ºäº† preset-env [#6831](https://github.com/babel/babel/pull/6831)ï¼Œåœ¨æ¾æ•£æ¨¡å¼ä¸­æ’é™¤ `transform-typeof-symbol`
*   [å®ç° PR æ¥è·å¾—æ›´å¥½çš„è¯­æ³•é”™è¯¯æ¶ˆæ¯](https://twitter.com/left_pad/status/942859244759666691)

#### å‘å¸ƒä¹‹å‰éœ€è¦åšçš„

*   [Handle](https://github.com/babel/babel/issues/6766) `[.babelrc](https://github.com/babel/babel/issues/6766)` [lookup](https://github.com/babel/babel/issues/6766)ï¼ˆæƒ³åœ¨ç¬¬ä¸€æ¬¡ RC å‘å¸ƒä¹‹å‰å®Œæˆï¼‰
*   [â€œoverridesâ€ support](https://github.com/babel/babel/pull/7091)ï¼šåŸºäºå…¨å±€æ¨¡å¼çš„å·®å¼‚é…ç½®
*   babel-core ä¸­çš„ç¼“å­˜å’Œæ— æ•ˆé€»è¾‘
*   å›´ç»•å¤–éƒ¨ helpers çš„æ›´å¥½çš„ storyã€‚
*   å¯¹äºè¿­ä»£å’Œå¤„ç† independently å¯¹äº helpers çš„ç‹¬ç«‹æ€§ï¼Œå®ç°å®ƒæˆ–è€…æ˜¯æœ‰ä¸€ä¸ªæˆç†Ÿçš„è®¡åˆ’ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸æ˜¯æ˜ç¡®çš„ä¸ core-js 2 æˆ– 3 ç»‘å®šã€‚äººä»¬å¯èƒ½æœ‰ä¸œè¥¿ä¾èµ–äºä¸€ä¸ªæˆ–è€…å…¶ä»–ï¼Œå¹¶ä¸”ä¸æƒ³åŒæ—¶åŠ è½½ä¸¤è€…å¤ªå¤šã€‚
*   ä¸ç®¡æ˜¯ä¸€ä¸ª[working decorator çš„å®ç°](https://github.com/babel/babel/pull/6107)ï¼Œæˆ–è€…æ˜¯ functional legacy çš„å®ç°ï¼Œåœ¨ 7.xâ€™s çš„æœ‰æ•ˆæœŸå†…ï¼Œæœ‰ä¸€ä¸ªæ˜ç¡®çš„è·¯å¾„å®ç°å½“å‰æ ‡å‡†çš„è¡Œä¸ºã€‚

#### æ„Ÿè°¢

å‘æˆ‘ä»¬çš„å¿—æ„¿è€…å›¢é˜Ÿè‡´æ„ï¼š

[Logan](https://twitter.com/loganfsmyth) å·²ç»å¾ˆåŠªåŠ›çš„æ¨è¿›ä¿®å¤å¾ˆå¤šæˆ‘ä»¬å…³äºé…ç½®åŠæ›´å¤šçš„æ ¸å¿ƒé—®é¢˜ã€‚ä»–å°±æ˜¯é‚£ä¸ªåšäº†æ‰€æœ‰å›°éš¾å·¥ä½œçš„äººã€‚

[Brian](https://twitter.com/existentialism) å·²ç»æ¥ç®¡å¾ˆå¤š preset-env çš„ç»´æŠ¤å·¥ä½œï¼Œæ— è®ºä»¥å‰æˆ‘åšè¿‡ä»€ä¹ˆ ğŸ˜›

[Daniel](https://twitter.com/TschinderDaniel) ä¸€ç›´åœ¨æˆ‘ä»¬éœ€è¦çš„å¸®åŠ©çš„æ—¶å€™ä»‹å…¥ï¼Œä¸ç®¡æ˜¯ç»´æŠ¤ babel-loader æˆ–æ˜¯å¸®åŠ©è¿ç§» babylon/babel-preset-env åº“ã€‚åŒæ ·çš„ï¼Œ[Nicolo](https://twitter.com/NicoloRibaudo)ï¼Œ[Sven](https://twitter.com/svensauleau)ï¼Œ[Artem](https://twitter.com/yavorsky_) å’Œ [Diogo](https://twitter.com/kovnsk)ï¼Œåœ¨ä¸Šä¸€å¹´å¸®åŠ©åšäº†æ›´å¤šã€‚

æˆ‘çœŸçš„å¾ˆæœŸå¾…ä¸€ä¸ªå‘å¸ƒï¼ˆæˆ‘ä¹Ÿç´¯äº† - å·²ç»å¿«ä¸€å¹´äº† ğŸ˜ï¼‰ã€‚ä½†æ˜¯æˆ‘ä¹Ÿä¸æƒ³å‚¬ä¿ƒä»»ä½•ä¸œè¥¿ï¼Œå› ä¸ºåœ¨è¿™ä¸ªç‰ˆæœ¬ä¸­å·²ç»æœ‰å¾ˆå¤šçš„èµ·ä¼äº†ã€‚æˆ‘ç¡®å®å­¦åˆ°äº†å¾ˆå¤šä¸œè¥¿ï¼Œæˆ‘ç›¸ä¿¡å›¢é˜Ÿçš„å…¶ä»–æˆå‘˜ä¹Ÿæ˜¯å¦‚æ­¤ã€‚

å¦‚æœæˆ‘ä»Šå¹´å­¦åˆ°äº†ä»€ä¹ˆï¼Œæˆ‘åº”è¯¥çœŸæ­£çš„å¬ä»è¿™ä¸ªå»ºè®®è€Œä¸åªæ˜¯å†™ä¸‹æ¥ã€‚

![](https://i.loli.net/2018/05/10/5af3a67ab1365.png)

> åŒæ ·æ„Ÿè°¢ [Mariko](https://twitter.com/kosamari) çš„[è½»æ¨](https://twitter.com/kosamari/status/944272286055530496)ï¼Œå®é™…å®Œæˆäº†è¿™ä¸ªå‘å¸ƒï¼ˆä¸¤ä¸ªæœˆçš„åˆ¶ä½œï¼‰ã€‚


---

> [æ˜é‡‘ç¿»è¯‘è®¡åˆ’](https://github.com/xitu/gold-miner) æ˜¯ä¸€ä¸ªç¿»è¯‘ä¼˜è´¨äº’è”ç½‘æŠ€æœ¯æ–‡ç« çš„ç¤¾åŒºï¼Œæ–‡ç« æ¥æºä¸º [æ˜é‡‘](https://juejin.im) ä¸Šçš„è‹±æ–‡åˆ†äº«æ–‡ç« ã€‚å†…å®¹è¦†ç›– [Android](https://github.com/xitu/gold-miner#android)ã€[iOS](https://github.com/xitu/gold-miner#ios)ã€[å‰ç«¯](https://github.com/xitu/gold-miner#å‰ç«¯)ã€[åç«¯](https://github.com/xitu/gold-miner#åç«¯)ã€[åŒºå—é“¾](https://github.com/xitu/gold-miner#åŒºå—é“¾)ã€[äº§å“](https://github.com/xitu/gold-miner#äº§å“)ã€[è®¾è®¡](https://github.com/xitu/gold-miner#è®¾è®¡)ã€[äººå·¥æ™ºèƒ½](https://github.com/xitu/gold-miner#äººå·¥æ™ºèƒ½)ç­‰é¢†åŸŸï¼Œæƒ³è¦æŸ¥çœ‹æ›´å¤šä¼˜è´¨è¯‘æ–‡è¯·æŒç»­å…³æ³¨ [æ˜é‡‘ç¿»è¯‘è®¡åˆ’](https://github.com/xitu/gold-miner)ã€[å®˜æ–¹å¾®åš](http://weibo.com/juejinfanyi)ã€[çŸ¥ä¹ä¸“æ ](https://zhuanlan.zhihu.com/juejinfanyi)ã€‚
