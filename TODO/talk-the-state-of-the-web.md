
> * åŸæ–‡åœ°å€ï¼š[The State of the Web](https://medium.com/@fox/talk-the-state-of-the-web-3e12f8e413b3)
> * åŸæ–‡ä½œè€…ï¼š[Karolina Szczur](https://medium.com/@fox?source=post_header_lockup)
> * è¯‘æ–‡å‡ºè‡ªï¼š[æ˜é‡‘ç¿»è¯‘è®¡åˆ’](https://github.com/xitu/gold-miner)
> * æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š[https://github.com/xitu/gold-miner/blob/master/TODO/talk-the-state-of-the-web.md](https://github.com/xitu/gold-miner/blob/master/TODO/talk-the-state-of-the-web.md)
> * è¯‘è€…ï¼š[undead25](https://github.com/undead25)
> * æ ¡å¯¹è€…ï¼š[sun](https://github.com/sunui)ã€[IridescentMia](https://github.com/IridescentMia)

# ç½‘ç»œç°çŠ¶ï¼šæ€§èƒ½æå‡æŒ‡å—

äº’è”ç½‘æ­£åœ¨çˆ†å‘å¼åœ°å¢é•¿ï¼Œæˆ‘ä»¬åˆ›å»ºçš„ Web å¹³å°ä¹Ÿæ˜¯å¦‚æ­¤ã€‚**æˆ‘ä»¬é€šå¸¸éƒ½æ²¡æœ‰è€ƒè™‘åˆ°ç”¨æˆ·ç½‘ç»œçš„è¿é€šæ€§å’Œä½¿ç”¨æƒ…æ™¯**ã€‚å³ä½¿æ˜¯ä¸‡ç»´ç½‘ç°çŠ¶çš„ä¸€ç¥ï¼Œä¹Ÿå¯ä»¥çœ‹å‡ºæˆ‘ä»¬è¿˜æ²¡æœ‰å»ºç«‹èµ·åŒç†å¿ƒå’Œå¯¹å½¢åŠ¿å˜åŒ–çš„è®¤çŸ¥ï¼Œæ›´ä¸ç”¨è¯´å¯¹æ€§èƒ½çš„è€ƒè™‘äº†ã€‚

é‚£ä¹ˆï¼Œç°ä»Šçš„ç½‘ç»œçŠ¶å†µæ˜¯æ€æ ·çš„å‘¢ï¼Ÿ

**åœ°çƒä¸Š 74 äº¿äººå£ä¸­ï¼Œåªæœ‰ 46% çš„äººèƒ½å¤Ÿä¸Šç½‘**ï¼Œå¹³å‡ç½‘ç»œé€Ÿåº¦ä¸º 7Mb/sã€‚æ›´é‡è¦çš„æ˜¯ï¼Œ93% çš„äº’è”ç½‘ç”¨æˆ·éƒ½æ˜¯é€šè¿‡ç§»åŠ¨è®¾å¤‡ä¸Šç½‘çš„ â€”â€” ä¸å»è¿åˆæ‰‹æŒè®¾å¤‡æ˜¯ä¸å¯åŸè°…çš„ã€‚æ•°æ®å¾€å¾€æ¯”æˆ‘ä»¬æƒ³è±¡ä¸­è¦æ˜‚è´µå¾—å¤š â€”â€” è´­ä¹° 500MB æ•°æ®çš„ä»·æ ¼åœ¨å¾·å›½è¦ä¸ºæ­¤å·¥ä½œ 1 ä¸ªå°æ—¶ï¼Œè€Œåœ¨å·´è¥¿éœ€è¦ 13 ä¸ªå°æ—¶ï¼ˆæ›´å¤šæœ‰è¶£çš„ç»Ÿè®¡å¯ä»¥çœ‹çœ‹ [Ben Schwarz](https://twitter.com/benschwarz) çš„[ã€Šæ³¡æ²«ç ´ç­ï¼šçœŸå®çš„æ€§èƒ½ã€‹](https://building.calibreapp.com/beyond-the-bubble-real-world-performance-9c991dcd5342)ï¼‰ã€‚

**æˆ‘ä»¬çš„ç½‘ç«™è¡¨ç°å¾—ä¹Ÿä¸å°½å¦‚äººæ„** â€”â€” å¹³å‡ä½“ç§¯å¤§æ¦‚[æ˜¯ç¬¬ä¸€ç‰ˆ Doom æ¸¸æˆçš„å¤§å°](https://www.wired.com/2016/04/average-webpage-now-size-original-doom/)ï¼ˆ3MB å·¦å³ï¼‰ï¼ˆè¯·æ³¨æ„ï¼Œä¸ºäº†ç»Ÿè®¡å‡†ç¡®åº¦ï¼Œéœ€è¦ä½¿ç”¨[ä¸­ä½æ•°](https://zh.wikipedia.org/wiki/%E4%B8%AD%E4%BD%8D%E6%95%B8)ï¼Œæ¨èé˜…è¯» [Ilya Grigorik](https://twitter.com/igrigorik) çš„ [ã€Šâ€œå¹³å‡é¡µé¢â€æ˜¯ä¸€ä¸ªç¥è¯ã€‹](https://www.igvita.com/2016/01/12/the-average-page-is-a-myth/)ã€‚ä¸­ä½æ•°ç»Ÿè®¡å‡ºçš„ç½‘ç«™ä½“ç§¯ç›®å‰ä¸º 1.4MBï¼‰ã€‚å›¾ç‰‡å¯ä»¥è½»æ¾å ç”¨ 1.7MBï¼Œè€Œ JavaScript å¹³å‡ä¸º 400KBã€‚ä¸ä»…ä»…åªæœ‰ Web å¹³å°ï¼Œæœ¬åœ°åº”ç”¨ç¨‹åºä¹Ÿæœ‰åŒæ ·çš„é—®é¢˜ï¼Œä½ æ˜¯å¦é‡åˆ°è¿‡ä¸ºäº†ä¿®å¤æŸäº› bugï¼Œä¸å¾—ä¸ä¸‹è½½ 200MB çš„åº”ç”¨å‘¢ï¼Ÿ

**æŠ€æœ¯äººå‘˜ç»å¸¸ä¼šå‘ç°è‡ªå·±å¤„äºç‰¹æƒåœ°ä½**ã€‚æ‹¥æœ‰æ–°å‹é«˜ç«¯çš„ç¬”è®°æœ¬ã€æ‰‹æœºå’Œå¿«é€Ÿçš„ç½‘ç»œè¿æ¥ã€‚æˆ‘ä»¬å¾ˆå®¹æ˜“å¿˜è®°ï¼Œå…¶å®å¹¶ä¸æ˜¯æ¯ä¸ªäººéƒ½æœ‰è¿™æ ·çš„æ¡ä»¶ï¼ˆå®é™…ä¸Šåªæœ‰å°‘éƒ¨åˆ†äººè€Œå·²ï¼‰ã€‚

> å¦‚æœæˆ‘ä»¬åªç«™åœ¨è‡ªå·±è€Œä¸æ˜¯ç”¨æˆ·çš„è§’åº¦æ¥æ„å»º web å¹³å°ï¼Œé‚£è¿™å°†å¯¼è‡´ç³Ÿç³•çš„ç”¨æˆ·ä½“éªŒã€‚

æˆ‘ä»¬å¦‚ä½•é€šè¿‡åœ¨è®¾è®¡å’Œå¼€å‘ä¸­è€ƒè™‘æ€§èƒ½æ¥åšå¾—æ›´å¥½å‘¢ï¼Ÿ

## èµ„æºä¼˜åŒ–

æœ€èƒ½æ˜æ˜¾æå‡æ€§èƒ½ä½†æœªè¢«å……åˆ†åˆ©ç”¨çš„æ–¹å¼æ˜¯ï¼Œä»äº†è§£æµè§ˆå™¨å¦‚ä½•åˆ†æå’Œå¤„ç†èµ„æºå¼€å§‹ã€‚äº‹å®è¯æ˜ï¼Œå½“æµè§ˆå™¨è§£æå’Œç«‹å³ç¡®å®šèµ„æºçš„ä¼˜å…ˆçº§æ—¶ï¼Œåœ¨èµ„æºå‘ç°æ–¹é¢è¡¨ç°å¾—éå¸¸ä¸é”™ã€‚ä¸‹é¢æ˜¯å…³äº**å…³é”®è¯·æ±‚**çš„è§£é‡Šã€‚

> å¦‚æœè¯·æ±‚åŒ…å«ç”¨æˆ·è§†å£æ¸²æŸ“æ‰€éœ€çš„èµ„æºï¼Œé‚£è¯¥è¯·æ±‚å°±æ˜¯å…³é”®è¯·æ±‚ã€‚

å¯¹äºå¤§å¤šæ•°ç½‘ç«™ï¼Œå…³é”®è¯·æ±‚å¯ä»¥æ˜¯ HTMLã€å¿…è¦çš„ CSSã€LOGOã€ç½‘ç»œå­—ä½“ï¼Œä¹Ÿå¯èƒ½æ˜¯å›¾ç‰‡ã€‚äº‹å®è¯æ˜ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå½“èµ„æºè¢«è¯·æ±‚æ—¶ï¼Œè®¸å¤šå…¶ä»–ä¸ç›¸å…³çš„ï¼ˆJavaScriptã€è¿½è¸ªä»£ç ã€å¹¿å‘Šç­‰ï¼‰ä¹Ÿè¢«è¯·æ±‚äº†ã€‚ä¸è¿‡æˆ‘ä»¬èƒ½å¤Ÿé€šè¿‡ä»”ç»†æŒ‘é€‰é‡è¦èµ„æºï¼Œå¹¶è°ƒæ•´å®ƒä»¬çš„ä¼˜å…ˆçº§æ¥é¿å…è¿™ç§æƒ…å†µå‘ç”Ÿã€‚

é€šè¿‡ `<link rel ='preload'>`ï¼Œæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨å¼ºåˆ¶è®¾ç½®èµ„æºçš„ä¼˜å…ˆçº§ï¼Œæ¥ç¡®ä¿æ‰€æœŸæœ›çš„å†…å®¹æŒ‰æ—¶æ¸²æŸ“ã€‚è¿™ç§æŠ€æœ¯å¯ä»¥æ˜æ˜¾æ”¹å–„â€œäº¤äº’æ—¶é—´â€æŒ‡æ ‡ï¼Œä»è€Œä½¿æœ€ä½³ç”¨æˆ·ä½“éªŒæˆä¸ºå¯èƒ½ã€‚

![](https://cdn-images-1.medium.com/max/800/1*JT-53LslhwOOqTgv1dGoXg.png)

ç”±äºç›¸å…³èµ„æ–™çš„ç¼ºä¹ï¼Œå…³é”®è¯·æ±‚å¯¹è®¸å¤šäººæ¥è¯´ä¼¼ä¹ä»ç„¶æ˜¯ä¸€ä¸ªé»‘ç›’å­ã€‚å¹¸è¿çš„æ˜¯ï¼Œ[Ben Schwarz](https://twitter.com/benschwarz/) å‘è¡¨äº†ä¸€ç¯‡éå¸¸å…¨é¢ä¸”é€šä¿—æ˜“æ‡‚çš„æ–‡ç«  â€”â€” [ã€Šå…³é”®è¯·æ±‚ã€‹](https://css-tricks.com/the-critical-request/)ã€‚å¦å¤–ï¼Œä½ ä¹Ÿå¯ä»¥æŸ¥çœ‹ Addy å…³äºé¢„åŠ è½½çš„æ–‡ç«  â€”â€” [ã€ŠChrome ä¸­çš„é¢„åŠ è½½å’Œä¼˜å…ˆçº§ã€‹](https://medium.com/reloading/preload-prefetch-and-priorities-in-chrome-776165961bbf)ã€‚

![åœ¨ Chrome å¼€å‘è€…å·¥å…·ä¸­å¯ç”¨ä¼˜å…ˆçº§](https://cdn-images-1.medium.com/max/800/1*ju18GQzgF-TQDMrYdtPelg.gif)

ğŸ›  è¦è¿½è¸ªä¼˜å…ˆå¤„ç†è¯·æ±‚çš„æ•ˆæœï¼Œä½ å¯ä»¥ä½¿ç”¨ Lighthouse æ€§èƒ½æ£€æµ‹å·¥å…·å’Œ[å…³é”®è¯·æ±‚é“¾è·¯è¯„æµ‹](https://developers.google.com/web/tools/lighthouse/audits/critical-request-chains)ï¼Œæˆ–è€…æŸ¥çœ‹ Chrome å¼€å‘è€…å·¥å…·ç½‘ç»œæ ‡ç­¾ä¸‹çš„è¯·æ±‚ä¼˜å…ˆçº§ã€‚

**ğŸ“ é€šç”¨æ€§èƒ½æ¸…å•**

1. ä¸»åŠ¨ç¼“å­˜
2. å¯ç”¨å‹ç¼©
3. ä¼˜å…ˆå…³é”®èµ„æº
4. ä½¿ç”¨ CDN

## å›¾ç‰‡ä¼˜åŒ–

é¡µé¢ä¼ è¾“çš„å¤§éƒ¨åˆ†æ•°æ®é€šå¸¸éƒ½æ˜¯å›¾ç‰‡ï¼Œå› æ­¤ä¼˜åŒ–å›¾ç‰‡å¯ä»¥å¸¦æ¥å¾ˆå¤§çš„æ€§èƒ½æå‡ã€‚æœ‰è®¸å¤šç°æœ‰çš„ç­–ç•¥å’Œå·¥å…·å¯ä»¥å¸®åŠ©æˆ‘ä»¬åˆ é™¤å¤šä½™çš„å­—èŠ‚ï¼Œä½†é¦–å…ˆè¦é—®çš„æ˜¯ï¼šâ€œå›¾ç‰‡å¯¹äºä¼ è¾¾åç»­çš„ä¿¡æ¯å’Œæ•ˆæœè‡³å…³é‡è¦å—ï¼Ÿâ€ã€‚å¦‚æœå¯ä»¥ç§»é™¤ï¼Œä¸ä»…å¯ä»¥èŠ‚çœå¸¦å®½ï¼Œè¿˜å¯ä»¥å‡å°‘è¯·æ±‚ã€‚

åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸åŒçš„æŠ€æœ¯æ¥å®ç°åŒæ ·çš„æ•ˆæœã€‚CSS æœ‰å¾ˆå¤šå…·æœ‰è‰ºæœ¯æ€§çš„å±æ€§ï¼Œä¾‹å¦‚é˜´å½±ã€æ¸å˜ã€åŠ¨ç”»å’Œå½¢çŠ¶ï¼Œè¿™å°±å…è®¸æˆ‘ä»¬ç”¨å…·æœ‰åˆé€‚æ ·å¼çš„ DOM å…ƒç´ æ¥æ›¿ä»£å›¾ç‰‡ã€‚

### é€‰æ‹©æ­£ç¡®çš„æ ¼å¼

å¦‚æœå¿…é¡»ä½¿ç”¨å›¾ç‰‡ï¼Œé‚£ç¡®å®šå“ªç§æ ¼å¼æ¯”è¾ƒåˆé€‚æ˜¯å¾ˆé‡è¦çš„ã€‚ä¸€èˆ¬éƒ½åœ¨çŸ¢é‡å›¾å’Œæ …æ ¼å›¾ä¹‹é—´è¿›è¡Œé€‰æ‹©ï¼š

- **çŸ¢é‡å›¾å½¢**ï¼šä¸åˆ†è¾¨ç‡æ— å…³ï¼Œæ–‡ä»¶é€šå¸¸æ¯”è¾ƒå°ã€‚ç‰¹åˆ«é€‚ç”¨äº LOGOã€å›¾æ ‡å’Œç”±ç®€å•å›¾å½¢ï¼ˆç‚¹ã€çº¿ã€åœ†å’Œå¤šè¾¹å½¢ï¼‰ç»„æˆçš„å›¾ç‰‡ã€‚
- **æ …æ ¼å›¾åƒ**ï¼šè¡¨ç°å†…å®¹æ›´ä¸°å¯Œã€‚é€‚ç”¨äºç…§ç‰‡ã€‚

åšå‡ºä¸Šé¢çš„å†³å®šåï¼Œæœ‰è¿™æ ·çš„å‡ ç§æ ¼å¼ä¾›æˆ‘ä»¬é€‰æ‹©ï¼šJPEGã€GIFã€PNG-8ã€PNG-24 æˆ–è€…æœ€æ–°çš„æ ¼å¼ï¼Œä¾‹å¦‚ WEBP æˆ– JPEG-XRã€‚æ—¢ç„¶æœ‰è¿™ä¹ˆå¤šçš„é€‰æ‹©ï¼Œé‚£å¦‚ä½•ç¡®ä¿æˆ‘ä»¬é€‰æ‹©çš„æ­£ç¡®æ€§å‘¢ï¼Ÿä»¥ä¸‹æ˜¯æ‰¾åˆ°æœ€ä½³æ ¼å¼çš„åŸºæœ¬æ–¹æ³•ï¼š

- **JPEG**ï¼šè‰²å½©ä¸°å¯Œçš„å›¾ç‰‡ï¼ˆä¾‹å¦‚ç…§ç‰‡ï¼‰
- **PNGâ€“8**ï¼šè‰²å½©ä¸æ˜¯å¾ˆä¸°å¯Œçš„å›¾ç‰‡
- **PNGâ€“24**ï¼šå…·æœ‰éƒ¨åˆ†é€æ˜åº¦çš„å›¾ç‰‡
- **GIF**ï¼šåŠ¨ç”»å›¾ç‰‡

Photoshop åœ¨å›¾ç‰‡å¯¼å‡ºæ—¶ï¼Œå¯ä»¥é€šè¿‡ä¸€äº›è®¾ç½®æ¥å¯¹ä¸Šè¿°æ ¼å¼çš„å›¾ç‰‡è¿›è¡Œä¼˜åŒ–ï¼Œä¾‹å¦‚é™ä½è´¨é‡ã€å‡å°‘å™ªç‚¹æˆ–è€…é¢œè‰²çš„æ•°é‡ã€‚ç¡®ä¿è®¾è®¡å¸ˆæœ‰æ€§èƒ½å®è·µçš„æ„è¯†ï¼Œå¹¶é€šè¿‡æ­£ç¡®çš„ä¼˜åŒ–é¢„è®¾æ¥å‡†å¤‡åˆé€‚çš„å›¾ç‰‡ã€‚å¦‚æœä½ æƒ³äº†è§£æ›´å¤šå…³äºå¦‚ä½•å¼€å‘å›¾ç‰‡çš„ä¿¡æ¯ï¼Œå¯ä»¥é˜…è¯» [Lara Hogan](https://twitter.com/lara_hogan) çš„ [ã€Šé€Ÿåº¦ä¸æ¿€æƒ…ï¼šä»¥ç½‘ç«™æ€§èƒ½æå‡ç”¨æˆ·ä½“éªŒã€‹](http://designingforperformance.com/optimizing-images/#choosing-an-image-format)ã€‚

### å°è¯•æ–°æ ¼å¼

æœ‰è¿™æ ·å‡ ç§ç”±æµè§ˆå™¨å‚å•†å¼€å‘çš„æ–°å›¾ç‰‡æ ¼å¼ï¼šGoogle çš„ WebPï¼ŒApple çš„ JPEG 2000 å’Œ Microsoft çš„ JPEG-XRã€‚

**WebP** æ˜¯æœ€å…·æœ‰ç«äº‰åŠ›çš„ï¼Œæ”¯æŒæ— æŸå’Œæœ‰æŸå‹ç¼©ä½¿å¾—å®ƒè¢«å¹¿æ³›åº”ç”¨ã€‚**æ— æŸ WebP æ¯” PNG å° 26%ï¼Œæ¯” JPG å° 25-34%**ã€‚74% çš„æµè§ˆå™¨æ”¯æŒç‡åŠé™çº§æ–¹æ¡ˆä½¿å®ƒå¯ä»¥å®‰å…¨åœ°è¢«ä½¿ç”¨ï¼Œæœ€å¤šå¯èŠ‚çœ 1/3 çš„ä¼ è¾“å­—èŠ‚ã€‚JPG å’Œ PNG å¯ä»¥é€šè¿‡ Photoshop å’Œå…¶ä»–å›¾åƒå¤„ç†ç¨‹åºï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œï¼ˆ`brew install webp`ï¼‰å°†å…¶è½¬æ¢ä¸º WebPã€‚

å¦‚æœä½ æƒ³æ¢ç´¢è¿™äº›æ ¼å¼ä¹‹é—´çš„è§†è§‰å·®å¼‚ï¼Œæˆ‘æ¨è[è¿™ä¸ªåœ¨ Github ä¸Šä¸é”™çš„ç¤ºä¾‹](https://xooyoozoo.github.io/yolo-octo-bugfixes)ã€‚

### ä½¿ç”¨å·¥å…·å’Œç®—æ³•è¿›è¡Œä¼˜åŒ–

**å³ä¾¿ä½¿ç”¨äº†é«˜æ•ˆçš„å›¾ç‰‡æ ¼å¼ä¹Ÿéœ€è¦åç»­çš„å¤„ç†å’Œä¼˜åŒ–**ã€‚è¿™ä¸€æ­¥å¾ˆé‡è¦ã€‚

å¦‚æœä½ é€‰æ‹©äº†ä½“ç§¯ç›¸å¯¹è¾ƒå°çš„ SVGï¼Œå®ƒä»¬ä¹Ÿéœ€è¦è¢«å‹ç¼©ã€‚[SVGO](https://github.com/svg/svgo) æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œå¯ä»¥é€šè¿‡å‰¥ç¦»ä¸å¿…è¦çš„å…ƒæ•°æ®æ¥å¿«é€Ÿä¼˜åŒ– SVGã€‚å¦å¤–ï¼Œå¦‚æœä½ å–œæ¬¢ Web ç•Œé¢æˆ–è€…ç”±äºæ“ä½œç³»ç»Ÿçš„é™åˆ¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ [Jake Archibald](https://twitter.com/jaffathecake) çš„ [SVGOMG](https://jakearchibald.github.io/svgomg/)ã€‚ç”±äº SVG æ˜¯åŸºäº XML çš„æ ¼å¼ï¼Œæ‰€ä»¥å®ƒä¹Ÿå¯ä»¥è¢«æœåŠ¡ç«¯ GZIP å‹ç¼©ã€‚

[ImageOptim](https://imageoptim.com/mac) æ˜¯å¤§å¤šæ•°å…¶ä»–å›¾ç‰‡æ ¼å¼çš„ç»ä½³é€‰æ‹©ï¼Œå®ƒå°† pngcrushã€pngquantã€MozJPEGã€Google Zopfli ç­‰ä¸€äº›ä¸é”™çš„å·¥å…·æ‰“åŒ…è¿›äº†ä¸€ä¸ªç»¼åˆçš„å¼€æºåŒ…é‡Œé¢ã€‚ä½œä¸ºä¸€ä¸ª Mac OS åº”ç”¨ç¨‹åºã€å‘½ä»¤è¡Œç•Œé¢å’Œ Sketch æ’ä»¶ï¼ŒImageOptim å¯ä»¥è½»æ¾åœ°ç”¨äºç°æœ‰çš„å·¥ä½œæµä¸­ã€‚å¤§å¤šæ•° ImageOptim ä¾èµ– CLI éƒ½å¯ä»¥åœ¨ Linux æˆ–è€… Windows å¹³å°ä¸Šä½¿ç”¨ã€‚

å¦‚æœä½ å€¾å‘äºå°è¯•æ–°å…´çš„ç¼–ç å™¨ï¼Œä»Šå¹´æ—©äº›æ—¶å€™ï¼ŒGoogle å‘å¸ƒäº† [Guetzli](https://research.googleblog.com/2017/03/announcing-guetzli-new-open-source-jpeg.html) â€”â€” ä¸€ä¸ªæºäºä»–ä»¬å¯¹ WebP å’Œ Zopfli ç ”ç©¶çš„å¼€æºç®—æ³•ã€‚**Guetzli å¯ä»¥ç”Ÿæˆæ¯”ä»»ä½•å…¶ä»–å¯ç”¨çš„å‹ç¼©æ–¹æ³•å°‘ 35% ä½“ç§¯çš„ JPEG**ã€‚å”¯ä¸€çš„ç¼ºç‚¹æ˜¯ï¼šå¤„ç†æ—¶é—´æ…¢ï¼ˆæ¯ç™¾ä¸‡åƒç´ çš„ CPU æ—¶é—´ä¸ºä¸€åˆ†é’Ÿï¼‰ã€‚

é€‰æ‹©å·¥å…·æ—¶ï¼Œè¯·ç¡®ä¿å®ƒä»¬èƒ½è¾¾åˆ°é¢„æœŸå¹¶é€‚åˆå›¢é˜Ÿçš„å·¥ä½œæµã€‚æœ€å¥½èƒ½è‡ªåŠ¨åŒ–ä¼˜åŒ–ï¼Œè¿™æ ·æ‰€æœ‰å›¾ç‰‡éƒ½æ˜¯ä¼˜åŒ–è¿‡äº†çš„ã€‚

### å“åº”å¼å›¾ç‰‡

åå¹´å‰ï¼Œä¹Ÿè®¸ä¸€ç§åˆ†è¾¨ç‡å°±èƒ½æ»¡è¶³æ‰€æœ‰çš„åœºæ™¯ï¼Œä½†éšç€æ—¶ä»£çš„å˜åŒ–ï¼Œå“åº”å¼ç½‘ç«™ç°ä»Šå·²æˆªç„¶ä¸åŒã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬å¿…é¡»ç‰¹åˆ«å°å¿ƒåœ°å®æ–½æˆ‘ä»¬ç²¾å¿ƒä¼˜åŒ–çš„è§†è§‰èµ„æºï¼Œå¹¶ç¡®ä¿å®ƒä»¬é€‚åº”å„ç§è§†å£å’Œè®¾å¤‡ã€‚å¹¸è¿çš„æ˜¯ï¼Œæ„Ÿè°¢[å“åº”å¼å›¾åƒç¤¾åŒºç»„ç»‡](https://responsiveimages.org/)ï¼Œé€šè¿‡ `picture` å…ƒç´ å’Œ `srcset` å±æ€§ï¼ˆéƒ½æœ‰ 85%+ çš„æµè§ˆå™¨æ”¯æŒç‡ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥å®Œç¾åœ°åšåˆ°ã€‚

### srcset å±æ€§

`srcset` åœ¨åˆ†è¾¨ç‡åˆ‡æ¢åœºæ™¯ä¸­è¡¨ç°å¾—éå¸¸ä¸é”™ â€”â€” å½“æˆ‘ä»¬æƒ³æ ¹æ®ç”¨æˆ·çš„å±å¹•å¯†åº¦å’Œå¤§å°æ˜¾ç¤ºå›¾ç‰‡æ—¶ã€‚æ ¹æ® `srcset` å’Œ `sizes` å±æ€§ä¸­ä¸€äº›é¢„å®šä¹‰çš„è§„åˆ™ï¼Œæµè§ˆå™¨å°†ä¼šæ ¹æ®è§†å£é€‰æ‹©æœ€ä½³çš„å›¾ç‰‡è¿›è¡Œå±•ç¤ºã€‚è¿™ç§æŠ€æœ¯å¯ä»¥èŠ‚çœå¸¦å®½å’Œå‡å°‘è¯·æ±‚ï¼Œç‰¹åˆ«æ˜¯å¯¹äºç§»åŠ¨ç«¯ç”¨æˆ·ã€‚

![srcset å±æ€§ä½¿ç”¨ç¤ºä¾‹](https://cdn-images-1.medium.com/max/800/1*87BIfYsjZTh-bikjmp7eow.png)

### picture å…ƒç´ 

`picture` å…ƒç´ å’Œ `media` å±æ€§æ—¨åœ¨æ›´å®¹æ˜“åœ°é€šå¾€è‰ºæœ¯æ®¿å ‚ã€‚é€šè¿‡ä¸ºä¸åŒçš„æ¡ä»¶æä¾›ä¸åŒçš„æ¥æºï¼ˆé€šè¿‡ `media-queries` æµ‹è¯•ï¼‰ï¼Œæ— è®ºåˆ†è¾¨ç‡å¦‚ä½•ï¼Œæˆ‘ä»¬å§‹ç»ˆèƒ½èšç„¦åœ¨æœ€é‡è¦çš„å›¾åƒå…ƒç´ ä¸Šã€‚

![picture å…ƒç´ ä½¿ç”¨ç¤ºä¾‹](https://cdn-images-1.medium.com/max/800/1*NeyfH6Vu1xCWE2SY5w1cDQ.png)

ğŸ“š é˜…è¯» [Jason Grigsby](https://twitter.com/grigs) çš„[ã€Šå“åº”å¼å›¾ç‰‡ 101ã€‹](https://cloudfour.com/thinks/responsive-images-101-definitions/) å¯ä»¥å…¨é¢åœ°äº†è§£è¿™ä¸¤ç§æ–¹å¼ã€‚

### ä½¿ç”¨å›¾ç‰‡ CDN

å›¾ç‰‡æ€§èƒ½çš„æœ€åä¸€æ­¥å°±æ˜¯åˆ†å‘äº†ã€‚æ‰€æœ‰èµ„æºéƒ½å¯ä»¥ä»ä½¿ç”¨ CDN ä¸­å—ç›Šï¼Œä½†æœ‰ä¸€äº›ç‰¹å®šçš„å·¥å…·æ˜¯ä¸“é—¨é’ˆå¯¹å›¾ç‰‡çš„ï¼Œä¾‹å¦‚ [Cloudinary](http://cloudinary.com/) æˆ–è€… [imgx](https://www.imgix.com/)ã€‚ä½¿ç”¨è¿™äº›æœåŠ¡çš„å¥½å¤„è¿œä¸æ­¢äºå‡å°‘æœåŠ¡å™¨æµé‡ï¼Œå®ƒè¿˜å¯ä»¥æ˜¾è‘—å‡å°‘å“åº”å»¶è¿Ÿã€‚

**CDN å¯ä»¥é™ä½é‡å›¾ç‰‡ç«™ç‚¹æä¾›è‡ªé€‚åº”å’Œé«˜æ€§èƒ½å›¾ç‰‡çš„å¤æ‚åº¦**ã€‚ä»–ä»¬æä¾›çš„æœåŠ¡å„ä¸ç›¸åŒï¼ˆä»·æ ¼ä¹Ÿä¸åŒï¼‰ï¼Œä½†æ˜¯å¤§å¤šæ•°éƒ½å¯ä»¥æ ¹æ®è®¾å¤‡å’Œæµè§ˆå™¨è¿›è¡Œå°ºå¯¸è°ƒæ•´ã€è£å‰ªå’Œç¡®å®šæœ€åˆé€‚çš„æ ¼å¼ï¼Œç”šè‡³æ›´å¤š â€”â€” å‹ç¼©ã€æ£€æµ‹åƒç´ å¯†åº¦ã€æ°´å°ã€äººè„¸è¯†åˆ«å’Œå…è®¸åæœŸå¤„ç†ã€‚å€ŸåŠ©è¿™äº›å¼ºå¤§çš„åŠŸèƒ½å’Œèƒ½å¤Ÿå°†å‚æ•°é™„åˆ° URL ä¸­ï¼Œä½¿å¾—æä¾›ä»¥ç”¨æˆ·ä¸ºä¸­å¿ƒçš„å›¾ç‰‡å˜å¾—è½»è€Œæ˜“ä¸¾äº†ã€‚

ğŸ“ å›¾ç‰‡æ€§èƒ½æ¸…å•

1. é€‰æ‹©æ­£ç¡®çš„æ ¼å¼
2. å°½å¯èƒ½ä½¿ç”¨çŸ¢é‡å›¾
3. å¦‚æœå˜åŒ–ä¸æ˜æ˜¾ï¼Œåˆ™é™ä½è´¨é‡
4. å°è¯•æ–°æ ¼å¼
5. ä½¿ç”¨å·¥å…·å’Œç®—æ³•è¿›è¡Œä¼˜åŒ–
6. å­¦ä¹  `srcset` å±æ€§å’Œ `picture` å…ƒç´ 
7. ä½¿ç”¨å›¾ç‰‡ CDN

## ä¼˜åŒ–ç½‘ç»œå­—ä½“

ä½¿ç”¨è‡ªå®šä¹‰å­—ä½“çš„èƒ½åŠ›æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„è®¾è®¡å·¥å…·ã€‚ä½†æƒåˆ©è¶Šå¤§ï¼Œè´£ä»»å°±è¶Šå¤§ã€‚**68% çš„ç½‘ç«™æ­£åœ¨ä½¿ç”¨ç½‘ç»œå­—ä½“ï¼Œè€Œè¿™ç§èµ„æºæ˜¯æœ€å¤§çš„æ€§èƒ½ç“¶é¢ˆä¹‹ä¸€**ï¼ˆå¾ˆå®¹æ˜“å¹³å‡è¾¾åˆ° 100KBï¼Œè¿™å–å†³äºå­—ä½“çš„å„ç§å½¢æ€å’Œæ•°é‡ï¼‰ã€‚

å³ä½¿ä½“ç§¯ä¸æ˜¯æœ€é‡è¦çš„é—®é¢˜ï¼Œä½†**ä¸å¯è§æ–‡æœ¬é—ªç°**ï¼ˆFOITï¼‰æ˜¯ã€‚å½“ç½‘ç»œå­—ä½“åœ¨åŠ è½½ä¸­æˆ–è€…åŠ è½½å¤±è´¥æ—¶ï¼Œå°±ä¼šå‘ç”Ÿ FOITï¼Œè¿™ä¼šå¯¼è‡´ç©ºç™½é¡µé¢ï¼Œä»è€Œé€ æˆå†…å®¹æ— æ³•è®¿é—®ã€‚è¿™å¯èƒ½å€¼å¾—æˆ‘ä»¬[ä»”ç»†æ£€æŸ¥æ˜¯å¦éœ€è¦ç½‘ç»œå­—ä½“](https://hackernoon.com/web-fonts-when-you-need-them-when-you-dont-a3b4b39fe0ae)ã€‚å¦‚æœæ˜¯è¿™æ ·ï¼Œæœ‰ä¸€äº›ç­–ç•¥å¯ä»¥å¸®åŠ©æˆ‘ä»¬å‡è½»å¯¹æ€§èƒ½çš„è´Ÿé¢å½±å“ã€‚

### é€‰æ‹©æ­£ç¡®çš„æ ¼å¼

æœ‰å››ç§ç½‘ç»œå­—ä½“æ ¼å¼ï¼šEOTã€TTFã€WOFF å’Œè¿‘æœŸçš„ WOFF2ã€‚TTF å’Œ WOFF è¢«å¹¿æ³›ä½¿ç”¨ï¼Œæ‹¥æœ‰è¶…è¿‡ 90% çš„æµè§ˆå™¨æ”¯æŒç‡ã€‚æ ¹æ®ä½ æ‰€é’ˆå¯¹çš„æ”¯æŒæƒ…å†µï¼Œ**ä½¿ç”¨ WOFF2 å¯èƒ½æœ€å®‰å…¨**ï¼Œå¹¶ä¸ºè€ç‰ˆæœ¬æµè§ˆå™¨é™çº§ä½¿ç”¨ WOFFã€‚ä½¿ç”¨ WOFF2 çš„ä¼˜ç‚¹æ˜¯ä¸€æ•´å¥—è‡ªå®šä¹‰çš„é¢„å¤„ç†å’Œå‹ç¼©ç®—æ³•ï¼ˆå¦‚ [Brotli](https://github.com/google/brotli)ï¼‰å¯ä»¥ [ç¼©å° 30% çš„æ–‡ä»¶å¤§å°](https://docs.google.com/presentation/d/10QJ_GABjwzfwUb5DZ3DULdv82k74QdPArkovYJZ-glc/present?slide=id.g1825bd881_0182)å’Œæ”¹è¿›è¿‡çš„è§£ææ€§èƒ½ã€‚

åœ¨ `@font-face` ä¸­å®šä¹‰ç½‘ç»œå­—ä½“çš„æ¥æºæ—¶ï¼Œä½¿ç”¨ `format()` æç¤ºæ¥æŒ‡å®šåº”è¯¥ä½¿ç”¨å“ªç§æ ¼å¼ã€‚

å¦‚æœä½ æ­£åœ¨ä½¿ç”¨ Google å­—ä½“æˆ–è€… Typekit å­—ä½“ï¼Œä»–ä»¬éƒ½å®æ–½äº†ä¸€äº›ç­–ç•¥æ¥å‡è½»å¯¹æ€§èƒ½çš„å½±å“ã€‚Typekit æ‰€æœ‰å¥—ä»¶ç°åœ¨éƒ½æ”¯æŒå¼‚æ­¥æ¥é¢„é˜² FOITï¼Œå¹¶ä¸”å…è®¸å…¶ JavaScript å¥—ä»¶ä»£ç çš„ç¼“å­˜æœŸé™å»¶é•¿ 10 å¤©ï¼ˆè€Œä¸æ˜¯é»˜è®¤çš„ 10 åˆ†é’Ÿï¼‰ã€‚Google å­—ä½“å¯ä»¥æ ¹æ®ç”¨æˆ·è®¾å¤‡è‡ªåŠ¨æä¾›æœ€å°çš„æ–‡ä»¶ã€‚

### å­—ä½“é€‰æ‹©è¯„æµ‹

æ— è®ºæ˜¯å¦è‡ªæ‰˜ç®¡ï¼Œå­—ä½“çš„æ•°é‡ã€ä½“ç§¯å’Œæ ·å¼éƒ½å°†æ˜æ˜¾å½±å“æ€§èƒ½ã€‚
ç†æƒ³æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸€ç§åŒ…æ‹¬å¸¸è§„å’Œç²—ä½“çš„å­—ä½“ã€‚å¦‚æœä½ ä¸ç¡®å®šå¦‚ä½•é€‰æ‹©å­—ä½“ï¼Œå¯ä»¥å‚è€ƒ Lara Hogan çš„[ã€Šç¾å­¦ä¸æ€§èƒ½ã€‹](http://designingforperformance.com/weighing-aesthetics-and-performance/)ã€‚

### ä½¿ç”¨ Unicode-range å­é›†

Unicode-range å­é›†å…è®¸å°†å¤§å­—ä½“åˆ†å‰²æˆè¾ƒå°çš„é›†åˆã€‚è¿™æ˜¯ä¸€ä¸ªç›¸å¯¹å…ˆè¿›çš„ç­–ç•¥ï¼Œä½†å®ƒå¯èƒ½ä¼šæ˜æ˜¾åœ°å‡å°‘å­—ä½“ä½“ç§¯ï¼Œç‰¹åˆ«æ˜¯åœ¨é’ˆå¯¹äºšæ´²è¯­è¨€çš„æ—¶å€™ï¼ˆä½ çŸ¥é“ä¸­æ–‡å­—ä½“çš„å¹³å‡å­—å½¢æ•°æ˜¯ 20,000 å—ï¼Ÿï¼‰ã€‚ç¬¬ä¸€æ­¥æ˜¯å°†å­—ä½“é™åˆ¶ä¸ºå¿…è¦çš„è¯­è¨€é›†ï¼Œä¾‹å¦‚æ‹‰ä¸è¯­ã€å¸Œè…Šè¯­æˆ–è¥¿é‡Œå°”è¯­ã€‚å¦‚æœç½‘ç»œå­—ä½“åªæ˜¯åš LOGO ç±»çš„ä½¿ç”¨ï¼Œé‚£å®Œå…¨å¯ä»¥ä½¿ç”¨ Unicode-range æè¿°ç¬¦æ¥é€‰æ‹©ç‰¹å®šçš„å­—ç¬¦ã€‚

Filament Group å‘å¸ƒçš„å¼€æºå‘½ä»¤è¡Œå·¥å…· [glyph hanger](https://github.com/filamentgroup/glyphhanger) å¯ä»¥æ ¹æ®æ–‡ä»¶æˆ– URL ç”Ÿæˆéœ€è¦çš„å­—å½¢åˆ—è¡¨ã€‚æˆ–è€…ï¼ŒåŸºäº web çš„ [Font Squirrel Web Font Generator](https://www.fontsquirrel.com/tools/webfont-generator)ï¼Œå®ƒæä¾›é«˜çº§å­é›†å’Œä¼˜åŒ–é€‰é¡¹ã€‚å¦‚æœä½¿ç”¨ Google å­—ä½“æˆ–è€… Typekitï¼Œä»–ä»¬åœ¨å­—ä½“é€‰æ‹©ç•Œé¢éƒ½æä¾›äº†è¯­è¨€å­é›†çš„é€‰æ‹©ï¼Œè¿™ä½¿å¾—ç¡®å®šåŸºæœ¬å­é›†æ›´å®¹æ˜“ã€‚

### å»ºç«‹å­—ä½“åŠ è½½ç­–ç•¥

**å­—ä½“æ˜¯é˜»å¡æ¸²æŸ“çš„** â€”â€” å› ä¸ºæµè§ˆå™¨éœ€è¦é¦–å…ˆåˆ›å»º DOM å’Œ CSSOMï¼›ç½‘ç»œå­—ä½“ç”¨äºä¸ç°æœ‰èŠ‚ç‚¹ç›¸åŒ¹é…çš„ CSS é€‰æ‹©å™¨ä¹‹å‰ï¼Œå®ƒéƒ½ä¸ä¼šè¢«ä¸‹è½½ã€‚è¿™ç§è¡Œä¸ºæ˜¾ç„¶å»¶è¿Ÿäº†æ–‡æœ¬çš„æ¸²æŸ“ï¼Œé€šå¸¸éƒ½ä¼šå¯¼è‡´å‰é¢æåˆ°çš„**ä¸å¯è§æ–‡æœ¬é—ªç°**ï¼ˆFOITï¼‰ã€‚åœ¨è¾ƒæ…¢çš„ç½‘ç»œå’Œç§»åŠ¨è®¾å¤‡ä¸Šï¼ŒFOIT åˆ™æ›´åŠ æ˜æ˜¾ã€‚

å®æ–½å­—ä½“åŠ è½½ç­–ç•¥å¯ä»¥é¿å…ç”¨æˆ·æ— æ³•è®¿é—®å†…å®¹ã€‚é€šå¸¸ï¼Œ**æ— æ ·å¼æ–‡æœ¬é—ªç°**ï¼ˆFOUTï¼‰æ˜¯æœ€ç®€å•å’Œæœ€æœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆã€‚

`font-display` æ˜¯ä¸€ä¸ªæ–°çš„ CSS å±æ€§ï¼Œæä¾›äº†ä¸€ä¸ªä¸ä¾èµ– JavaScript çš„è§£å†³æ–¹æ¡ˆã€‚ä¸å¹¸çš„æ˜¯ï¼Œå®ƒåªè¢«éƒ¨åˆ†æ”¯æŒï¼ˆChrome å’Œ Operaï¼‰ï¼ŒFirefox å’Œ WebKit ç›®å‰åœ¨å¼€å‘ä¸­ã€‚å°½ç®¡å¦‚æ­¤ï¼Œå®ƒå¯ä»¥å¹¶ä¸”åº”è¯¥ä¸å…¶ä»–å­—ä½“åŠ è½½æœºåˆ¶ç»“åˆä½¿ç”¨ã€‚

![font-display å±æ€§ç¤ºä¾‹](https://cdn-images-1.medium.com/max/800/1*Kuky8fVepcjU3tMbTjewdw.png)

å¹¸è¿çš„æ˜¯ï¼ŒTypekit çš„[ç½‘ç»œå­—ä½“åŠ è½½å™¨](https://github.com/typekit/webfontloader) å’Œ [Bram Stein](https://twitter.com/bram_stein) çš„ [å­—ä½“è§‚å¯Ÿè€…](https://fontfaceobserver.com/) å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç®¡ç†å­—ä½“çš„åŠ è½½è¡Œä¸ºã€‚æ­¤å¤–ï¼Œ[Zach Leatherman](https://twitter.com/zachleat) æ˜¯ç½‘ç»œå­—ä½“æ€§èƒ½çš„ä¸“å®¶ï¼Œä»–å‘å¸ƒçš„[ã€Šå­—ä½“åŠ è½½ç­–ç•¥ç»¼åˆæŒ‡å—ã€‹](https://www.zachleat.com/web/comprehensive-webfonts)å°†å¸®åŠ©ä½ ä¸ºä½ çš„é¡¹ç›®é€‰æ‹©æ­£ç¡®çš„æ–¹æ³•ã€‚

ğŸ“ ç½‘ç»œå­—ä½“æ€§èƒ½æ¸…å•

1. é€‰æ‹©æ­£ç¡®çš„æ ¼å¼
2. å­—ä½“é€‰æ‹©è¯„æµ‹
3. ä½¿ç”¨ Unicode-range å­é›†
4. å»ºç«‹å­—ä½“åŠ è½½ç­–ç•¥

## ä¼˜åŒ– JavaScript

ç›®å‰ï¼Œ[JavaScript åŒ…çš„å¹³å‡å¤§å°ä¸º 446KB](http://httparchive.org/trends.php#bytesJS&reqJS)ï¼Œè¿™ä½¿å¾—ä½¿å…¶æˆä¸ºç¬¬äºŒå¤§ä½“ç§¯ç±»å‹çš„èµ„æºï¼ˆä»…æ¬¡äºå›¾ç‰‡ï¼‰ã€‚

> æˆ‘ä»¬å¯èƒ½æ²¡æœ‰æ„è¯†åˆ°ï¼Œæˆ‘ä»¬æ‰€é’Ÿçˆ±çš„ JavaScript éšè—ç€æ›´åŠ å±é™©çš„æ€§èƒ½ç“¶é¢ˆã€‚

### ç›‘æ§ JavaScript ä¼ è¾“

ä¼˜åŒ–ä¼ è¾“åªæ˜¯æŠ—è¡¡é¡µé¢è‡ƒè‚¿çš„ä¸€ç§æ–¹æ³•ã€‚JavaScript ä¸‹è½½åï¼Œå¿…é¡»ç”±æµè§ˆå™¨è¿›è¡Œè§£æã€ç¼–è¯‘å’Œè¿è¡Œã€‚æµè§ˆä¸€äº›çƒ­é—¨çš„ç½‘ç«™ï¼Œæˆ‘ä»¬ä¼šå‘ç°ï¼Œgzip å‹ç¼©åçš„ JS **åœ¨è§£å‹ä¹‹åè‡³å°‘å˜å¤§ä¸‰å€**ã€‚å®é™…ä¸Šï¼Œæˆ‘ä»¬æ­£åœ¨å‘é€ä¸€å¤§å †ä»£ç ã€‚

![](https://cdn-images-1.medium.com/max/800/1*Yrn4kTkaYHX0PWj4HB-mQg.jpeg)

1MB JavaScript åœ¨ä¸åŒçš„è®¾å¤‡ä¸Šçš„è§£ææ—¶é—´ã€‚å›¾ç‰‡æ¥æºäº Addy Osmani çš„[ã€ŠJavaScript å¯åŠ¨æ€§èƒ½ã€‹](https://medium.com/reloading/javascript-start-up-performance-69200f43b201)ã€‚

åˆ†æè§£æå’Œç¼–è¯‘æ—¶é—´ï¼Œå¯¹äºç†è§£åº”ç”¨ç¨‹åºä½•æ—¶å‡†å¤‡å¥½è¿›è¡Œäº¤äº’è‡³å…³é‡è¦ï¼Œè¿™äº›æ—¶é—´å› ç”¨æˆ·è®¾å¤‡çš„ç¡¬ä»¶èƒ½åŠ›è€Œå¼‚ã€‚**è§£æå’Œç¼–è¯‘çš„æ—¶é—´ä¼šå¾ˆå®¹æ˜“åœ°åœ¨ä½ç«¯æ‰‹æœºä¸Šé«˜å‡º 2-5 å€**ã€‚[Addy](https://twitter.com/addyosmani) çš„ç ”ç©¶è¡¨æ˜ï¼Œä¸€ä¸ªåº”ç”¨ç¨‹åºåœ¨æ™®é€šæ‰‹æœºä¸Šéœ€è¦ 16 ç§’æ‰èƒ½è¾¾åˆ°å¯äº¤äº’çŠ¶æ€ï¼Œè€Œåœ¨æ¡Œé¢ä¸Šæ˜¯ 8 ç§’
åˆ†æè¿™äº›æŒ‡æ ‡è‡³å…³é‡è¦ï¼Œå¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ Chrome å¼€å‘è€…å·¥å…·æ¥å®Œæˆã€‚

![åœ¨ Chrome å¼€å‘è€…å·¥å…·ä¸­å®¡æŸ¥è§£æå’Œç¼–è¯‘è¿‡ç¨‹](https://cdn-images-1.medium.com/max/800/1*eV83YP2fnoOllUleaWa5lw.gif)

è¯·åŠ¡å¿…é˜…è¯» Addy Osmani åœ¨[ã€ŠJavaScript å¯åŠ¨æ€§èƒ½ã€‹](https://medium.com/reloading/javascript-start-up-performance-69200f43b201)æ–‡ä¸­çš„è¯¦ç»†æ€»ç»“ã€‚

### ç§»é™¤ä¸å¿…è¦çš„ä¾èµ–

ç°ä»Šçš„åŒ…ç®¡ç†æ–¹å¼å¯ä»¥å¾ˆå®¹æ˜“åœ°éšè—ä¾èµ–åŒ…çš„æ•°é‡å’Œå¤§å°ã€‚[webpack-bundle-analyzer](https://www.npmjs.com/package/webpack-bundle-analyzer) å’Œ [bundle-buddy](https://www.npmjs.com/package/bundle-buddy) æ˜¯å¾ˆå¥½çš„å¯è§†åŒ–å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬è¯†åˆ«å‡ºé‡å¤ä»£ç ã€æœ€å¤§çš„æ€§èƒ½ç“¶é¢ˆä»¥åŠè¿‡æ—¶å’Œä¸å¿…è¦çš„ä¾èµ–åŒ…ã€‚

![Webpack bundle analyzer çš„ç¤ºä¾‹](https://cdn-images-1.medium.com/max/800/1*dusVhPiL44VDoS4gJHMWSg.gif)

é€šè¿‡ [VS Code](https://marketplace.visualstudio.com/items?itemName=wix.vscode-import-cost) å’Œ [Atom](https://atom.io/packages/atom-import-cost) ä¸­çš„ `Import Cost` æ‰©å±•ï¼Œæˆ‘ä»¬å¯ä»¥æ˜æ˜¾çŸ¥æ™“å¯¼å…¥åŒ…çš„å¤§å°ã€‚

![VS Code ä¸­çš„ Import Cost æ‹“å±•](https://cdn-images-1.medium.com/max/800/1*LbfI4D9XXiZYS1Slwsys5g.gif)

### å®æ–½ä»£ç åˆ†å‰²

åªè¦æœ‰å¯èƒ½ï¼Œ**æˆ‘ä»¬å°±åº”è¯¥åªæä¾›ç”¨æˆ·ä½“éªŒæ‰€å¿…éœ€çš„èµ„æº**ã€‚å‘ç”¨æˆ·å‘é€ä¸€ä¸ªå®Œæ•´çš„ `bundle.js` æ–‡ä»¶ï¼ŒåŒ…æ‹¬ä»–ä»¬å¯èƒ½æ°¸è¿œçœ‹ä¸åˆ°çš„äº¤äº’æ•ˆæœçš„å¤„ç†ä»£ç ï¼Œè¿™ä¸å¤ªç†æƒ³ï¼ˆè¯•æƒ³ä¸€ä¸‹ï¼Œåœ¨è®¿é—®ç€é™†é¡µæ—¶ï¼Œä¸‹è½½äº†å¤„ç†æ•´ä¸ªåº”ç”¨ç¨‹åºçš„ JavaScriptï¼‰ã€‚åŒæ ·ï¼Œæˆ‘ä»¬ä¸åº”åˆ°å¤„æä¾›é’ˆå¯¹ç‰¹å®šæµè§ˆå™¨æˆ–ç”¨æˆ·ä»£ç†çš„ä»£ç ã€‚

Webpack æ˜¯æœ€å—æ¬¢è¿çš„æ‰“åŒ…å·¥å…·ä¹‹ä¸€ï¼Œé»˜è®¤æ”¯æŒ[ä»£ç åˆ†å‰²](https://webpack.js.org/guides/code-splitting/)ã€‚æœ€ç®€å•çš„ä»£ç åˆ†å‰²å¯ä»¥æŒ‰é¡µé¢å®æ–½ï¼ˆä¾‹å¦‚ç€é™†é¡µé¢çš„ `home.js`ï¼Œè”ç³»é¡µé¢çš„ `contact.js` ç­‰ï¼‰ã€‚ä½† Webpack æä¾›äº†æ¯”è¾ƒå°‘çš„é«˜çº§ç­–ç•¥ï¼Œä¾‹å¦‚åŠ¨æ€å¯¼å…¥æˆ–è€…[æ‡’åŠ è½½](https://webpack.js.org/guides/lazy-loading/)ï¼Œè¿™å¯èƒ½å€¼å¾—ç ”ç©¶ã€‚

### è€ƒè™‘æ¡†æ¶é€‰æ‹©

JavaScript çš„å‰ç«¯æ¡†æ¶æ—¥æ–°æœˆå¼‚ã€‚æ ¹æ® [2016 å¹´çš„ JavaScript ç°çŠ¶è°ƒæŸ¥](https://stateofjs.com/2016/frontend/)ï¼ŒReact æ˜¯æœ€å—æ¬¢è¿çš„ã€‚ä»”ç»†è¯„ä¼°æ¶æ„é€‰å‹å¯èƒ½ä¼šå‘ç°ï¼Œä½ å¯ä»¥é‡‡ç”¨æ›´ä¸ºè½»é‡çº§çš„æ›¿ä»£æ–¹æ¡ˆï¼Œä¾‹å¦‚ Preactï¼ˆéœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒPreact å¹¶ä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„ React é‡æ–°å®ç°ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªå…·æœ‰[é«˜æ€§èƒ½](https://github.com/developit/preact-perf)ï¼ŒåŠŸèƒ½æ›´è½»çš„è™šæ‹Ÿ DOM åº“ï¼‰ã€‚åŒæ ·ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¾ƒå¤§çš„åº“æ›¿æ¢ä¸ºæ›´å°çš„æ›¿ä»£æ–¹æ¡ˆ â€”â€” `moment.js` æ¢æˆ `date-fns`ï¼ˆæˆ–è€…åœ¨ç‰¹å®šæƒ…å†µä¸‹ï¼Œ[åˆ é™¤ `moment.js` ä¸­æœªä½¿ç”¨çš„ `locales`](https://github.com/distilagency/starward/issues/81)ï¼‰ã€‚

**åœ¨å¼€å§‹ä¸€ä¸ªæ–°é¡¹ç›®ä¹‹å‰ï¼Œæœ‰å¿…è¦ç¡®å®šä»€ä¹ˆæ ·çš„åŠŸèƒ½æ˜¯å¿…éœ€çš„ï¼Œå¹¶ä¸ºä½ çš„éœ€æ±‚å’Œç›®æ ‡é€‰æ‹©æ€§èƒ½æœ€å¥½çš„æ¡†æ¶**ã€‚æœ‰æ—¶è¿™å¯èƒ½æ„å‘³ç€é€‰æ‹©å†™æ›´å¤šçš„åŸç”Ÿ JavaScriptã€‚

ğŸ“ JavaScript æ€§èƒ½æ¸…å•

1. ç›‘æ§ JavaScript ä¼ è¾“
2. ç§»é™¤ä¸å¿…è¦çš„ä¾èµ–
3. å®æ–½ä»£ç åˆ†å‰²
4. è€ƒè™‘æ¡†æ¶é€‰æ‹©

## æ€§èƒ½è¿½è¸ªï¼Œå‰è¿›ä¹‹è·¯

åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è®¨è®ºè¿‡çš„ä¸€äº›ç­–ç•¥ä¼šå¯¹æˆ‘ä»¬æ­£åœ¨æ‰“é€ çš„äº§å“çš„ç”¨æˆ·ä½“éªŒäº§ç”Ÿç§¯æçš„å˜åŒ–ã€‚æ€§èƒ½å¯èƒ½æ˜¯ä¸€ä¸ªæ£˜æ‰‹çš„é—®é¢˜ï¼Œæœ‰å¿…è¦é•¿æœŸè·Ÿè¸ªæˆ‘ä»¬è°ƒæ•´çš„æ•ˆæœã€‚

### ä»¥ç”¨æˆ·ä¸ºä¸­å¿ƒçš„æ€§èƒ½æŒ‡æ ‡

å“è¶Šçš„æ€§èƒ½æŒ‡æ ‡ï¼Œæ—¨åœ¨å°½å¯èƒ½æ¥è¿‘æç»˜çš„ç”¨æˆ·ä½“éªŒã€‚ä»¥å¾€çš„ `onLoad`ã€`onContentLoaded` æˆ–è€… `SpeedIndex` å¯¹äºç”¨æˆ·å¤šä¹…èƒ½ä¸é¡µé¢è¿›è¡Œäº¤äº’ç»™å‡ºçš„ä¿¡æ¯éå¸¸å°‘ã€‚å½“ä»…å…³æ³¨èµ„æºä¼ è¾“æ—¶ï¼Œæˆ‘ä»¬å¾ˆéš¾é‡åŒ–[æ„ŸçŸ¥å¾—åˆ°çš„æ€§èƒ½](https://calibreapp.com/docs/metrics/user-focused-metrics)ã€‚å¹¸è¿çš„æ˜¯ï¼Œæœ‰ä¸€äº›æ—¶é—´å¯ä»¥å¾ˆå¥½åœ°æè¿°å†…å®¹çš„å¯è§†æ€§å’Œäº’åŠ¨æ€§ã€‚

è¿™äº›æŒ‡æ ‡æ˜¯ç™½å±æ—¶é—´ã€é¦–æ¬¡æœ‰æ•ˆæ¸²æŸ“ã€è§†è§‰å®Œæ•´å’Œå¯äº¤äº’æ—¶é—´ã€‚

![](https://cdn-images-1.medium.com/max/800/1*fjqW4fRUD7iIrzcKfUkfIg.png)

- **First Paint ç™½å±æ—¶é—´**ï¼šæµè§ˆå™¨ä»ç™½å±åˆ°ç¬¬ä¸€æ¬¡è§†è§‰å˜åŒ–ã€‚
- **First Meaningful Paint é¦–æ¬¡æœ‰æ•ˆæ¸²æŸ“**ï¼šæ–‡å­—ã€å›¾åƒå’Œä¸»è¦å†…å®¹éƒ½å·²å¯è§ã€‚
- **Visually Complete è§†è§‰å®Œæ•´**ï¼šè§†å£ä¸­çš„æ‰€æœ‰å†…å®¹éƒ½å¯è§ã€‚
- **Time to Interactive å¯äº¤äº’æ—¶é—´**ï¼šè§†å£ä¸­çš„æ‰€æœ‰å†…å®¹éƒ½å¯è§ï¼Œå¹¶ä¸”å¯ä»¥è¿›è¡Œäº¤äº’ï¼ˆJavaScript ä¸»çº¿ç¨‹åœæ­¢æ´»åŠ¨ï¼‰ã€‚

è¿™äº›æ—¶é—´å’Œç”¨æˆ·ä½“éªŒæ¯æ¯ç›¸å…³ï¼Œå› æ­¤å¯ä»¥ä½œä¸ºé‡ç‚¹è¿›è¡Œè¿½è¸ªã€‚å¦‚æœå¯èƒ½ï¼Œå°†å®ƒä»¬å…¨éƒ¨è®°å½•ï¼Œå¦åˆ™é€‰æ‹©ä¸€ä¸¤ä¸ªæ¥æ›´å¥½åœ°ç›‘æ§æ€§èƒ½ã€‚å…¶ä»–æŒ‡æ ‡ä¹Ÿéœ€è¦å…³æ³¨ï¼Œç‰¹åˆ«æ˜¯æˆ‘ä»¬å‘é€çš„å­—èŠ‚æ•°ï¼ˆä¼˜åŒ–å’Œè§£å‹ç¼©ï¼‰ã€‚

### è®¾ç½®æ€§èƒ½é¢„ç®—

æ‰€æœ‰æ•°æ®å¯èƒ½ä¼šå¾ˆå¿«å˜å¾—ä»¤äººå›°æƒ‘å’Œéš¾ä»¥ç†è§£ã€‚æ²¡æœ‰å¯æ‰§è¡Œçš„ç›®æ ‡ï¼Œå¾ˆå®¹æ˜“è¿·å¤±æˆ‘ä»¬æœ€åˆçš„ç›®çš„ã€‚å‡ å¹´å‰ï¼Œ[Tim Kadlec](https://twitter.com/tkadlec) å†™è¿‡å…³äº[ã€Šæ€§èƒ½é¢„ç®—ã€‹](https://timkadlec.com/2013/01/setting-a-performance-budget/)çš„æ¦‚å¿µã€‚

é—æ†¾çš„æ˜¯ï¼Œæ²¡æœ‰ä»€ä¹ˆç¥å¥‡çš„å…¬å¼å¯ä»¥è®¾ç½®å®ƒä»¬ã€‚æ€§èƒ½é¢„ç®—é€šå¸¸å½’ç»“ä¸ºç«äº‰åˆ†æå’Œäº§å“ç›®æ ‡ï¼Œè€Œè¿™æ˜¯æ¯ä¸ªä¸šåŠ¡æ‰€ç‹¬æœ‰çš„ã€‚

è®¾å®šé¢„ç®—æ—¶ï¼Œé‡è¦çš„æ˜¯è¦æœ‰æ˜æ˜¾çš„å·®å¼‚ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œè‡³å°‘è¦æœ‰ 20% çš„æ”¹å–„ã€‚å®éªŒå’Œè¿­ä»£ä½ çš„é¢„ç®—ï¼Œå¯ä»¥å‚è€ƒ Lara Hogan çš„[ä½¿ç”¨æ€§èƒ½é¢„ç®—æ¥æ¥è¿‘æ–°è®¾è®¡](http://designingforperformance.com/weighing-aesthetics-and-performance/#approach-new-designs-with-a-performance-budget)ã€‚

ä½¿ç”¨[æ€§èƒ½é¢„ç®—è®¡ç®—å™¨](http://www.performancebudget.io/)æˆ–è€… [Browser Calories](https://browserdiet.com/calories/) Chrome æ‹“å±•ç¨‹åºæ¥å¸®åŠ©ä½ åˆ›å»ºé¢„ç®—ã€‚

### æŒç»­ç›‘æ§

æ€§èƒ½ç›‘æ§åº”è¯¥æ˜¯è‡ªåŠ¨åŒ–çš„ï¼Œå¸‚é¢ä¸Šæœ‰å¾ˆå¤šæä¾›å…¨é¢æŠ¥å‘Šçš„å¼ºå¤§å·¥å…·ã€‚

[Google Lighthouse](https://developers.google.com/web/tools/lighthouse/) æ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œå®ƒå¯ä»¥å®¡æŸ¥æ€§èƒ½ã€å¯è®¿é—®æ€§ã€PWA ç­‰ã€‚ä½ å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­æˆ–è€…ç›´æ¥åœ¨ Chrome å¼€å‘è€…å·¥å…·ä¸­ä½¿ç”¨å®ƒã€‚

![Lighthouse æ€§èƒ½å®¡æŸ¥ç¤ºä¾‹](https://cdn-images-1.medium.com/max/800/1*T3HA3VrN48JsCAHWFfnu3g.gif)

å¯¹äºæŒç»­çš„è¿½è¸ªï¼Œå¯ä»¥é€‰æ‹© [Calibre](https://calibreapp.com/)ï¼Œå®ƒæä¾›çš„æ€§èƒ½é¢„ç®—ã€è®¾å¤‡ä»¿çœŸã€åˆ†å¸ƒå¼ç›‘æ§å’Œè®¸å¤šå…¶ä»–åŠŸèƒ½æ˜¯æˆ‘ä»¬ä¸åœ¨æ„å»ºè‡ªå·±çš„æ€§èƒ½å¥—ä»¶ä¸ŠèŠ±è´¹å¤§é‡ç²¾åŠ›æ˜¯å®Œæˆä¸äº†çš„ã€‚

![ä½¿ç”¨ Calibre è¿›è¡Œå…¨é¢çš„æ€§èƒ½è¿½è¸ª](https://cdn-images-1.medium.com/max/800/1*LTFZ7zMASCWUz3r0eqXdoQ.gif)

æ— è®ºä½ åœ¨å“ªé‡Œè¿½è¸ªï¼Œè¯·ç¡®ä¿æ•°æ®å¯¹äºæ•´ä¸ªå›¢é˜Ÿæˆ–è€…å°å‹ç»„ç»‡é‡Œçš„æ•´ä¸ªä¸šåŠ¡çº¿éƒ½æ˜¯é€æ˜å’Œå¯è®¿é—®çš„ã€‚

> æ€§èƒ½æ˜¯å…±åŒçš„è´£ä»»ï¼Œä¸ä»…ä»…æ˜¯å¼€å‘å›¢é˜Ÿ â€”â€” æˆ‘ä»¬éƒ½åº”å¯¹æ‰€åˆ›å»ºçš„ç”¨æˆ·ä½“éªŒè´Ÿè´£ï¼Œä¸ç®¡æ˜¯ä»€ä¹ˆè§’è‰²æˆ–èŒçº§ã€‚

åœ¨äº§å“å†³ç­–æˆ–è€…è®¾è®¡é˜¶æ®µï¼Œæå€¡é€Ÿåº¦å’Œå»ºç«‹åä½œæµç¨‹ä»¥å‘ç°å¯èƒ½çš„ç“¶é¢ˆæ˜¯éå¸¸é‡è¦çš„ã€‚

### å»ºç«‹æ€§èƒ½æ„è¯†å’ŒåŒç†å¿ƒ
**å…³å¿ƒæ€§èƒ½ä¸ä»…ä»…æ˜¯ä¸€ä¸ªä¸šåŠ¡ç›®æ ‡**ï¼ˆä½†å¦‚æœä½ éœ€è¦é€šè¿‡é”€å”®ç»Ÿè®¡æ•°æ®æ¥è¿›è¡Œé”€å”®ï¼Œé‚£å¯ä»¥ä½¿ç”¨ [PWA ç»Ÿè®¡](https://www.pwastats.com/)ï¼‰ã€‚è¿™å…³ä¹äºåŸºæœ¬çš„åŒç†å¿ƒï¼Œå¹¶æŠŠç”¨æˆ·çš„æœ€å¤§åˆ©ç›Šæ”¾åœ¨ç¬¬ä¸€ä½ã€‚

> ä½œä¸ºæŠ€æœ¯äººå‘˜ï¼Œæˆ‘ä»¬çš„è´£ä»»æ˜¯ï¼Œä¸è¦è®©ç”¨æˆ·çš„æ³¨æ„åŠ›å’Œæ—¶é—´æ”¾åœ¨ç­‰å¾…é¡µé¢ä¸Šã€‚æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ï¼Œ[å»ºç«‹æœ‰æ—¶é—´è§‚å¿µå’Œä»¥äººä¸ºæœ¬çš„å·¥å…·](http://www.timewellspent.io/)ã€‚

æå€¡æ€§èƒ½æ„è¯†åº”è¯¥æ˜¯æ¯ä¸ªäººçš„ç›®æ ‡ã€‚è®©æˆ‘ä»¬æŠ±ç€æ€§èƒ½å’ŒåŒç†å¿ƒï¼Œä¸ºæ‰€æœ‰äººå»ºç«‹ä¸€ä¸ªæ›´å¥½ã€æ›´æœ‰æ„ä¹‰çš„æœªæ¥å§ã€‚


---

> [æ˜é‡‘ç¿»è¯‘è®¡åˆ’](https://github.com/xitu/gold-miner) æ˜¯ä¸€ä¸ªç¿»è¯‘ä¼˜è´¨äº’è”ç½‘æŠ€æœ¯æ–‡ç« çš„ç¤¾åŒºï¼Œæ–‡ç« æ¥æºä¸º [æ˜é‡‘](https://juejin.im) ä¸Šçš„è‹±æ–‡åˆ†äº«æ–‡ç« ã€‚å†…å®¹è¦†ç›– [Android](https://github.com/xitu/gold-miner#android)ã€[iOS](https://github.com/xitu/gold-miner#ios)ã€[React](https://github.com/xitu/gold-miner#react)ã€[å‰ç«¯](https://github.com/xitu/gold-miner#å‰ç«¯)ã€[åç«¯](https://github.com/xitu/gold-miner#åç«¯)ã€[äº§å“](https://github.com/xitu/gold-miner#äº§å“)ã€[è®¾è®¡](https://github.com/xitu/gold-miner#è®¾è®¡) ç­‰é¢†åŸŸï¼Œæƒ³è¦æŸ¥çœ‹æ›´å¤šä¼˜è´¨è¯‘æ–‡è¯·æŒç»­å…³æ³¨ [æ˜é‡‘ç¿»è¯‘è®¡åˆ’](https://github.com/xitu/gold-miner)ã€[å®˜æ–¹å¾®åš](http://weibo.com/juejinfanyi)ã€[çŸ¥ä¹ä¸“æ ](https://zhuanlan.zhihu.com/juejinfanyi)ã€‚
