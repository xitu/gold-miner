> * åŸæ–‡åœ°å€ï¼š[Optimizing Layouts in Android â€“ Reducing Overdraw](http://riggaroo.co.za/optimizing-layouts-in-android-reducing-overdraw/)
* åŸæ–‡ä½œè€…ï¼š[Rebecca](https://riggaroo.co.za/female-android-developer/)
* è¯‘æ–‡å‡ºè‡ªï¼š[æ˜é‡‘ç¿»è¯‘è®¡åˆ’](https://github.com/xitu/gold-miner)
* è¯‘è€…ï¼š [Nicolas(Yifei) Li](https://github.com/yifili09)
* æ ¡å¯¹è€…ï¼š[XHShirley](https://github.com/XHShirley), [jamweak](https://github.com/jamweak)

# `Android` ç•Œé¢çš„æ€§èƒ½ä¼˜åŒ– â€”â€” å‡å°‘è¿‡åº¦ç»˜åˆ¶

ä½ æœ‰äº†ä¸€ä¸ªå¾ˆæ£’çš„çµæ„Ÿï¼Œå¹¶ä¸”æŠŠå®ƒåˆ¶ä½œæˆäº†ä¸€ä¸ªåº”ç”¨ç¨‹åºå‘å¸ƒåˆ°äº†ç½‘ä¸Šã€‚ä½†æ˜¯ï¼Œç°åœ¨ä½ å¬åˆ°äº†æ¥è‡ªç”¨æˆ·çš„æŠ±æ€¨ï¼Œä¾‹å¦‚è¿™ä¸ªåº”ç”¨ç¨‹åºè¿è¡Œèµ·æ¥å¾ˆæ…¢æœ‰å¡é¡¿çš„æ„Ÿè§‰å¹¶ä¸”å¤ªéš¾ä½¿ç”¨ã€‚:disappointed_relieved:ã€‚

æœ‰ä¸€ä¸ªç®€å•çš„è§£å†³æ–¹æ³•æ˜¯ï¼Œä½ å¯ä»¥ä½¿ç”¨ `GPU Overdraw` å·¥å…·æ¥æ”¹è¿›åº”ç”¨ç¨‹åºçš„æ¸²æŸ“æ—¶é—´ã€‚

## ä»€ä¹ˆæ˜¯è¿‡åº¦ç»˜åˆ¶ï¼Ÿ

è¿‡åº¦ç»˜åˆ¶å‘ç”Ÿåœ¨æ¯ä¸€æ¬¡åº”ç”¨ç¨‹åºè¦æ±‚ç³»ç»Ÿåœ¨æŸäº›ç•Œé¢ä¸Šå†ç»˜åˆ¶ä¸€äº›ç•Œé¢çš„æ—¶å€™ã€‚è¿™ä¸ª `Debug GPU Overdraw` å·¥å…·å¯ä»¥åœ¨å±å¹•æœ€ä¸Šå±‚å åŠ ä¸Šä¸€äº›é¢œè‰²ï¼Œå®ƒæ˜¾ç¤ºå‡ºä¸€ä¸ªåƒç´ ç‚¹è¢«é‡å¤ç»˜åˆ¶äº†å¤šå°‘æ¬¡ã€‚

## æˆ‘æ€ä¹ˆèƒ½å¯åŠ¨è¿™ä¸ª `Debug GPU Overdraw` å·¥å…·ï¼Ÿ

1. è¿›å…¥è®¾å¤‡ä¸Šçš„`è®¾ç½®`èœå•
2. è¿›å…¥`å¼€å‘è€…é€‰é¡¹`
3. é€‰æ‹©`è°ƒè¯• GPU è¿‡åº¦ç»˜åˆ¶`
4. é€‰æ‹©`æ˜¾ç¤ºè¿‡åº¦ç»˜åˆ¶åŒºåŸŸ`

ä½ ä¼šæ³¨æ„åˆ°å±å¹•ä¸Šçš„é¢œè‰²æœ‰äº†å˜åŒ– â€”â€” ä¸å¿…æƒŠæ…Œã€‚è¿”å›åˆ°ä½ çš„åº”ç”¨ç¨‹åºï¼Œç°åœ¨æˆ‘ä»¬å­¦ä¹ å¦‚ä½•æ¥ä¼˜åŒ–æˆ‘ä»¬çš„ç•Œé¢ã€‚

## ä¸åŒé¢œè‰²ä»£è¡¨äº†ä»€ä¹ˆæ„æ€ï¼Ÿ

[![Screenshot_2016-02-01-11-08-40](https://i1.wp.com/riggaroo.co.za/wp-content/uploads/2016/02/Screenshot_2016-02-01-11-08-40.png?resize=576%2C1024&ssl=1)
](https://i1.wp.com/riggaroo.co.za/wp-content/uploads/2016/02/Screenshot_2016-02-01-11-08-40.png?resize=576%2C1024&ssl=1)

ä»¥ä¸‹æ˜¯å„ç§é¢œè‰²çš„è§£é‡Š:

**æœ¬è‰²** â€”â€” æ²¡æœ‰å‘ç”Ÿè¿‡åº¦ç»˜åˆ¶ â€”â€” å±å¹•ä¸Šçš„åƒç´ ç‚¹åªè¢«ç»˜åˆ¶äº† **1** æ¬¡ã€‚

**è“è‰²** â€”â€” `1 å€è¿‡åº¦ç»˜åˆ¶` â€”â€” å±å¹•ä¸Šçš„åƒç´ ç‚¹è¢«ç»˜åˆ¶äº† **2** æ¬¡ã€‚

**ç»¿è‰²** â€”â€” `2 å€è¿‡åº¦ç»˜åˆ¶` â€”â€” å±å¹•ä¸Šçš„åƒç´ ç‚¹è¢«ç»˜åˆ¶äº† **3** æ¬¡ã€‚

**ç²‰è‰²** â€”â€” `3 å€è¿‡åº¦ç»˜åˆ¶` â€”â€” å±å¹•ä¸Šçš„åƒç´ ç‚¹è¢«ç»˜åˆ¶äº† **4** æ¬¡ã€‚

**çº¢è‰²** â€”â€” `4 å€è¿‡åº¦ç»˜åˆ¶` â€”â€” å±å¹•ä¸Šçš„åƒç´ ç‚¹è¢«ç»˜åˆ¶äº† **5** æ¬¡ã€‚

[![GPU Overdraw](http://i1.wp.com/riggaroo.co.za/wp-content/uploads/2016/02/Screen-Shot-2016-02-10-at-6.40.42-PM.png?resize=150%2C150%20150w,%20http://i1.wp.com/riggaroo.co.za/wp-content/uploads/2016/02/Screen-Shot-2016-02-10-at-6.40.42-PM.png?resize=50%2C50%2050w)](http://i1.wp.com/riggaroo.co.za/wp-content/uploads/2016/02/Screen-Shot-2016-02-10-at-6.40.42-PM.png)

ä½ å¯ä»¥çœ‹çœ‹æˆ‘çš„ [`Book Dash` åº”ç”¨ç¨‹åº](http://riggaroo.co.za/portfolio/book-dash-android-app/)ï¼Œå®ƒåœ¨åˆå§‹åŒ–çš„ç•Œé¢ä¸Šåšäº†å¾ˆå¤šè¿‡åº¦ç»˜åˆ¶ã€‚

## å¦‚ä½•ä¿®æ­£è¿‡åº¦ç»˜åˆ¶çš„é—®é¢˜ï¼Ÿ

åœ¨ä¸Šæ–‡çš„ä¾‹å­ä¸­ï¼Œæˆ‘ç§»é™¤äº†è®¾å®šåœ¨ `RelativeLayout` ä¸Šçš„èƒŒæ™¯è‰²ï¼Œå¹¶ä¸”ä½¿ç”¨ `theme` æ¥ç»˜åˆ¶èƒŒæ™¯ã€‚

å°†ä»¥ä¸‹ä»£ç :

```
<RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="#FFFFFF">

```

æ›¿æ¢æˆ:


```
<RelativeLayout
     android:layout_width="match_parent"
     android:layout_height="match_parent">
```


ä¿®æ”¹ä»£ç åçš„ç•Œé¢å¾—åˆ°äº†å¦‚ä¸‹çš„ç»“æœğŸ˜Š:

[![After removing the background colour.](https://i1.wp.com/riggaroo.co.za/wp-content/uploads/2016/02/Screenshot_2016-02-01-11-20-08.png?resize=576%2C1024&ssl=1)
](https://i1.wp.com/riggaroo.co.za/wp-content/uploads/2016/02/Screenshot_2016-02-01-11-20-08.png)

å°±å¦‚ä½ çœ‹åˆ°çš„ï¼Œè¿‡åº¦ç»˜åˆ¶çš„é—®é¢˜è¢«æœ€å¤§ç¨‹åº¦åœ°å‡å°‘äº†ã€‚çº¢è‰²çš„è¿‡åº¦ç»˜åˆ¶åŒºåŸŸè¢«å¤§å¤§åœ°å‡å°‘äº†ã€‚

è¿™ä¸ªç•Œé¢è¿˜æœ‰ç»§ç»­ä¼˜åŒ–çš„ç©ºé—´ï¼Œç°åœ¨å¤§éƒ¨åˆ†å±•ç°çš„å·²ç»æ˜¯ç•Œé¢çš„çœŸæœ¬è‰²äº†ï¼Œè¿˜æœ‰ä¸€äº›è“è‰²çš„è¿‡åº¦ç»˜åˆ¶åŒºåŸŸã€‚æœ‰äº›è¿‡åº¦ç»˜åˆ¶æ˜¯ä¸å¯é¿å…çš„ã€‚

å¹¶ä¸æ˜¯æ‰€æœ‰çš„è¿‡åº¦ç»˜åˆ¶éƒ½æ˜¯ç”±èƒŒæ™¯è‰²é€ æˆçš„ã€‚å…¶ä»–é—®é¢˜ä¹Ÿä¼šå¯¼è‡´è¿‡åº¦ç»˜åˆ¶ï¼Œä¾‹å¦‚ï¼Œæœ‰éå¸¸å¤æ‚å±‚æ¬¡ç»“æ„æˆ–è€…åŒ…å«æœ‰å¤ªå¤šè§†å›¾çš„ç•Œé¢ã€‚

ä½ åº”å½“æŠŠç›®æ ‡å®šåœ¨ **æœ€å¤šåªå…è®¸ 2 å€è¿‡åº¦ç»˜åˆ¶ ï¼ˆä¹Ÿå°±æ˜¯åªå‡ºç°ç»¿è‰²è¿‡åº¦ç»˜åˆ¶åŒºåŸŸï¼‰**ã€‚

ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€äº›å…¶ä»–çš„å·¥å…·æ¥è°ƒè¯•ä¸ºä»€ä¹ˆå‘ç”Ÿäº†è¿‡åº¦ç»˜åˆ¶ï¼Œä¾‹å¦‚ï¼Œ[Hierarchy Viewer](http://developer.android.com/tools/performance/hierarchy-viewer/index.html) å’ŒÂ [GL Tracer](http://developer.android.com/tools/help/gltracer.html).

ä½ æ˜¯æ€ä¹ˆæ¥è§£å†³è°ƒè¯•è¿‡åº¦ç»˜åˆ¶æ—¶é‡åˆ°çš„é—®é¢˜ï¼Ÿä½ è¿˜æœ‰å…¶ä»–å®è´µçš„ç»éªŒåˆ†äº«ç»™å¤§å®¶ä¹ˆï¼Ÿ

å‚è€ƒèµ„æ–™ï¼š

[http://developer.android.com/tools/performance/debug-gpu-overdraw/index.html](http://developer.android.com/tools/performance/debug-gpu-overdraw/index.html)



