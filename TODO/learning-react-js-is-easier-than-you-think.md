> * åŸæ–‡åœ°å€ï¼š[Learning React.js is easier than you think](https://edgecoders.com/learning-react-js-is-easier-than-you-think-fbd6dc4d935a)
> * åŸæ–‡ä½œè€…ï¼š[Samer Buna](https://edgecoders.com/@samerbuna)
> * è¯‘æ–‡å‡ºè‡ªï¼š[æ˜é‡‘ç¿»è¯‘è®¡åˆ’](https://github.com/xitu/gold-miner)
> * æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š[https://github.com/xitu/gold-miner/blob/master/TODO/learning-react-js-is-easier-than-you-think.md](https://github.com/xitu/gold-miner/blob/master/TODO/learning-react-js-is-easier-than-you-think.md)
> * è¯‘è€…ï¼š[Cherry](https://github.com/sunshine940326)
> * æ ¡å¯¹è€…ï¼š[LeviDing](https://github.com/leviding)ã€[undead25](https://github.com/undead25)

# å­¦ä¹  React.js æ¯”ä½ æƒ³è±¡çš„è¦ç®€å•

## é€šè¿‡ Medium ä¸­çš„ä¸€ç¯‡æ–‡ç« æ¥å­¦ä¹  React.js çš„åŸºæœ¬åŸç†

![](https://cdn-images-1.medium.com/max/1600/1*YsPpBr_PgtyTR6CFDmKU9g.png)

ä½ æœ‰æ²¡æœ‰æ³¨æ„åˆ°åœ¨ React çš„ logo ä¸­éšè—ç€ä¸€ä¸ªå…­è§’æ˜Ÿï¼Ÿåªæ˜¯é¡ºä¾¿æä¸‹...
å»å¹´æˆ‘å†™äº†ä¸€æœ¬ç®€çŸ­çš„å…³äºå­¦ä¹  React.js çš„ä¹¦ï¼Œæœ‰ 100 é¡µå·¦å³ã€‚ä»Šå¹´ï¼Œæˆ‘è¦æŒ‘æˆ˜è‡ªå·± â€”â€” å°†å…¶æ€»ç»“æˆä¸€ç¯‡æ–‡ç« ï¼Œå¹¶å‘ Medium æŠ•ç¨¿ã€‚

è¿™ç¯‡æ–‡ç« ä¸æ˜¯è®²ä»€ä¹ˆæ˜¯ React æˆ–è€… [ä½ è¯¥æ€æ ·å­¦ä¹  React](https://medium.freecodecamp.org/yes-react-is-taking-over-front-end-development-the-question-is-why-40837af8ab76)ã€‚è¿™æ˜¯åœ¨é¢å‘é‚£äº›å·²ç»ç†Ÿæ‚‰äº† JavaScript å’Œ [DOM API](https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model) çš„äººçš„ React.js åŸºæœ¬åŸç†ä»‹ç»

> æœ¬æ–‡é‡‡ç”¨åµŒå…¥å¼ jsComplete ä»£ç æ®µï¼Œæ‰€ä»¥ä¸ºäº†æ–¹ä¾¿é˜…è¯»ï¼Œä½ éœ€è¦ä¸€ä¸ªåˆé€‚çš„å±å¹•å®½åº¦ã€‚

ä¸‹é¢æ‰€æœ‰çš„ä»£ç éƒ½ä»…ä¾›å‚è€ƒã€‚å®ƒä»¬ä¹Ÿçº¯ç²¹æ˜¯ä¸ºäº†è¡¨è¾¾æ¦‚å¿µè€Œæä¾›çš„ä¾‹å­ã€‚å®ƒä»¬ä¸­çš„å¤§å¤šæ•°æœ‰æ›´å¥½çš„å®è·µæ–¹å¼ã€‚

æ‚¨å¯ä»¥ç¼–è¾‘å’Œæ‰§è¡Œä¸‹é¢çš„ä»»ä½•ä»£ç æ®µã€‚ä½¿ç”¨ **Ctrl+Enter** æ‰§è¡Œä»£ç ã€‚æ¯ä¸€æ®µçš„å³ä¸‹è§’æœ‰ä¸€ä¸ªç‚¹å‡»åå¯ä»¥åœ¨ [jsComplete/repl](https://jscomplete.com/repl) è¿›è¡Œå…¨å±æ¨¡å¼ç¼–è¾‘æˆ–è¿è¡Œä»£ç çš„é“¾æ¥ã€‚

---

#### 1 React å…¨éƒ¨éƒ½æ˜¯ç»„ä»¶åŒ–çš„

React æ˜¯å›´ç»•å¯é‡ç”¨ç»„ä»¶çš„æ¦‚å¿µè®¾è®¡çš„ã€‚ä½ å®šä¹‰å°ç»„ä»¶å¹¶å°†å®ƒä»¬ç»„åˆåœ¨ä¸€èµ·å½¢æˆæ›´å¤§çš„ç»„ä»¶ã€‚

æ— è®ºå¤§å°ï¼Œæ‰€æœ‰ç»„ä»¶éƒ½æ˜¯å¯é‡ç”¨çš„ï¼Œç”šè‡³åœ¨ä¸åŒçš„é¡¹ç›®ä¸­ä¹Ÿæ˜¯å¦‚æ­¤ã€‚

React ç»„ä»¶æœ€ç®€å•çš„å½¢å¼ï¼Œå°±æ˜¯ä¸€ä¸ªæ™®é€šçš„ JavaScript å‡½æ•°ï¼š

```js
function Button (props) {
 Â // è¿™é‡Œè¿”å›ä¸€ä¸ª DOM å…ƒç´ ï¼Œä¾‹å¦‚ï¼š
  return <button type="submit">{props.label}</button>;
}
// å°†æŒ‰é’®ç»„ä»¶å‘ˆç°ç»™æµè§ˆå™¨
ReactDOM.render(<Button label="Save" />, mountNode)
```

ä¾‹ 1ï¼šç¼–è¾‘ä¸Šé¢çš„ä»£ç å¹¶æŒ‰ Ctrl+Enter é”®æ‰§è¡Œï¼ˆè¯‘è€…æ³¨ï¼šè¯‘æ–‡æš‚æ—¶æ²¡æœ‰è¿™ä¸ªåŠŸèƒ½ï¼Œè¯·è®¿é—®åŸæ–‡ä½¿ç”¨æ­¤åŠŸèƒ½ï¼Œä¸‹åŒï¼‰

> æ‹¬å·ä¸­çš„ button æ ‡ç­¾å°†ç¨åè§£é‡Šã€‚ç°åœ¨ä¸è¦æ‹…å¿ƒå®ƒä»¬ã€‚`ReactDOM` ä¹Ÿå°†ç¨åè§£é‡Šï¼Œä½†å¦‚æœä½ æƒ³æµ‹è¯•è¿™ä¸ªä¾‹å­å’Œæ‰€æœ‰æ¥ä¸‹æ¥çš„ä¾‹å­ï¼Œä¸Šè¿° `render` å‡½æ•°æ˜¯å¿…é¡»çš„ã€‚ï¼ˆReact å°†è¦æ¥ç®¡å’Œæ§åˆ¶çš„æ˜¯ `ReactDOM.render` çš„ç¬¬ 2 ä¸ªå‚æ•°å³ç›®æ ‡ DOM å…ƒç´ ï¼‰ã€‚åœ¨ jsComplete REPL ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ç‰¹æ®Šçš„å˜é‡ `mountNode`ã€‚

ä¾‹ 1 çš„æ³¨æ„äº‹é¡¹ï¼š

- ç»„ä»¶åç§°é¦–å­—æ¯å¤§å†™ï¼Œ`Button`ã€‚å¿…é¡»è¦è¿™æ ·åšæ˜¯å› ä¸ºæˆ‘ä»¬å°†å¤„ç† HTML å…ƒç´ å’Œ React å…ƒç´ çš„æ··åˆã€‚å°å†™åç§°æ˜¯ä¸º HTML å…ƒç´ ä¿ç•™çš„ã€‚äº‹å®ä¸Šï¼Œå°† React ç»„ä»¶å‘½åä¸º â€œbuttonâ€ ç„¶åä½ å°±ä¼šå‘ç° ReactDOM ä¼šå¿½ç•¥è¿™ä¸ªå‡½æ•°ï¼Œä»…ä»…æ˜¯å°†å…¶ä½œä¸ºä¸€ä¸ªæ™®é€šçš„ç©º HTML æŒ‰é’®æ¥æ¸²æŸ“ã€‚
- æ¯ä¸ªç»„ä»¶éƒ½æ¥æ”¶ä¸€ä¸ªå±æ€§åˆ—è¡¨ï¼Œå°±åƒ HTML å…ƒç´ ä¸€æ ·ã€‚åœ¨ React ä¸­ï¼Œè¿™ä¸ªåˆ—è¡¨è¢«ç§°ä¸º**å±æ€§**ã€‚è™½ç„¶ä½ å¯ä»¥å°†ä¸€ä¸ªå‡½æ•°éšæ„å‘½åã€‚
- åœ¨ä¸Šé¢ Button å‡½æ•°ç»„ä»¶çš„è¿”å›è¾“å‡ºä¸­ï¼Œæˆ‘ä»¬å¥‡æ€ªåœ°å†™äº†æ®µçœ‹ä¸Šå»åƒ HTML çš„ä»£ç ã€‚è¿™å®é™…ä¸Šæ—¢ä¸æ˜¯ JavaScript ä¹Ÿä¸æ˜¯ HTMLï¼Œè€å®è¯´ï¼Œè¿™ç”šè‡³ä¸æ˜¯ React.jsã€‚ç„¶è€Œå®ƒéå¸¸æµè¡Œï¼Œä»¥è‡³äºæˆä¸º React åº”ç”¨ç¨‹åºä¸­çš„é»˜è®¤å€¼ã€‚è¿™å°±æ˜¯æ‰€è°“çš„ [**JSX**](https://facebook.github.io/jsx/)ï¼Œè¿™æ˜¯ä¸€ä¸ªJavaScript çš„æ‰©å±•ã€‚JSX ä¹Ÿæ˜¯ä¸€ä¸ª**æŠ˜ä¸­æ–¹æ¡ˆ**ï¼ç»§ç»­å°è¯•å¹¶åœ¨ä¸Šé¢çš„å‡½æ•°ä¸­è¿”å›å…¶ä»– HTML å…ƒç´ ï¼Œçœ‹çœ‹å®ƒä»¬æ˜¯å¦‚ä½•è¢«æ”¯æŒçš„ï¼ˆä¾‹å¦‚ï¼Œè¿”å›ä¸€ä¸ªæ–‡æœ¬è¾“å…¥å…ƒç´ ï¼‰ã€‚

#### 2 JSX è¾“å‡ºçš„æ˜¯ä»€ä¹ˆï¼Ÿ

ä¸Šé¢çš„ä¾‹ 1 å¯ä»¥ç”¨æ²¡æœ‰ JSX çš„çº¯ React.js ç¼–å†™ï¼Œå¦‚ä¸‹ï¼š

```js
function Button (props) {
  return React.createElement(
    "button",
    { type: "submit" },
    props.label
  );
}

// è¦ä½¿ç”¨ Buttonï¼Œä½ å¯ä»¥è¿™ä¹ˆåš
ReactDOM.render(
  React.createElement(Button, { label: "Save" }),
  mountNode
);
```

ä¾‹ 2ï¼šä¸ä½¿ç”¨ JSX ç¼–å†™ React ç»„ä»¶

åœ¨ React é¡¶çº§ API ä¸­ï¼Œ`createElement` å‡½æ•°æ˜¯ä¸»å‡½æ•°ã€‚è¿™æ˜¯ä½ éœ€è¦å­¦ä¹ çš„ 7 ä¸ª API ä¸­çš„ 1 ä¸ªã€‚React çš„ API å°±æ˜¯è¿™ä¹ˆå°ã€‚

å°±åƒ DOM è‡ªèº«æœ‰ä¸€ä¸ª document.createElement å‡½æ•°æ¥åˆ›å»ºä¸€ä¸ªç”±æ ‡ç­¾åæŒ‡å®šçš„å…ƒç´ ä¸€æ ·ï¼ŒReact çš„ `createElement` å‡½æ•°æ˜¯ä¸€ä¸ªé«˜çº§å‡½æ•°ï¼Œæœ‰å’Œ `document.createElement` åŒæ ·çš„åŠŸèƒ½ï¼Œä½†å®ƒä¹Ÿå¯ä»¥ç”¨äºåˆ›å»ºä¸€ä¸ªè¡¨ç¤º React ç»„ä»¶çš„å…ƒç´ ã€‚å½“æˆ‘ä»¬ä½¿ç”¨ä¸Šé¢ä¾‹ 2 ä¸­çš„æŒ‰é’®ç»„ä»¶æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯åè€…ã€‚

ä¸åƒ `document.createElement`ï¼ŒReact çš„ `createElement` åœ¨æ¥æ”¶ç¬¬äºŒä¸ªå‚æ•°åï¼Œæ¥æ”¶ä¸€ä¸ªåŠ¨æ€å‚æ•°ï¼Œå®ƒè¡¨ç¤ºæ‰€åˆ›å»ºå…ƒç´ çš„å­å…ƒç´ ã€‚æ‰€ä»¥ `createElement` å®é™…ä¸Šåˆ›å»ºäº†ä¸€ä¸ª**æ ‘**ã€‚

è¿™é‡Œå°±æ˜¯è¿™æ ·çš„ä¸€ä¸ªä¾‹å­ï¼š

```js
const InputForm = React.createElement(
  "form",
  { target: "_blank", action: "https://google.com/search" },
  React.createElement("div", null, "Enter input and click Search"),
  React.createElement("input", { className: "big-input" }),
  React.createElement(Button, { label: "Search" })
);

// InputForm ä½¿ç”¨ Button ç»„ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è¿™æ ·åšï¼š
function Button (props) {
  return React.createElement(
    "button",
    { type: "submit" },
    props.label
  );
}

// ç„¶åæˆ‘ä»¬å¯ä»¥é€šè¿‡ .render æ–¹æ³•ç›´æ¥ä½¿ç”¨ InputForm
ReactDOM.render(InputForm, mountNode);
```
ä¾‹ 3ï¼šReact åˆ›å»ºå…ƒç´ çš„ API

ä¸Šé¢ä¾‹å­ä¸­çš„ä¸€äº›äº‹æƒ…å€¼å¾—æ³¨æ„ï¼š

- `InputForm` ä¸æ˜¯ä¸€ä¸ª React ç»„ä»¶ï¼›å®ƒä»…ä»…æ˜¯ä¸€ä¸ª React **å…ƒç´ **ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬å¯ä»¥åœ¨ `ReactDOM.render` ä¸­ç›´æ¥ä½¿ç”¨å®ƒå¹¶ä¸”å¯ä»¥åœ¨è°ƒç”¨æ—¶ä¸ä½¿ç”¨ `<InputForm />` çš„åŸå› ã€‚
- React.createElement å‡½æ•°åœ¨å‰ä¸¤ä¸ªå‚æ•°åæ¥æ”¶äº†å¤šä¸ªå‚æ•°ã€‚ä»ç¬¬3ä¸ªå‚æ•°å¼€å§‹çš„å‚æ•°åˆ—è¡¨æ„æˆäº†åˆ›å»ºå…ƒç´ çš„å­é¡¹åˆ—è¡¨ã€‚
- æˆ‘ä»¬å¯ä»¥åµŒå¥— `React.createElement` è°ƒç”¨ï¼Œå› ä¸ºå®ƒæ˜¯ JavaScriptã€‚
- å½“è¿™ä¸ªå…ƒç´ ä¸éœ€è¦å±æ€§æ—¶ï¼ŒReact.createElement çš„ç¬¬äºŒä¸ªå‚æ•°å¯ä»¥ä¸ºç©ºæˆ–è€…æ˜¯ä¸€ä¸ªç©ºå¯¹è±¡ã€‚
- æˆ‘ä»¬å¯ä»¥åœ¨ React ç»„ä»¶ä¸­æ··åˆ HTML å…ƒç´ ã€‚ä½ å¯ä»¥å°† HTML å…ƒç´ ä½œä¸ºå†…ç½®çš„ React ç»„ä»¶ã€‚
- React çš„ API è¯•å›¾å’Œ DOM API ä¸€æ ·ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨ input å…ƒç´ ä¸­ä½¿ç”¨ `className` ä»£æ›¿ `class` çš„åŸå› ã€‚æˆ‘ä»¬éƒ½å¸Œæœ›å¦‚æœ React çš„ API æˆä¸º DOM API æœ¬èº«çš„ä¸€éƒ¨åˆ†ï¼Œå› ä¸ºï¼Œä½ çŸ¥é“ï¼Œå®ƒè¦å¥½å¾—å¤šã€‚

ä¸Šè¿°çš„ä»£ç æ˜¯å½“ä½ å¼•å…¥ React åº“çš„æ—¶å€™æµè§ˆå™¨æ˜¯æ€æ ·ç†è§£çš„ã€‚æµè§ˆå™¨ä¸ä¼šå¤„ç†ä»»ä½• JSX ä¸šåŠ¡ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬æ›´å–œæ¬¢çœ‹åˆ°å’Œä½¿ç”¨ HTMLï¼Œè€Œä¸æ˜¯é‚£äº› `createElement` è°ƒç”¨ï¼ˆæƒ³è±¡ä¸€ä¸‹åªä½¿ç”¨ `document.createElement` æ„å»ºä¸€ä¸ªç½‘ç«™ï¼ï¼‰ã€‚è¿™å°±æ˜¯ JSX å­˜åœ¨çš„åŸå› ã€‚å–ä»£ä¸Šè¿°è°ƒç”¨ `React.createElement` çš„æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªéå¸¸ç®€å•ç±»ä¼¼äº HTML çš„è¯­æ³•ï¼š

```js
const InputForm =
  <form target="_blank" action="https://google.com/search">
    <div>Enter input and click Search</div>
    <input className="big-input" name="q" />
    <Button label="Search" />
  </form>;

// InputForm â€œä»ç„¶â€ä½¿ç”¨ Button ç»„ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿéœ€è¦è¿™æ ·ã€‚
// JXS æˆ–è€…æ™®é€šçš„è¡¨å•éƒ½ä¼šè¿™æ ·åš
function Button (props) {
  // è¿™é‡Œè¿”å›ä¸€ä¸ª DOM å…ƒç´ ã€‚ä¾‹å¦‚ï¼š
  return <button type="submit">{props.label}</button>;
}

// ç„¶åæˆ‘ä»¬å¯ä»¥ç›´æ¥é€šè¿‡ .render ä½¿ç”¨ InputForm
ReactDOM.render(InputForm, mountNode);
```

ä¾‹ 4ï¼šä¸ºä»€ä¹ˆåœ¨ React ä¸­ JSX å—æ¬¢è¿ï¼ˆå’Œä¾‹ 3 ç›¸æ¯”ï¼‰

æ³¨æ„ä¸Šé¢çš„å‡ ä»¶äº‹ï¼š

- è¿™ä¸æ˜¯ HTML ä»£ç ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥ä½¿ç”¨ `className` ä»£æ›¿ `class`ã€‚
- æˆ‘ä»¬ä»åœ¨è€ƒè™‘æ€æ ·è®©ä¸Šè¿°çš„ JavaScript çœ‹èµ·æ¥åƒæ˜¯ HTMLã€‚çœ‹ä¸€ä¸‹æˆ‘åœ¨æœ€åæ˜¯æ€æ ·æ·»åŠ çš„ã€‚

æˆ‘ä»¬åœ¨ä¸Šé¢ï¼ˆä¾‹ 4ï¼‰ä¸­å†™çš„å°±æ˜¯ JSXã€‚ç„¶è€Œï¼Œæˆ‘ä»¬è¦å°†ç¼–è¯‘åçš„ç‰ˆæœ¬ï¼ˆä¾‹ 3ï¼‰ç»™æµè§ˆå™¨ã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸€ä¸ªé¢„å¤„ç†å™¨å°† JSX ç‰ˆæœ¬è½¬æ¢ä¸º `React.createElement` ç‰ˆæœ¬ã€‚

è¿™å°±æ˜¯ JSXã€‚è¿™æ˜¯ä¸€ç§æŠ˜ä¸­çš„æ–¹æ¡ˆï¼Œå…è®¸æˆ‘ä»¬ç”¨ç±»ä¼¼ HTML çš„è¯­æ³•æ¥ç¼–å†™æˆ‘ä»¬çš„ React ç»„ä»¶ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æ–¹æ³•ã€‚

> â€œFluxâ€ åœ¨å¤´éƒ¨ä½œä¸ºéŸµè„šæ¥ä½¿ç”¨ï¼Œä½†å®ƒä¹Ÿæ˜¯ä¸€ä¸ªéå¸¸å—æ¬¢è¿çš„ [åº”ç”¨æ¶æ„](https://facebook.github.io/flux/)ï¼Œç”± Facebook æ¨å¹¿ã€‚æœ€å‡ºåçš„æ˜¯ Reduxï¼ŒFlux å’Œ React éå¸¸åˆé€‚ã€‚

JSXï¼Œå¯ä»¥å•ç‹¬ä½¿ç”¨ï¼Œä¸ä»…ä»…é€‚ç”¨äº Reactã€‚

#### 3 ä½ å¯ä»¥åœ¨ JavaScript çš„ä»»ä½•åœ°æ–¹ä½¿ç”¨ JSX

åœ¨ JSX ä¸­ï¼Œä½ å¯ä»¥åœ¨ä¸€å¯¹èŠ±æ‹¬å·å†…ä½¿ç”¨ä»»ä½• JavaScript è¡¨è¾¾å¼ã€‚

```js
const RandomValue = () =>
  <div>
    { Math.floor(Math.random() * 100) }
  </div>;

// ä½¿ç”¨ï¼š
ReactDOM.render(<RandomValue />, mountNode);
```

ä¾‹ 5ï¼šåœ¨ JSX ä¸­ä½¿ç”¨ JavaScript è¡¨è¾¾å¼

ä»»ä½• JavaScript è¡¨è¾¾å¼å¯ä»¥ç›´æ¥æ”¾åœ¨èŠ±æ‹¬å·ä¸­ã€‚è¿™ç›¸å½“äºåœ¨ JavaScript ä¸­æ’å…¥ `${}` [æ¨¡æ¿](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals)ã€‚

è¿™æ˜¯ JSX å†…å”¯ä¸€çš„çº¦æŸï¼šåªæœ‰è¡¨è¾¾å¼ã€‚ä¾‹å¦‚ï¼Œä½ ä¸èƒ½ä½¿ç”¨ `if` è¯­å¥ï¼Œä½†ä¸‰å…ƒè¡¨è¾¾å¼æ˜¯å¯ä»¥çš„ã€‚

JavaScript å˜é‡ä¹Ÿæ˜¯è¡¨è¾¾å¼ï¼Œæ‰€ä»¥å½“ç»„ä»¶æ¥å—å±æ€§åˆ—è¡¨æ—¶ï¼ˆä¸åŒ…æ‹¬ `RandomValue` ç»„ä»¶ï¼Œ`props` æ˜¯å¯é€‰æ‹©çš„ï¼‰ï¼Œä½ å¯ä»¥åœ¨èŠ±æ‹¬å·é‡Œä½¿ç”¨è¿™äº›å±æ€§ã€‚æˆ‘ä»¬åœ¨ä¸Šè¿°ï¼ˆä¾‹ 1ï¼‰çš„ `Button` ç»„ä»¶æ˜¯è¿™æ ·ä½¿ç”¨çš„ã€‚

JavaScript å¯¹è±¡ä¹Ÿæ˜¯è¡¨è¾¾å¼ã€‚æœ‰äº›æ—¶å€™æˆ‘ä»¬åœ¨èŠ±æ‹¬å·ä¸­ä½¿ç”¨ JavaScript å¯¹è±¡ï¼Œè¿™çœ‹èµ·æ¥åƒæ˜¯ä½¿ç”¨äº†ä¸¤ä¸ªèŠ±æ‹¬å·ï¼Œä½†æ˜¯åœ¨èŠ±æ‹¬å·ä¸­ç¡®å®åªæœ‰ä¸€ä¸ªå¯¹è±¡ã€‚å…¶ä¸­ä¸€ä¸ªç”¨ä¾‹å°±æ˜¯å°† CSS æ ·å¼å¯¹è±¡ä¼ é€’ç»™å“åº”ä¸­çš„ç‰¹æ®Šæ ·å¼å±æ€§ï¼š

```js
const ErrorDisplay = ({message}) =>
  <div style={ { color: 'red', backgroundColor: 'yellow' } }>
    {message}
  </div>;

// ä½¿ç”¨
ReactDOM.render(
  <ErrorDisplay
    message="These aren't the droids you're looking for"
  />,
  mountNode
);
```
ä¾‹ 6ï¼šä¸€ä¸ªå¯¹è±¡ä¼ é€’ç‰¹æ®Šçš„ React æ ·å¼å‚æ•°

æ³¨æ„æˆ‘**è§£æ„**çš„åªæ˜¯åœ¨å±æ€§å‚æ•°ä¹‹å¤–çš„ä¿¡æ¯ã€‚è¿™åªæ˜¯ JavaScriptã€‚è¿˜è¦æ³¨æ„ä¸Šé¢çš„æ ·å¼å±æ€§æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å±æ€§ï¼ˆåŒæ ·ï¼Œå®ƒä¸æ˜¯ HTMLï¼Œå®ƒæ›´æ¥è¿‘ DOM APIï¼‰ã€‚æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªå¯¹è±¡ä½œä¸ºæ ·å¼å±æ€§çš„å€¼å¹¶ä¸”è¿™ä¸ªå¯¹è±¡å®šä¹‰æ ·å¼å°±åƒæˆ‘ä»¬ä½¿ç”¨ JavaScript é‚£æ ·ï¼ˆæˆ‘ä»¬å¯ä»¥è¿™æ ·åšï¼‰ã€‚

ä½ å¯ä»¥åœ¨ JSX ä¸­ä½¿ç”¨ React å…ƒç´ ã€‚å› ä¸ºè¿™ä¹Ÿæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼ˆè®°ä½ï¼Œä¸€ä¸ª React å…ƒç´ åªæ˜¯ä¸€ä¸ªå‡½æ•°è°ƒç”¨ï¼‰ï¼š

```js
const MaybeError = ({errorMessage}) =>
  <div>
    {errorMessage && <ErrorDisplay message={errorMessage} />}
  </div>;

// MaybeError ç»„ä»¶ä½¿ç”¨ ErrorDisplay ç»„ä»¶
const ErrorDisplay = ({message}) =>
  <div style={ { color: 'red', backgroundColor: 'yellow' } }>
    {message}
  </div>;

// ç°åœ¨æˆ‘ä»¬ä½¿ç”¨ MaybeError ç»„ä»¶ï¼š
ReactDOM.render(
  <MaybeError
    errorMessage={Math.random() > 0.5 ? 'Not good' : ''}
  />,
  mountNode
);
```

ä¾‹ 7ï¼šä¸€ä¸ª React å…ƒç´ æ˜¯ä¸€ä¸ªå¯ä»¥é€šè¿‡ {} ä½¿ç”¨çš„è¡¨è¾¾å¼

ä¸Šè¿° `MaybeError` ç»„ä»¶åªä¼šåœ¨æœ‰ `errorMessage` ä¼ å…¥æˆ–è€…å¦å¤–æœ‰ä¸€ä¸ªç©ºçš„ `div` æ‰ä¼šæ˜¾ç¤º `ErrorDisplay` ç»„ä»¶ã€‚React è®¤ä¸º `{true}`ã€ `{false}`
`{undefined}` å’Œ `{null}` æ˜¯æœ‰æ•ˆå…ƒç´ ï¼Œä¸å‘ˆç°ä»»ä½•å†…å®¹ã€‚

æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ JSX ä¸­ä½¿ç”¨æ‰€æœ‰çš„ JavaScript çš„é›†åˆæ–¹æ³•ï¼ˆ`map`ã€`reduce` ã€`filter`ã€ `concat` ç­‰ï¼‰ã€‚å› ä¸ºä»–ä»¬è¿”å›çš„ä¹Ÿæ˜¯è¡¨è¾¾å¼ï¼š

```js
const Doubler = ({value=[1, 2, 3]}) =>
  <div>
    {value.map(e => e * 2)}
  </div>;

// ä½¿ç”¨ä¸‹é¢å†…å®¹ 
ReactDOM.render(<Doubler />, mountNode);
```

ä¾‹ 8ï¼šåœ¨ {} ä¸­ä½¿ç”¨æ•°ç»„

è¯·æ³¨æ„æˆ‘æ˜¯å¦‚ä½•ç»™å‡ºä¸Šè¿° `value` å±æ€§çš„é»˜è®¤å€¼çš„ï¼Œå› ä¸ºè¿™å…¨éƒ¨éƒ½åªæ˜¯ JavaScriptã€‚æ³¨æ„æˆ‘åªæ˜¯åœ¨ div ä¸­è¾“å‡ºä¸€ä¸ªæ•°ç»„è¡¨è¾¾å¼ã€‚React æ˜¯å®Œå…¨å¯ä»¥çš„ã€‚å®ƒåªä¼šåœ¨æ–‡æœ¬èŠ‚ç‚¹ä¸­æ”¾ç½®æ¯ä¸€ä¸ªåŠ å€çš„å€¼ã€‚

#### 4 ä½ å¯ä»¥ä½¿ç”¨ JavaScript ç±»å†™ React ç»„ä»¶

ç®€å•çš„å‡½æ•°ç»„ä»¶éå¸¸é€‚åˆç®€å•çš„éœ€æ±‚ï¼Œä½†æ˜¯æœ‰çš„æ—¶å€™æˆ‘ä»¬éœ€è¦çš„æ›´å¤šã€‚React ä¹Ÿæ”¯æŒé€šè¿‡ä½¿ç”¨ [JavaScript ç±»](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes)æ¥åˆ›å»ºç»„ä»¶ã€‚è¿™é‡Œ `Button` ç»„ä»¶ï¼ˆåœ¨ä¾‹ 1 ä¸­ï¼‰å°±æ˜¯ä½¿ç”¨ç±»çš„è¯­æ³•ç¼–å†™çš„ã€‚

```js
class Button extends React.Component {
  render() {
    return <button>{this.props.label}</button>;
  }
}

// ä½¿ç”¨ï¼ˆç›¸åŒçš„è¯­æ³•ï¼‰
ReactDOM.render(<Button label="Save" />, mountNode);
```

ä¾‹ 9ï¼šä½¿ç”¨ JavaScript ç±»åˆ›å»ºç»„ä»¶

ç±»çš„è¯­æ³•æ˜¯éå¸¸ç®€å•çš„ï¼šå®šä¹‰ä¸€ä¸ªæ‰©å±•çš„ `React.Component` ç±»ï¼ˆå¦ä¸€ä¸ªä½ éœ€è¦å­¦ä¹ çš„ React çš„é¡¶çº§ APIï¼‰ã€‚è¯¥ç±»å®šä¹‰äº†ä¸€ä¸ªå•ä¸€çš„å®ä¾‹å‡½æ•° â€”â€” `render()`ï¼Œå¹¶ä½¿å‡½æ•°è¿”å›è™šæ‹Ÿ DOM å¯¹è±¡ã€‚æ¯ä¸€æ¬¡æˆ‘ä»¬ä½¿ç”¨åŸºäºç±»çš„ `Button` ç»„ä»¶ï¼ˆä¾‹å¦‚ï¼Œé€šè¿‡ `<Button ... />`ï¼‰,React å°†ä»è¿™ä¸ªåŸºäºç±»çš„ç»„ä»¶ä¸­å®ä¾‹åŒ–å¯¹è±¡ï¼Œå¹¶åœ¨ DOM æ ‘ä¸­ä½¿ç”¨è¯¥å¯¹è±¡ã€‚

è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä¸Šé¢çš„ä¾‹å­ä¸­æˆ‘ä»¬å¯ä»¥åœ¨ JSX ä¸­ä½¿ç”¨ `this.props.label` æ¸²æŸ“è¾“å‡ºçš„åŸå› ï¼Œå› ä¸ºæ¯ä¸€ä¸ªç»„ä»¶éƒ½æœ‰ä¸€ä¸ªç‰¹æ®Šçš„ç§°ä¸º `props` çš„ **å®ä¾‹** å±æ€§ï¼Œè¿™è®©æ‰€æœ‰çš„å€¼ä¼ é€’ç»™è¯¥ç»„ä»¶æ—¶è¢«å®ä¾‹åŒ–ã€‚

ç”±äºæˆ‘ä»¬æœ‰ä¸€ä¸ªä¸ç»„ä»¶çš„å•ä¸ªä½¿ç”¨ç›¸å…³è”çš„å®ä¾‹ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æŒ‰ç…§è‡ªå·±çš„æ„æ„¿å®šåˆ¶è¯¥å®ä¾‹ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨å¸¸è§„ JavaScript æ„é€ å‡½æ•°æ¥æ„é€ å®ƒï¼š

```js
class Button extends React.Component {
  constructor(props) {
    super(props);
    this.id = Date.now();
  }
  render() {
    return <button id={this.id}>{this.props.label}</button>;
  }
}

// ä½¿ç”¨
ReactDOM.render(<Button label="Save" />, mountNode);
```

ä¾‹ 10ï¼šè‡ªå®šä¹‰ç»„ä»¶å®ä¾‹

æˆ‘ä»¬ä¹Ÿå¯ä»¥å®šä¹‰ç±»çš„åŸå‹å¹¶ä¸”åœ¨ä»»ä½•æˆ‘ä»¬å¸Œæœ›çš„åœ°æ–¹ä½¿ç”¨ï¼ŒåŒ…æ‹¬åœ¨è¿”å›çš„ JSX è¾“å‡ºçš„å†…éƒ¨ï¼š

```js
class Button extends React.Component {
  clickCounter = 0;

  handleClick = () => {
    console.log(`Clicked: ${++this.clickCounter}`);
  };

  render() {
    return (
      <button id={this.id} onClick={this.handleClick}>
        {this.props.label}
      </button>
    );
  }
}

// ä½¿ç”¨
ReactDOM.render(<Button label="Save" />, mountNode);
```

ä¾‹ 11ï¼šä½¿ç”¨ç±»çš„å±æ€§ï¼ˆé€šè¿‡å•å‡»ä¿å­˜æŒ‰é’®è¿›è¡Œæµ‹è¯•ï¼‰

æ³¨æ„ä¸Šè¿°ä¾‹ 11 ä¸­çš„å‡ ä»¶äº‹æƒ…

- `handleClick` å‡½æ•°ä½¿ç”¨ JavaScript æ–°æå‡ºçš„ [class-field syntax](https://github.com/tc39/proposal-class-fields) è¯­æ³•ã€‚è¿™ä»ç„¶æ˜¯ stage-2ï¼Œä½†æ˜¯è¿™æ˜¯è®¿é—®ç»„ä»¶å®‰è£…å®ä¾‹ï¼ˆæ„Ÿè°¢ç®­å¤´å‡½æ•°ï¼‰æœ€å¥½çš„é€‰æ‹©ï¼ˆå› ä¸ºå¾ˆå¤šåŸå› ï¼‰ã€‚ç„¶è€Œï¼Œä½ éœ€è¦ä½¿ç”¨ç±»ä¼¼ Babel çš„ç¼–è¯‘å™¨è§£ç ä¸º stage-2ï¼ˆæˆ–è€…ä»…ä»…æ˜¯ç±»å­—æ®µè¯­æ³•ï¼‰æ¥è®©ä¸Šè¿°ä»£ç å·¥ä½œã€‚ jsComplete REPL æœ‰é¢„ç¼–è¯‘åŠŸèƒ½ã€‚

```js
// é”™è¯¯ï¼š
onClick={this.handleClick()}

// æ­£ç¡®ï¼š
onClick={this.handleClick}
```

#### 5 React ä¸­çš„äº‹ä»¶ï¼šä¸¤ä¸ªé‡è¦çš„åŒºåˆ«

å½“å¤„ç† React å…ƒç´ ä¸­çš„äº‹ä»¶æ—¶ï¼Œæˆ‘ä»¬ä¸ DOM API çš„å¤„ç†æ–¹å¼æœ‰ä¸¤ä¸ªéå¸¸é‡è¦çš„åŒºåˆ«ï¼š

- æ‰€æœ‰ React å…ƒç´ å±æ€§ï¼ˆåŒ…æ‹¬äº‹ä»¶ï¼‰éƒ½ä½¿ç”¨ **camelCase** å‘½åï¼Œè€Œä¸æ˜¯ **lowercase**ã€‚ä¾‹å¦‚æ˜¯ `onClick` è€Œä¸æ˜¯ `onclick`ã€‚
- æˆ‘ä»¬å°†å®é™…çš„ JavaScript å‡½æ•°å¼•ç”¨ä¼ é€’ç»™äº‹ä»¶å¤„ç†ç¨‹åºï¼Œè€Œä¸æ˜¯å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚æ˜¯ `onClick={handleClick}` è€Œä¸æ˜¯ `onClick="handleClick"`ã€‚

React ç”¨è‡ªå·±çš„å¯¹è±¡åŒ…è£… DOM å¯¹è±¡äº‹ä»¶ä»¥ä¼˜åŒ–äº‹ä»¶å¤„ç†çš„æ€§èƒ½ï¼Œä½†æ˜¯åœ¨äº‹ä»¶å¤„ç†ç¨‹åºå†…éƒ¨ï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥è®¿é—® DOM å¯¹è±¡ä¸Šæ‰€æœ‰å¯ä»¥è®¿é—®çš„æ–¹æ³•ã€‚React å°†ç»è¿‡åŒ…è£…çš„äº‹ä»¶å¯¹è±¡ä¼ é€’ç»™æ¯ä¸ªè°ƒç”¨å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œä¸ºäº†é˜²æ­¢è¡¨å•æäº¤é»˜è®¤æäº¤æ“ä½œï¼Œä½ å¯ä»¥è¿™æ ·åšï¼š


```js
class Form extends React.Component {
  handleSubmit = (event) => {
    event.preventDefault();
    console.log('Form submitted');
  };

  render() {
    return (
      <form onSubmit={this.handleSubmit}>
        <button type="submit">Submit</button>
      </form>
    );
  }
}

// ä½¿ç”¨
ReactDOM.render(<Form />, mountNode);
```

ä¾‹ 12ï¼šä½¿ç”¨åŒ…è£…è¿‡çš„å¯¹è±¡

#### 6 æ¯ä¸€ä¸ª React ç»„ä»¶éƒ½æœ‰ä¸€ä¸ªæ•…äº‹ï¼šç¬¬ 1 éƒ¨åˆ†

ä»¥ä¸‹ä»…é€‚ç”¨äºç±»ç»„ä»¶ï¼ˆæ‰©å±• `React.Component`ï¼‰ã€‚å‡½æ•°ç»„ä»¶æœ‰ä¸€ä¸ªç¨å¾®ä¸åŒçš„æ•…äº‹ã€‚

1. é¦–å…ˆï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªæ¨¡æ¿æ¥åˆ›å»ºç»„ä»¶ä¸­çš„å…ƒç´ ã€‚
2. ç„¶åï¼Œæˆ‘ä»¬åœ¨æŸå¤„ä½¿ç”¨ Reactã€‚ä¾‹å¦‚ï¼Œåœ¨ `render` å†…éƒ¨è°ƒç”¨å…¶ä»–çš„ç»„ä»¶ï¼Œæˆ–è€…ç›´æ¥ä½¿ç”¨ `ReactDOM.render`ã€‚
3. ç„¶åï¼ŒReact å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡ç„¶åç»™å®ƒè®¾ç½® **props** ç„¶åæˆ‘ä»¬å¯ä»¥é€šè¿‡ `this.props` è®¿é—®ã€‚è¿™äº›å±æ€§éƒ½æ˜¯æˆ‘ä»¬åœ¨ç¬¬ 2 æ­¥ä¼ å…¥çš„ã€‚
4. å› ä¸ºè¿™äº›å…¨éƒ¨éƒ½æ˜¯ JavaScriptï¼Œ`constructor` æ–¹æ³•å°†ä¼šè¢«è°ƒç”¨ï¼ˆå¦‚æœå®šä¹‰çš„è¯ï¼‰ã€‚è¿™æ˜¯æˆ‘ä»¬ç§°ä¹‹ä¸ºçš„ç¬¬ä¸€ä¸ªï¼š**ç»„ä»¶ç”Ÿå‘½å‘¨æœŸæ–¹æ³•**ã€‚
5. æ¥ä¸‹æ¥ React è®¡ç®—æ¸²æŸ“ä¹‹åçš„è¾“å‡ºæ–¹æ³•ï¼ˆè™šæ‹Ÿ DOM èŠ‚ç‚¹ï¼‰ã€‚
6. å› ä¸ºè¿™æ˜¯ React ç¬¬ä¸€æ¬¡æ¸²æŸ“å…ƒç´ ï¼ŒReact å°†ä¼šä¸æµè§ˆå™¨è¿é€šï¼ˆä»£è¡¨æˆ‘ä»¬ä½¿ç”¨ DOM APIï¼‰æ¥æ˜¾ç¤ºå…ƒç´ ã€‚è¿™æ•´ä¸ªè¿‡ç¨‹ç§°ä¸º **mounting**ã€‚
7. æ¥ä¸‹æ¥ React è°ƒç”¨å¦ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œç§°ä¸º `componentDidMount`ã€‚æˆ‘ä»¬å¯ä»¥è¿™æ ·ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œä¾‹å¦‚ï¼šåœ¨ DOM ä¸Šåšä¸€äº›æˆ‘ä»¬ç°åœ¨çŸ¥é“çš„åœ¨æµè§ˆå™¨ä¸­å­˜åœ¨çš„ä¸œè¥¿ã€‚åœ¨æ­¤ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¹‹å‰ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„ DOM éƒ½æ˜¯è™šæ‹Ÿçš„ã€‚
8. ä¸€äº›ç»„ä»¶çš„æ•…äº‹åˆ°æ­¤ç»“æŸï¼Œå…¶ä»–ç»„ä»¶å¾—åˆ°å¸è½½æµè§ˆå™¨ DOM ä¸­çš„å„ç§åŸå› ã€‚åœ¨åä¸€ç§æƒ…å†µå‘ç”Ÿæ—¶ï¼Œä¼šè°ƒç”¨å¦ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸçš„æ–¹æ³•ï¼Œ`componentWillUnmount`ã€‚
9. ä»»ä½• mounted çš„å…ƒç´ çš„**çŠ¶æ€**éƒ½å¯èƒ½ä¼šæ”¹å˜ã€‚è¯¥å…ƒç´ çš„çˆ¶çº§å¯èƒ½ä¼šé‡æ–°æ¸²æŸ“ã€‚æ— è®ºå“ªç§æƒ…å†µï¼Œmounted çš„å…ƒç´ éƒ½å¯èƒ½æ¥æ”¶åˆ°ä¸åŒçš„å±æ€§é›†ã€‚React çš„é­”åŠ›å°±æ˜¯è¿™å„¿ï¼Œæˆ‘ä»¬å®é™…ä¸Šéœ€è¦çš„æ­£æ˜¯ React çš„è¿™ä¸€ç‚¹ï¼åœ¨è¿™ä¸€ç‚¹ä¹‹å‰ï¼Œè¯´å®è¯ï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦ Reactã€‚
10. ç»„ä»·çš„æ•…äº‹è¿˜åœ¨ç»§ç»­ï¼Œä½†æ˜¯åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ç†è§£æˆ‘æ‰€è¯´çš„è¿™ç§**çŠ¶æ€**ã€‚

#### 7 React ç»„ä»¶å¯ä»¥å…·æœ‰ç§æœ‰çŠ¶æ€

ä»¥ä¸‹åªé€‚ç”¨äºç±»ç»„ä»¶ã€‚æˆ‘æœ‰æ²¡æœ‰æåˆ°æœ‰äººå«è¡¨è±¡è€Œå·²çš„éƒ¨ä»¶ **dumb**ï¼Ÿ

çŠ¶æ€ç±»æ˜¯ä»»ä½• React ç±»ç»„ä»¶ä¸­çš„ä¸€ä¸ªç‰¹æ®Šå­—æ®µã€‚React æ£€æµ‹æ¯ä¸€ä¸ªç»„ä»¶çŠ¶æ€çš„å˜åŒ–ï¼Œä½†æ˜¯ä¸ºäº† React æ›´åŠ æœ‰æ•ˆï¼Œæˆ‘ä»¬å¿…é¡»é€šè¿‡ React çš„å¦ä¸€ä¸ª API æ”¹å˜çŠ¶æ€å­—æ®µï¼Œè¿™å°±æ˜¯æˆ‘ä»¬è¦å­¦ä¹ çš„å¦ä¸€ä¸ª API â€”â€” `this.setState`ï¼š


```js
class CounterButton extends React.Component {
  state = {
    clickCounter: 0,
    currentTimestamp: new Date(),
  };

  handleClick = () => {
    this.setState((prevState) => {
     return { clickCounter: prevState.clickCounter + 1 };
    });
  };

  componentDidMount() {
   setInterval(() => {
     this.setState({ currentTimestamp: new Date() })
    }, 1000);
  }

  render() {
    return (
      <div>
        <button onClick={this.handleClick}>Click</button>
        <p>Clicked: {this.state.clickCounter}</p>
        <p>Time: {this.state.currentTimestamp.toLocaleString()}</p>
      </div>
    );
  }
}

// ä½¿ç”¨
ReactDOM.render(<CounterButton />, mountNode);
```

ä¾‹ 13ï¼šsetState çš„ API

è¿™å¯èƒ½æ˜¯æœ€é‡è¦çš„ä¸€ä¸ªä¾‹å­å› ä¸ºè¿™å°†æ˜¯ä½ å®Œå…¨ç†è§£ React åŸºç¡€çŸ¥è¯†çš„æ–¹å¼ã€‚è¿™ä¸ªä¾‹å­ä¹‹åï¼Œè¿˜æœ‰ä¸€äº›å°äº‹æƒ…éœ€è¦å­¦ä¹ ï¼Œä½†ä»é‚£æ—¶èµ·ä¸»è¦æ˜¯ä½ å’Œä½ çš„ JavaScript æŠ€èƒ½ã€‚

è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ä¾‹ 13ï¼Œä»ç±»å¼€å§‹ï¼Œæ€»å…±æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯ä¸€ä¸ªåˆå§‹åŒ–çš„æœ‰åˆå§‹å€¼ä¸º `0` çš„ `clickCounter` å¯¹è±¡å’Œä¸€ä¸ªä» `new Date()` å¼€å§‹çš„ `currentTimestamp`ã€‚

å¦ä¸€ä¸ªç±»æ˜¯ `handleClick` å‡½æ•°ï¼Œåœ¨æ¸²æŸ“æ–¹æ³•ä¸­æˆ‘ä»¬ç»™æŒ‰é’®å…ƒç´ ä¼ å…¥ `onClick` äº‹ä»¶ã€‚é€šè¿‡ä½¿ç”¨ `setState` çš„ `handleClick` æ–¹æ³•ä¿®æ”¹äº†ç»„ä»¶çš„å®ä¾‹çŠ¶æ€ã€‚è¦æ³¨æ„åˆ°è¿™ä¸€ç‚¹ã€‚

å¦ä¸€ä¸ªæˆ‘ä»¬ä¿®æ”¹çŠ¶æ€çš„åœ°æ–¹æ˜¯åœ¨ä¸€ä¸ªå†…éƒ¨çš„å®šæ—¶å™¨ï¼Œå¼€å§‹åœ¨å†…éƒ¨çš„ `componentDidMount` ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚å®ƒæ¯ç§’é’Ÿè°ƒç”¨ä¸€æ¬¡å¹¶ä¸”æ‰§è¡Œå¦ä¸€ä¸ªå‡½æ•°è°ƒç”¨ `this.setState`ã€‚

åœ¨æ¸²æŸ“æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨å…·æœ‰æ­£å¸¸è¯»è¯­æ³•çš„çŠ¶æ€ä¸Šçš„ä¸¤ä¸ªå±æ€§ï¼ˆæ²¡æœ‰ä¸“é—¨çš„ APIï¼‰ã€‚

ç°åœ¨ï¼Œæ³¨æ„æˆ‘ä»¬æ›´æ–°çŠ¶æ€ä½¿ç”¨ä¸¤ç§ä¸åŒçš„æ–¹å¼ï¼š 

1. é€šè¿‡ä¼ å…¥ä¸€ä¸ªå‡½æ•°ç„¶åè¿”å›ä¸€ä¸ªå¯¹è±¡ã€‚æˆ‘ä»¬åœ¨ `handleClick` å‡½æ•°å†…éƒ¨è¿™æ ·åšã€‚
2. é€šè¿‡ä¼ å…¥ä¸€ä¸ªæ­£åˆ™å¯¹è±¡ï¼Œæˆ‘ä»¬åœ¨åœ¨åŒºé—´å›è°ƒä¸­è¿™æ ·åšã€‚

è¿™ä¸¤ç§æ–¹å¼éƒ½æ˜¯å¯ä»¥æ¥å—çš„ï¼Œä½†æ˜¯å½“ä½ åŒæ—¶è¯»å†™çŠ¶æ€æ—¶ï¼Œç¬¬ä¸€ç§æ–¹æ³•æ˜¯é¦–é€‰çš„ï¼ˆæˆ‘ä»¬è¿™æ ·åšï¼‰ã€‚åœ¨åŒºé—´å›è°ƒä¸­ï¼Œæˆ‘ä»¬åªå‘çŠ¶æ€å†™å…¥è€Œä¸è¯»å®ƒã€‚å½“æœ‰é—®é¢˜æ—¶ï¼Œæ€»æ˜¯ä½¿ç”¨ç¬¬ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°è¯­æ³•ã€‚ä¼´éšç€ç«äº‰æ¡ä»¶è¿™æ›´å®‰å…¨ï¼Œå› ä¸º `setstate` å®é™…ä¸Šæ˜¯ä¸€ä¸ªå¼‚æ­¥æ–¹æ³•ã€‚

æˆ‘ä»¬åº”è¯¥æ€æ ·æ›´æ–°çŠ¶æ€å‘¢ï¼Ÿæˆ‘ä»¬è¿”å›ä¸€ä¸ªæœ‰æˆ‘ä»¬æƒ³è¦æ›´æ–°çš„çš„å€¼çš„å¯¹è±¡ã€‚æ³¨æ„ï¼Œåœ¨è°ƒç”¨ `setState` æ—¶ï¼Œæˆ‘ä»¬å…¨éƒ¨éƒ½ä»çŠ¶æ€ä¸­ä¼ å…¥ä¸€ä¸ªå±æ€§æˆ–è€…å…¨éƒ½ä¸ã€‚è¿™å®Œå…¨æ˜¯å¯ä»¥çš„å› ä¸º `setState` å®é™…ä¸Š **åˆå¹¶** äº†ä½ é€šè¿‡å®ƒï¼ˆè¿”å›å€¼çš„å‡½æ•°å‚æ•°ï¼‰ä¸ç°æœ‰çš„çŠ¶æ€ï¼Œæ‰€ä»¥ï¼Œæ²¡æœ‰æŒ‡å®šä¸€ä¸ªå±æ€§åœ¨è°ƒç”¨ `setState` æ—¶æ„å‘³ç€æˆ‘ä»¬ä¸å¸Œæœ›æ”¹å˜å±æ€§ï¼ˆä½†ä¸åˆ é™¤å®ƒï¼‰ã€‚

[![](https://ws4.sinaimg.cn/large/006tNc79gy1fi6sqg2ygbj31320dawg9.jpg)](https://twitter.com/samerbuna/status/870383561983090689)

#### 8 React å°†è¦ååº”

React çš„åå­—æ˜¯ä»çŠ¶æ€æ”¹å˜çš„**ååº”**ä¸­å¾—æ¥çš„ï¼ˆè™½ç„¶æ²¡æœ‰ååº”ï¼Œä½†ä¹Ÿæ˜¯åœ¨ä¸€ä¸ªæ—¶é—´è¡¨ä¸­ï¼‰ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªç¬‘è¯ï¼ŒReact åº”è¯¥è¢«å‘½åä¸º**Schedule**ï¼

ç„¶è€Œï¼Œå½“ä»»ä½•ç»„ä»¶çš„çŠ¶æ€è¢«æ›´æ–°æ—¶ï¼Œæˆ‘ä»¬ç”¨è‚‰çœ¼è§‚å¯Ÿåˆ°çš„æ˜¯å¯¹è¯¥æ›´æ–°çš„ååº”ï¼Œå¹¶è‡ªåŠ¨åæ˜ äº†æµè§ˆå™¨ DOM ä¸­çš„æ›´æ–°ï¼ˆå¦‚æœéœ€è¦çš„è¯ï¼‰ã€‚

å°†æ¸²æŸ“å‡½æ•°çš„è¾“å…¥è§†ä¸ºä¸¤ç§ï¼š
- é€šè¿‡çˆ¶å…ƒç´ ä¼ å…¥çš„å±æ€§
- ä»¥åŠå¯ä»¥éšæ—¶æ›´æ–°çš„å†…éƒ¨ç§æœ‰çŠ¶æ€

å½“æ¸²æŸ“å‡½æ•°çš„è¾“å…¥æ”¹å˜æ—¶ï¼Œè¾“å‡ºå¯èƒ½ä¹Ÿä¼šæ”¹å˜ã€‚

React ä¿å­˜äº†æ¸²æŸ“çš„å†å²è®°å½•ï¼Œå½“å®ƒçœ‹åˆ°ä¸€ä¸ªæ¸²æŸ“ä¸å‰ä¸€ä¸ªä¸åŒæ—¶ï¼Œå®ƒå°†è®¡ç®—å®ƒä»¬ä¹‹é—´çš„å·®å¼‚ï¼Œå¹¶å°†å…¶æœ‰æ•ˆåœ°è½¬æ¢ä¸ºåœ¨ DOM ä¸­æ‰§è¡Œçš„å®é™… DOM æ“ä½œã€‚

#### 9 React æ˜¯ä½ çš„ä»£ç 

æ‚¨å¯ä»¥å°† React çœ‹ä½œæ˜¯æˆ‘ä»¬ç”¨æ¥ä¸æµè§ˆå™¨é€šä¿¡çš„ä»£ç†ã€‚ä»¥ä¸Šé¢çš„å½“å‰æ—¶é—´æˆ³æ˜¾ç¤ºä¸ºä¾‹ã€‚å–ä»£æ¯ä¸€ç§’æˆ‘ä»¬éƒ½éœ€è¦æ‰‹åŠ¨å»æµè§ˆå™¨è°ƒç”¨ DOM API æ“ä½œæ¥æŸ¥æ‰¾å’Œæ›´æ–° `p#timestamp` å…ƒç´ ï¼Œæˆ‘ä»¬ä»…ä»…æ”¹å˜ç»„ä»¶çš„çŠ¶æ€å±æ€§ï¼ŒReact åšçš„å·¥ä½œä»£è¡¨æˆ‘ä»¬ä¸æµè§ˆå™¨çš„é€šä¿¡ã€‚æˆ‘ç›¸ä¿¡è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ React è¿™ä¹ˆå—æ¬¢è¿çš„çœŸæ­£åŸå› ï¼›æˆ‘ä»¬åªæ˜¯ä¸å–œæ¬¢å’Œæµè§ˆå™¨å…ˆç”Ÿè°ˆè¯ï¼ˆä»¥åŠå®ƒæ‰€è¯´çš„ DOM è¯­è¨€çš„å¾ˆå¤šæ–¹è¨€ï¼‰ï¼Œå¹¶ä¸” React è‡ªæ„¿ä¼ é€’ç»™æˆ‘ä»¬ï¼Œå…è´¹çš„ï¼

#### 10 æ¯ä¸€ä¸ª React ç»„ä»¶éƒ½æœ‰ä¸€ä¸ªæ•…äº‹ï¼šç¬¬ 2 éƒ¨åˆ†

ç°åœ¨æˆ‘ä»¬çŸ¥é“äº†ä¸€ä¸ªç»„ä»¶çš„çŠ¶æ€ï¼Œå½“è¯¥çŠ¶æ€å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ¥äº†è§£ä¸€ä¸‹å…³äºè¿™ä¸ªè¿‡ç¨‹çš„æœ€åå‡ ä¸ªæ¦‚å¿µã€‚


1. å½“ç»„ä»¶çš„çŠ¶æ€è¢«æ›´æ–°æ—¶ï¼Œæˆ–è€…å®ƒçš„çˆ¶è¿›ç¨‹å†³å®šæ›´æ”¹å®ƒä¼ é€’ç»™ç»„ä»¶çš„å±æ€§æ—¶ï¼Œç»„ä»¶å¯èƒ½éœ€è¦é‡æ–°æ¸²æŸ“ã€‚
2. å¦‚æœåè€…å‘ç”Ÿï¼ŒReact ä¼šè°ƒç”¨å¦ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼š`componentWillReceiveProps`ã€‚
3. å¦‚æœçŠ¶æ€å¯¹è±¡æˆ–ä¼ é€’çš„å±æ€§æ”¹å˜äº†ï¼ŒReact æœ‰ä¸€ä¸ªé‡è¦çš„å†³å®šè¦åšï¼šç»„ä»¶æ˜¯å¦åº”è¯¥åœ¨ DOM ä¸­æ›´æ–°ï¼Ÿè¿™å°±æ˜¯ä¸ºä»€ä¹ˆå®ƒè°ƒç”¨å¦ä¸€ä¸ªé‡è¦çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³• `shouldComponentUpdate` çš„åŸå›  ã€‚æ­¤æ–¹æ³•æ˜¯ä¸€ä¸ªå®é™…é—®é¢˜ï¼Œå› æ­¤ï¼Œå¦‚æœéœ€è¦è‡ªè¡Œå®šåˆ¶æˆ–ä¼˜åŒ–æ¸²æŸ“è¿‡ç¨‹ï¼Œåˆ™å¿…é¡»é€šè¿‡è¿”å› true æˆ– false æ¥å›ç­”è¿™ä¸ªé—®é¢˜ã€‚
4. å¦‚æœæ²¡æœ‰è‡ªå®šä¹‰ `shouldComponentUpdate`ï¼ŒReact çš„é»˜è®¤äº‹ä»¶åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½èƒ½å¤„ç†çš„å¾ˆå¥½ã€‚
5. é¦–å…ˆï¼Œè¿™ä¸ªæ—¶å€™ä¼šè°ƒç”¨å¦ä¸€ç”Ÿå‘½å‘¨æœŸçš„æ–¹æ³•ï¼š`componentWillUpdate`ã€‚ç„¶åï¼ŒReact å°†è®¡ç®—æ–°æ¸²æŸ“è¿‡çš„è¾“å‡ºï¼Œå¹¶å°†å…¶ä¸æœ€åæ¸²æŸ“çš„è¾“å‡ºè¿›è¡Œå¯¹æ¯”ã€‚
6. å¦‚æœæ¸²æŸ“è¿‡çš„è¾“å‡ºå’Œä¹‹å‰çš„ç›¸åŒï¼ŒReact ä¸è¿›è¡Œå¤„ç†ï¼ˆä¸éœ€è¦å’Œæµè§ˆå™¨å…ˆç”Ÿå¯¹è¯ï¼‰ã€‚
7. å¦‚æœæœ‰ä¸åŒçš„åœ°æ–¹ï¼ŒReact å°†ä¸åŒä¼ è¾¾ç»™æµè§ˆå™¨ï¼Œåƒæˆ‘ä»¬ä¹‹å‰çœ‹åˆ°çš„é‚£æ ·ã€‚
8. åœ¨ä»»ä½•æƒ…å†µä¸‹ï¼Œä¸€æ—¦ä¸€ä¸ªæ›´æ–°ç¨‹åºå‘ç”Ÿäº†ï¼Œæ— è®ºä»¥ä½•ç§æ–¹å¼ï¼ˆå³ä½¿æœ‰ç›¸åŒçš„è¾“å‡ºï¼‰ï¼ŒReact ä¼šè°ƒç”¨æœ€åçš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼š`componentDidUpdate`ã€‚

ç”Ÿå‘½å‘¨æœŸæ–¹æ³•æ˜¯é€ƒç”Ÿèˆ±å£ã€‚å¦‚æœä½ æ²¡æœ‰åšä»€ä¹ˆç‰¹åˆ«çš„äº‹æƒ…ï¼Œä½ å¯ä»¥åœ¨æ²¡æœ‰å®ƒä»¬çš„æƒ…å†µä¸‹åˆ›å»ºå®Œæ•´çš„åº”ç”¨ç¨‹åºã€‚å®ƒä»¬éå¸¸æ–¹ä¾¿åœ°åˆ†æåº”ç”¨ç¨‹åºä¸­æ­£åœ¨å‘ç”Ÿçš„äº‹æƒ…ï¼Œå¹¶è¿›ä¸€æ­¥ä¼˜åŒ– React æ›´æ–°çš„æ€§èƒ½ã€‚

---

ä¿¡ä¸ä¿¡ç”±ä½ ï¼Œé€šè¿‡ä¸Šé¢æ‰€å­¦çš„çŸ¥è¯†ï¼ˆæˆ–éƒ¨åˆ†çŸ¥è¯†ï¼‰ï¼Œä½ å¯ä»¥å¼€å§‹åˆ›å»ºä¸€äº›æœ‰è¶£çš„ React åº”ç”¨ç¨‹åºã€‚å¦‚æœä½ æ¸´æœ›æ›´å¤šï¼Œçœ‹çœ‹æˆ‘çš„ [**Pluralsight çš„ React.js å…¥é—¨è¯¾ç¨‹**](https://www.pluralsight.com/courses/react-js-getting-started?aid=701j0000001heIoAAI&amp;promo=&amp;oid=&amp;utm_source=google&amp;utm_medium=ppc&amp;utm_campaign=US_Dynamic&amp;utm_content=&amp;utm_term=&amp;gclid=CNOAj_2-j9UCFUpNfgod4V0Fdg)ã€‚

**æ„Ÿè°¢é˜…è¯»ã€‚å¦‚æœæ‚¨è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹å‡»åŸæ–‡ä¸­çš„ ğŸ’šã€‚è¯·å…³æ³¨æˆ‘çš„æ›´å¤šå…³äº React.js å’Œ JavaScript çš„æ–‡ç« **ã€‚

---

æˆ‘ [Pluralsight](https://app.pluralsight.com/profile/author/samer-buna) å’Œ [Lynda](https://www.lynda.com/Samer-Buna/7060467-1.html) åˆ›å»ºäº†åœ¨çº¿è¯¾ç¨‹ã€‚æˆ‘æœ€æ–°çš„æ–‡ç« åœ¨[Advanced React.js](https://www.pluralsight.com/courses/reactjs-advanced)ã€ [Advanced Node.js](https://www.pluralsight.com/courses/nodejs-advanced) å’Œ  [Learning Full-stack JavaScript](https://www.lynda.com/Express-js-tutorials/Learning-Full-Stack-JavaScript-Development-MongoDB-Node-React/533304-2.html)ä¸­ã€‚æˆ‘ä¹Ÿåšå°ç»„çš„åœ¨çº¿å’Œç°åœºåŸ¹è®­ï¼Œè¦†ç›–åˆçº§åˆ°é«˜çº§çš„ JavaScriptã€ Node.jsã€ React.jsã€GraphQLã€‚å¦‚æœä½ éœ€è¦ä¸€ä¸ªå¯¼å¸ˆï¼Œ[è¯·æ¥æ‰¾æˆ‘](mailto:samer@jscomplete.com) ã€‚å¦‚æœä½ å¯¹æ­¤ç¯‡æ–‡ç« æˆ–è€…æˆ‘å†™çš„å…¶ä»–ä»»ä½•æ–‡ç« æœ‰ç–‘é—®ï¼Œ[é€šè¿‡è¿™ä¸ªè”ç³»æˆ‘](https://slack.jscomplete.com/)ï¼Œå¹¶ä¸”åœ¨ #questions ä¸­æé—®ã€‚

---

æ„Ÿè°¢å¾ˆå¤šæ£€éªŒå’Œæ”¹è¿›è¿™ç¯‡æ–‡ç« çš„è¯»è€…ï¼ŒÅukasz Szewczakã€Tim Broylesã€ Kyle Holdenã€ Robert Axelseã€ Bruce Laneã€Irvin Waldman å’Œ Amie Wilt.

ç‰¹åˆ«è¦æ„Ÿè°¢â€œæƒŠäººçš„â€ [Amie](https://www.linkedin.com/in/amiewilt/)ï¼Œç»éªŒæ˜¯ä¸€ä¸ªå®é™…çš„ [Unicorn](https://medium.com/@katherinemartinez/the-unicorn-hybrid-designer-developer-5e89607d5fe0)ã€‚è°¢è°¢ä½ æ‰€æœ‰çš„å¸®åŠ©ï¼ŒAnimeï¼ŒçœŸçš„éå¸¸æ„Ÿè°¢ä½ ã€‚

---

> [æ˜é‡‘ç¿»è¯‘è®¡åˆ’](https://github.com/xitu/gold-miner) æ˜¯ä¸€ä¸ªç¿»è¯‘ä¼˜è´¨äº’è”ç½‘æŠ€æœ¯æ–‡ç« çš„ç¤¾åŒºï¼Œæ–‡ç« æ¥æºä¸º [æ˜é‡‘](https://juejin.im) ä¸Šçš„è‹±æ–‡åˆ†äº«æ–‡ç« ã€‚å†…å®¹è¦†ç›– [Android](https://github.com/xitu/gold-miner#android)ã€[iOS](https://github.com/xitu/gold-miner#ios)ã€[React](https://github.com/xitu/gold-miner#react)ã€[å‰ç«¯](https://github.com/xitu/gold-miner#å‰ç«¯)ã€[åç«¯](https://github.com/xitu/gold-miner#åç«¯)ã€[äº§å“](https://github.com/xitu/gold-miner#äº§å“)ã€[è®¾è®¡](https://github.com/xitu/gold-miner#è®¾è®¡) ç­‰é¢†åŸŸï¼Œæƒ³è¦æŸ¥çœ‹æ›´å¤šä¼˜è´¨è¯‘æ–‡è¯·æŒç»­å…³æ³¨ [æ˜é‡‘ç¿»è¯‘è®¡åˆ’](https://github.com/xitu/gold-miner)ã€[å®˜æ–¹å¾®åš](http://weibo.com/juejinfanyi)ã€[çŸ¥ä¹ä¸“æ ](https://zhuanlan.zhihu.com/juejinfanyi)ã€‚
