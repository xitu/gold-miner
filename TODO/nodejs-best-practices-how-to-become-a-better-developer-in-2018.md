> * åŸæ–‡åœ°å€ï¼š[Node.js Best Practices - How to become a better Node.js developer in 2018](https://nemethgergely.com/nodejs-best-practices-how-to-become-a-better-developer-in-2018/)
> * åŸæ–‡ä½œè€…ï¼š[GERGELY NEMETH](https://nemethgergely.com/)
> * è¯‘æ–‡å‡ºè‡ªï¼š[æ˜é‡‘ç¿»è¯‘è®¡åˆ’](https://github.com/xitu/gold-miner)
> * æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š[https://github.com/xitu/gold-miner/blob/master/TODO/nodejs-best-practices-how-to-become-a-better-developer-in-2018.md](https://github.com/xitu/gold-miner/blob/master/TODO/nodejs-best-practices-how-to-become-a-better-developer-in-2018.md)
> * è¯‘è€…ï¼š[Yong Li](https://github.com/NeilLi1992)
> * æ ¡å¯¹è€…ï¼š[guoyang](https://github.com/gy134340) [moods445](https://github.com/moods445)

# Node.js æœ€ä½³å®è·µ â€”â€” å¦‚ä½•åœ¨ 2018 å¹´æˆä¸ºæ›´å¥½çš„ Node.js å¼€å‘è€…

åœ¨è¿‡å»ä¸¤å¹´ä¸­ï¼Œæ¯å¹´å†™ä¸€ç¯‡å…³äºæ¥å¹´å¦‚ä½•æˆä¸ºæ›´å¥½çš„ Node.js å¼€å‘è€…çš„å»ºè®®å·²ç»æˆäº†æˆ‘è‡ªå·±çš„ä¼ ç»Ÿã€‚ä»Šå¹´ä¹Ÿä¸ä¾‹å¤–ï¼ğŸ¤—

å¦‚æœä½ å¯¹æˆ‘ä¹‹å‰çš„æ–°å¹´å»ºè®®æ„Ÿå…´è¶£ï¼Œä½ å¯ä»¥åœ¨ RisingStack åšå®¢ä¸Šé˜…è¯»ï¼š

* [å¦‚ä½•åœ¨ 2016 å¹´æˆä¸ºæ›´å¥½çš„ Node.js å¼€å‘è€…](https://blog.risingstack.com/how-to-become-a-better-node-js-developer-in-2016/)
* [å¦‚ä½•åœ¨ 2017 å¹´æˆä¸ºæ›´å¥½çš„å¼€å‘è€…](https://blog.risingstack.com/node-js-best-practices-2017/)

è¯ä¸å¤šè¯´ï¼Œä¸€èµ·æ¥çœ‹ 2018 å¹´çš„å»ºè®®ï¼

## é‡‡ç”¨ `async-await`

éšç€ Node.js 8 çš„å‘å¸ƒï¼Œ`async` å‡½æ•°å·²ç»æ™®éå¯ç”¨äº†ã€‚æœ‰äº† `async` å‡½æ•°çš„å­˜åœ¨ï¼Œä½ å¯ä»¥æ›¿æ¢æ‰å›è°ƒï¼Œå†™å‡ºè¯»èµ·æ¥å’ŒåŒæ­¥ä»£ç ä¸€æ ·çš„å¼‚æ­¥ä»£ç ã€‚

ä½†ä»€ä¹ˆæ˜¯ `async` å‡½æ•°ï¼Ÿè®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹ [Node.js Async å‡½æ•°æœ€ä½³å®è·µ](https://nemethgergely.com/async-function-best-practices/) ä¸€æ–‡ï¼š

`async` å‡½æ•°å¯ä»¥è®©ä½ å†™å‡ºè¯»èµ·æ¥åƒæ˜¯åŒæ­¥ä»£ç çš„ï¼Œä½†å®é™…åŸºäº `Promise` çš„ä»£ç ã€‚ä¸€æ—¦ä½ ä½¿ç”¨äº† `async` å…³é”®å­—æ¥å®šä¹‰å‡½æ•°ï¼Œä½ å°±å¯ä»¥åœ¨å‡½æ•°ä½“å†…ä½¿ç”¨ `await` å…³é”®å­—ã€‚`async` å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ª `Promise`ã€‚å½“ `async` å‡½æ•°ä½“ä¸­è¿”å›ä¸€ä¸ªå€¼æ—¶ï¼Œè¯¥ `Promise` å®Œæˆï¼ˆfulfilledï¼‰ã€‚å½“ `async` å‡½æ•°æŠ›å‡ºé”™è¯¯æ—¶ï¼Œè¯¥ `Promise` å¤±è´¥ï¼ˆrejectedï¼‰ã€‚

`await` å…³é”®å­—å¯ä»¥ç”¨æ¥ç­‰å¾…ä¸€ä¸ª `Promise` å®Œæˆå¹¶ä¸”è¿”å›ç»“æœå€¼ã€‚å¦‚æœä¼ ç»™ `await` å…³é”®å­—çš„å€¼ä¸æ˜¯ä¸€ä¸ª `Promise`ï¼Œå®ƒä¼šå°†å…¶è½¬æ¢æˆä¸€ä¸ªå·²å®Œæˆçš„ `Promise`ã€‚

å¦‚æœä½ æƒ³æŒæ¡ `async` å‡½æ•°ï¼Œæˆ‘æ¨èä½ æµè§ˆè¿™äº›èµ„æºï¼š

* [Learning to throw again](https://hueniverse.com/learning-to-throw-again-79b498504d28)
* [Catching without awating](https://hueniverse.com/catching-without-awaiting-b2cb7df45790)
* [Node.js async function best practices](https://nemethgergely.com/async-function-best-practices/)

## è®©ä½ çš„åº”ç”¨ä¼˜é›…åœ°ä¸­æ­¢

å½“ä½ éƒ¨ç½²åº”ç”¨çš„æ–°ç‰ˆæœ¬æ—¶ï¼Œå¿…é¡»æ›´æ¢æ—§ç‰ˆæœ¬ã€‚ä½ ä½¿ç”¨çš„ï¼Œ**ä¸ç®¡æ˜¯ Heroku, Kubernetes, supervisor è¿˜æ˜¯ä»»ä½•å…¶å®ƒçš„**è¿›ç¨‹ç®¡ç†å™¨ï¼Œä¼šé¦–å…ˆç»™åº”ç”¨å‘é€ä¸€ä¸ª `SIGTERM` ä¿¡å·ï¼Œæ¥é€šçŸ¥å®ƒå³å°†è¢«ä¸­æ­¢ã€‚ä¸€æ—¦åº”ç”¨å¾—åˆ°äº†è¯¥ä¿¡å·ï¼Œå®ƒåº”è¯¥**åœæ­¢æ¥å—æ–°çš„è¯·æ±‚ï¼Œå®Œæˆæ‰€æœ‰æ­£åœ¨å¤„ç†ä¸­çš„è¯·æ±‚ï¼Œå¹¶ä¸”æ¸…ç†å®ƒä½¿ç”¨çš„èµ„æº**ã€‚èµ„æºé€šå¸¸åŒ…å«äº†æ•°æ®åº“è¿æ¥å’Œæ–‡ä»¶é”ã€‚

ä¸ºäº†è®©è¿™ä¸€è¿‡ç¨‹æ›´ç®€å•ï¼Œæˆ‘ä»¬åœ¨ GoDaddy ä¸Šå‘å¸ƒäº†åä¸º [terminus](https://github.com/godaddy/terminus) çš„å¼€æºæ¨¡å—ï¼Œæ¥å¸®åŠ©ä½ çš„åº”ç”¨å®ç°ä¼˜é›…ä¸­æ­¢ã€‚[ç°åœ¨å°±æ¥çœ‹çœ‹ â˜ºï¸](https://github.com/godaddy/terminus)

## åœ¨å…¬å¸å†…é‡‡ç”¨ç›¸åŒçš„é£æ ¼æŒ‡å—

åœ¨ä¸€ä¸ªæœ‰ä¸Šç™¾äººå¼€å‘å›¢é˜Ÿçš„å…¬å¸ä¸­é‡‡ç”¨é£æ ¼æŒ‡å—æ˜¯å¾ˆæœ‰æŒ‘æˆ˜æ€§çš„ â€”â€” è®©æ¯ä¸ªäººéƒ½è®¤å¯åŒä¸€å¥—è§„åˆ™ç®€ç›´éš¾å¦‚ç™»å¤©ã€‚

æ•æˆ‘ç›´è¨€ï¼šä½ æ°¸è¿œæ— æ³•è®©ä¸Šç™¾ä¸ªå¼€å‘è€…è®¤å¯åŒä¸€ç»„å‡†åˆ™ï¼Œå³ä½¿è¿™èƒ½å¸¦æ¥æ˜¾è€Œæ˜“è§çš„æ”¶ç›Šï¼Œè­¬å¦‚è®©å›¢é˜Ÿæ›´å¿«åœ°åœ¨é¡¹ç›®é—´åˆ‡æ¢ï¼Œè€Œæ— éœ€è´¹æ—¶è´¹åŠ›æ¥ä¹ æƒ¯ä¸€å¥—æ–°çš„ï¼ˆå³ä½¿åªæœ‰ä¸€ç‚¹å„¿ä¸åŒï¼‰ä»£ç ç¼–å†™é£æ ¼ã€‚

å¦‚æœä½ æ­£æ˜¯å·¥ä½œåœ¨è¿™ç§å›¢é˜Ÿæ°›å›´ä¸­ï¼Œæˆ‘å‘ç°æœ€å¥½çš„åŠæ³•æ˜¯ä¿¡ä»»æŸä½ç»éªŒä¸°å¯Œçš„ç¨‹åºå‘˜ï¼Œå’Œå…¶ä»–äººå…±åŒåŠªåŠ›æ¥å†³å®šé£æ ¼æŒ‡å—åŒ…å«å“ªäº›å‡†åˆ™ï¼Œä½†ä»–è¦æœ‰æœ€ç»ˆå†³å®šæƒã€‚åœ¨æ‰€æœ‰äººéƒ½èƒ½éµå¾ªåŒä¸€å¥—å‡†åˆ™ä¹‹å‰ï¼Œè¯¥å‡†åˆ™çš„å…·ä½“å†…å®¹å¹¶ä¸é‡è¦ï¼ˆæˆ‘ä¸æƒ³å¼•å‘å…³äºåˆ†å·çš„äº‰åµï¼‰ã€‚é‡è¦çš„æ˜¯å¿…é¡»åœ¨æŸä¸€åˆ»æœ‰æ‰€å†³å®šã€‚

## æŠŠå®‰å…¨å½“åšå¿…å¤‡æ¡ä»¶

æˆ‘ä»¬çœ‹åˆ°è¶Šæ¥è¶Šå¤šçš„å…¬å¸è¢«åˆ—åœ¨ [haveibeenpwned](https://haveibeenpwned.com/) ä¸Š â€”â€” æˆ‘æ‰“èµŒä½ ä¸æƒ³æˆä¸ºä¸‹ä¸€ä¸ªã€‚å½“ä½ å‘ä½ çš„ç”¨æˆ·å‘å¸ƒä¸€æ®µæ–°ä»£ç çš„æ—¶å€™ï¼Œä»£ç å®¡æ ¸åº”è¯¥åŒ…å«å®‰å…¨é¢†åŸŸçš„ä¸“å®¶ã€‚å¦‚æœä½ å…¬å¸å†…æ²¡æœ‰è¿™æ ·çš„äººæ‰ï¼Œæˆ–è€…ä»–ä»¬éå¸¸éå¸¸å¿™ï¼Œä¸€ä¸ªå¾ˆå¥½çš„è§£å†³åŠæ³•æ˜¯å’Œç±»ä¼¼ [Lift Security](https://liftsecurity.io/reviews/) è¿™æ ·çš„å…¬å¸åˆä½œã€‚

è€Œä½ ä½œä¸ºä¸€åå¼€å‘è€…ï¼ŒåŒæ ·åº”è¯¥åŠªåŠ›æ›´æ–°ä½ çš„å®‰å…¨çŸ¥è¯†ã€‚ä¸ºæ­¤ï¼Œæˆ‘æ¨èä½ é˜…è¯»è¿™äº›ææ–™ï¼š

* [Node.js å®‰å…¨æ£€æŸ¥æ¸…å•](https://blog.risingstack.com/node-js-security-checklist/)
* [ã€Œå¼€æ”¾ç½‘ç»œåº”ç”¨å®‰å…¨é¡¹ç›®ã€ç½‘ç«™](https://www.owasp.org/index.php/Main_Page)
* [Snyk åšå®¢](https://snyk.io/blog/)

## åœ¨è§é¢ä¼šæˆ–ä¼šè®®ä¸Šæ¼”è®²

å¦ä¸€ä¸ªæˆä¸ºæ›´å¥½çš„å¼€å‘è€…ï¼Œç”šè‡³æ›´å¥½åœ°å­¦ä¼šè¡¨è¾¾è‡ªå·±çš„æ–¹æ³•ï¼Œå°±æ˜¯åœ¨è§é¢ä¼šæˆ–è€…ä¼šè®®ä¸Šæ¼”è®²ã€‚å¦‚æœä½ ä»æœªè¯•è¿‡ï¼Œæˆ‘æ¨èå…ˆä»ä¸€ä¸ªæœ¬åœ°çš„è§é¢ä¼šå¼€å§‹ï¼Œå†å»å°è¯•ç”³è¯·å…¨å›½çš„æˆ–è€…å›½é™…çš„ä¼šè®®ã€‚

æˆ‘æ˜ç™½å½“ä¼—æ¼”è®²ä¼šå¾ˆéš¾ã€‚å½“æˆ‘å‡†å¤‡æˆ‘çš„ç¬¬ä¸€æ¬¡æ¼”è¯´æ—¶ï¼Œ[Speaking.io](http://speaking.io/) å¸®äº†æˆ‘ä¸å°‘å¿™ï¼Œæˆ‘ä¹Ÿæ¨èä½ å»çœ‹çœ‹ã€‚å¦‚æœä½ æ­£åœ¨å‡†å¤‡ä½ çš„ç¬¬ä¸€æ¬¡æ¼”è¯´ï¼Œå¹¶ä¸”æƒ³è¦ä¸€äº›åé¦ˆçš„è¯ï¼Œä½ å¯ä»¥åœ¨ [Twitter](https://twitter.com/nthgergo) ä¸Šæ‰¾æˆ‘è°ˆè°ˆï¼Œæˆ‘å¾ˆä¹æ„å¸®å¿™ï¼

ä¸€æ—¦ä½ æœ‰äº†ä¸€ä¸ªæƒ³è¦åœ¨ä¼šè®®ä¸Šåˆ†äº«çš„ä¸»é¢˜ï¼Œä½ å¯ä»¥åœ¨ Github ä¸ŠæŸ¥çœ‹åˆ° [2018 Web ä¼šè®®](https://github.com/asciidisco/web-conferences-2018/blob/master/README.md) å¾æ–‡é›†åˆï¼Œè¿™å¤ªæ£’äº†ï¼

## ç›´æ¥ä½¿ç”¨æ–°çš„æµè§ˆå™¨ API ç¼–å†™æ¨¡å—

ä¹æœˆæ—¶ [Mikeal](https://medium.com/@mikeal) åœ¨ [Modern Modules](https://medium.com/@mikeal/modern-modules-d99b6867b8f1) ä¸Šå‘å¸ƒäº†ä¸€ç¯‡å¾ˆå¥½çš„æ–‡ç« ã€‚å…¶ä¸­æˆ‘æœ€å–œæ¬¢çš„ä¸€ä»¶äº‹ï¼Œå°±æ˜¯ä½¿ç”¨æµè§ˆå™¨ API æ¥ç¼–å†™æ¨¡å—ï¼Œå½“å¿…è¦æ—¶å¡«è¡¥ï¼ˆpolyfillï¼‰Node.jsã€‚ç”±æ­¤è€Œæ¥çš„æ˜¾è‘—ä¼˜åŠ¿å°±æ˜¯ä½ å¯ä»¥å°†æ›´å°çš„ JavaScript ä»£ç å‘å¸ƒè¿›æµè§ˆå™¨ä¸­ï¼ˆå¹¶ä¸”è®©é¡µé¢åŠ è½½å¾—æ›´å¿«ï¼‰ã€‚å¦ä¸€æ–¹é¢ï¼Œæ²¡äººä¼šåœ¨æ„ä½ çš„åç«¯ä¾èµ–æ˜¯ä¸æ˜¯å¤ªè¿‡ç¹é‡ã€‚

## é‡‡çº³åº”ç”¨å¼€å‘çš„ 12-Factors æ³•åˆ™

åº”ç”¨å¼€å‘çš„ 12-Factors åŸåˆ™ï¼Œæè¿°äº†ç½‘ç»œåº”ç”¨åº”å½“å¦‚ä½•ç¼–å†™çš„æœ€ä½³å®è·µï¼Œå› æ­¤å®ƒä¹Ÿå‡ºç°åœ¨ä»Šå¹´æˆ‘çš„å»ºè®®åˆ—è¡¨ä¸­äº†ã€‚

éšç€ Kubernetes å’Œå…¶å®ƒç¼–æ’å¼•æ“çš„ä½¿ç”¨ç‡ä¸æ–­æå‡ï¼Œéµå¾ª 12-Factors æ³•åˆ™å˜å¾—è¶Šæ¥è¶Šé‡è¦ã€‚å®ƒä»¬æ¶µç›–äº†ä»¥ä¸‹é¢†åŸŸï¼š

1. [ä¸€ä»½åŸºå‡†ä»£ç ï¼Œå¤šä»½éƒ¨ç½²](http://12factor.net/codebase)
2. [æ˜¾ç¤ºå£°æ˜å’Œåˆ†ç¦»ä¾èµ–å…³ç³»](http://12factor.net/dependencies)
3. [åœ¨ç¯å¢ƒä¸­å­˜å‚¨é…ç½®](http://12factor.net/config)
4. [æŠŠåç«¯æœåŠ¡å½“åšé™„åŠ èµ„æº](http://12factor.net/backing-services)
5. [ä¸¥æ ¼åˆ†ç¦»æ„å»ºå’Œè¿è¡Œ](http://12factor.net/build-release-run)
6. [ä»¥ä¸€ä¸ªæˆ–å¤šä¸ªæ— çŠ¶æ€è¿›ç¨‹è¿è¡Œåº”ç”¨](http://12factor.net/processes)
7. [é€šè¿‡ç«¯å£ç»‘å®šæä¾›æœåŠ¡](http://12factor.net/port-binding)
8. [é€šè¿‡è¿›ç¨‹æ¨¡å‹è¿›è¡Œæ‰©å±•](http://12factor.net/concurrency)
9. [å¿«é€Ÿå¯åŠ¨å’Œä¼˜é›…ä¸­æ­¢å¯æœ€å¤§åŒ–å¥å£®æ€§](http://12factor.net/disposability)
10. [å°½å¯èƒ½åœ°ä¿æŒå¼€å‘ã€é¢„å‘å¸ƒã€çº¿ä¸Šç¯å¢ƒç›¸åŒ](http://12factor.net/dev-prod-parity)
11. [æŠŠæ—¥å¿—å½“åšäº‹ä»¶æµ](http://12factor.net/logs)
12. [åå°ç®¡ç†ä»»åŠ¡å½“åšä¸€æ¬¡æ€§è¿›ç¨‹è¿è¡Œ](http://12factor.net/admin-processes)

## å­¦ä¹ æ–°çš„ ECMASCript ç‰¹æ€§

ä¸€äº›æ–°çš„ ECMAScript ç‰¹æ€§å¯ä»¥æ˜¾è‘—æå‡ä½ çš„æ•ˆç‡ã€‚å®ƒä»¬å¯ä»¥å¸®ä½ å†™å‡ºä¸è¨€è‡ªæ˜çš„æ¸…æ™°ä»£ç ã€‚å…¶ä¸­æˆ‘æœ€çˆ±çš„ç‰¹æ€§æœ‰ï¼ˆ**è€å®è¯´å®ƒä»¬ä¸æ˜¯éå¸¸æ–°äº†**ï¼‰ï¼š

* [æ‰©å±•è¯­æ³•](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_operator)
* [å‰©ä½™å‚æ•°](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parameters)
* [è§£æ„](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment)
* [Async å‡½æ•°](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function)

å¦‚æœä½ æƒ³çŸ¥é“æ–°çš„ ECMAScript ç‰¹æ€§çš„å®Œæ•´å†…å®¹ï¼Œæˆ‘æ¨èé˜…è¯»è¿™æœ¬ä¹¦ [ES6 & Beyond](https://github.com/getify/You-Dont-Know-JS/blob/master/es6%20&%20beyond/README.md#you-dont-know-js-es6--beyond)ã€‚

* * *

ä½ æƒ³åœ¨è¿™ä»½åˆ—è¡¨ä¸­åŠ å…¥åˆ«çš„å»ºè®®å—ï¼Ÿè¯·åœ¨ç•™è¨€ä¸­å‘Šè¯‰æˆ‘ã€‚


---

> [æ˜é‡‘ç¿»è¯‘è®¡åˆ’](https://github.com/xitu/gold-miner) æ˜¯ä¸€ä¸ªç¿»è¯‘ä¼˜è´¨äº’è”ç½‘æŠ€æœ¯æ–‡ç« çš„ç¤¾åŒºï¼Œæ–‡ç« æ¥æºä¸º [æ˜é‡‘](https://juejin.im) ä¸Šçš„è‹±æ–‡åˆ†äº«æ–‡ç« ã€‚å†…å®¹è¦†ç›– [Android](https://github.com/xitu/gold-miner#android)ã€[iOS](https://github.com/xitu/gold-miner#ios)ã€[å‰ç«¯](https://github.com/xitu/gold-miner#å‰ç«¯)ã€[åç«¯](https://github.com/xitu/gold-miner#åç«¯)ã€[åŒºå—é“¾](https://github.com/xitu/gold-miner#åŒºå—é“¾)ã€[äº§å“](https://github.com/xitu/gold-miner#äº§å“)ã€[è®¾è®¡](https://github.com/xitu/gold-miner#è®¾è®¡)ã€[äººå·¥æ™ºèƒ½](https://github.com/xitu/gold-miner#äººå·¥æ™ºèƒ½)ç­‰é¢†åŸŸï¼Œæƒ³è¦æŸ¥çœ‹æ›´å¤šä¼˜è´¨è¯‘æ–‡è¯·æŒç»­å…³æ³¨ [æ˜é‡‘ç¿»è¯‘è®¡åˆ’](https://github.com/xitu/gold-miner)ã€[å®˜æ–¹å¾®åš](http://weibo.com/juejinfanyi)ã€[çŸ¥ä¹ä¸“æ ](https://zhuanlan.zhihu.com/juejinfanyi)ã€‚
