> * åŸæ–‡åœ°å€ï¼š[How I Increased Our Web Performance by 422%](https://blog.bitsrc.io/how-i-increased-our-web-performance-by-422-84e4997132ff)
> * åŸæ–‡ä½œè€…ï¼š[Perry Martijena](https://medium.com/@thisisnotperry)
> * è¯‘æ–‡å‡ºè‡ªï¼š[æ˜é‡‘ç¿»è¯‘è®¡åˆ’](https://github.com/xitu/gold-miner)
> * æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š[https://github.com/xitu/gold-miner/blob/master/article/2020/how-i-increased-our-web-performance-by-422.md](https://github.com/xitu/gold-miner/blob/master/article/2020/how-i-increased-our-web-performance-by-422.md)
> * è¯‘è€…ï¼š[Badd](https://juejin.im/user/5b0f6d4b6fb9a009e405dda1)
> * æ ¡å¯¹è€…ï¼š[hansonfang](https://github.com/hansonfang)ã€[IAMSHENSH](https://github.com/IAMSHENSH)

# çœ‹æˆ‘å¦‚ä½•æŠŠç½‘ç«™æ€§èƒ½æå‡ 422%

![Our application nowâ€¦](https://cdn-images-1.medium.com/max/5200/0*jDO8rVIDpzTq0vGx.jpeg)

æˆ‘æŠŠç½‘ç«™æ€§èƒ½æå‡äº† 422%ã€‚æ²¡æƒ³åˆ°ï¼Œå•å‡­æ”¹è‰¯æ•°æ®ç»“æ„å’Œå…¶ä»–ä¸€äº›æŠ€å·§å°±èƒ½è¾¾åˆ°è¿™ä¹ˆå¥½çš„æ•ˆæœã€‚

åœ¨è¿‘æœŸçš„å·¥ä½œä¸­ï¼Œæˆ‘é‡æ–°è®¾è®¡äº†ç½‘ç«™çš„ç”¨æˆ·ç•Œé¢ã€‚æˆ‘ä»¬çš„ç½‘ç«™åŸºäº AngularJS å¼€å‘ï¼Œè€Œä¸”ç”±äºå®ƒå·²ç»åœ¨çº¿ä¸Šè¿è¡Œäº† 4 å¹´ï¼Œæ‰€ä»¥å…¶ä¸­å¤§éƒ¨åˆ†åº”ç”¨éƒ½æ˜¯ç”¨ ES5 å¼€å‘çš„ã€‚ç½‘ç«™å­˜åœ¨ä¸€äº›æ€§èƒ½é—®é¢˜ï¼ŒåŒ…æ‹¬æ›´æ–°ç¼“æ…¢ã€åŠ è½½æ—¶é—´é•¿ï¼Œå’Œä¸€äº›æ¥è‡ª jQuery ä¸»å®°å“åº”å¼å¸ƒå±€å¹´ä»£çš„è¿‡æ—¶ç¬¨é‡çš„ä»£ç ã€‚æˆ‘æ‰¿æ‹…äº†è¿™äº›ä¼˜åŒ–å·¥ä½œï¼Œå¹¶æƒ³ä¸å¤§å®¶åˆ†äº«åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æˆ‘å­¦åˆ°çš„ 6 ä¸ªæœ€é‡è¦çš„ç»éªŒã€‚

## 1) å­¦ä¹ æ•°æ®ç»“æ„å’Œç®—æ³•

JavaScript å·²ç»ä¸å†æ˜¯ä¸€ä¸ªå¼±å°çš„è¯­è¨€äº†ã€‚ä½ æƒ³è¦çš„æ¯ä¸ªæ•°æ®ç»“æ„å®ç°å®ƒéƒ½æœ‰ï¼Œyin'yæ€§èƒ½å¯¹å‰ç«¯æ¥è¯´å¾ˆé‡è¦ã€‚å†³å®š Web åº”ç”¨çš„æ€§èƒ½çš„å› ç´ ä¸­ï¼Œæœ‰ 45% æ¥è‡ªå‰ç«¯ï¼ˆæ¥è‡ª Steve Souders çš„ã€Š[High Performance Web Sites: Essential Knowledge For Front-End Engineers](http://shop.oreilly.com/product/9780596529307.do)ã€‹ï¼‰ã€‚ä½ èº«è¾¹çš„åç«¯å¼€å‘è€…å¾ˆæœ‰å¯èƒ½åœ¨ç”¨æ•°æ®ç»“æ„å’Œç®—æ³•ï¼Œæ‰€ä»¥ä½ ä¹Ÿåº”è¯¥ç”¨å¾—ä¸Šå®ƒä»¬ã€‚ä½¿ç”¨è‰¯å¥½çš„ã€å¯æ‰©å±•çš„æ•°æ®ç»“æ„å’Œç®—æ³•æå…¶é‡è¦ï¼Œè¿™æ ·ä½ çš„åº”ç”¨ä¹Ÿæ˜¯å¯æ‰©å±•çš„ã€‚

æœ€æœ‰ç”¨çš„æ•°æ®ç»“æ„å°±æ˜¯ [ES6 Map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map) å’Œæ ˆï¼Œå®ƒä»¬æœ‰æ•ˆåœ°å¸®æˆ‘æå‡äº†ç½‘ç«™æ€§èƒ½ã€‚å“ˆå¸Œ Map ç®€ç›´å¤ªä»¤äººæƒŠè‰³äº†ï¼Œå®ƒåº”è¯¥è¢«ç”¨äºé¢‘ç¹çš„è®¿é—®æŸä¸ªé”®çš„åœ°æ–¹ã€‚åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œæˆ‘ä»¬éœ€è¦èŠ±å¤§é‡æ—¶é—´æ£€æŸ¥æ˜¾ç¤ºæ¡ä»¶ï¼ˆæ¯”å¦‚é‰´æƒï¼‰ã€‚æˆ‘å‘ç°ç¼“å­˜æ•°æ®æ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ¯ä¸ªé¡µé¢ä¸­éœ€è¦é€šè¿‡æ•°ç»„å¤šæ¬¡è®¿é—®çš„æ•°æ®ç¼“å­˜åˆ° Map ä¸­ã€‚è¿™ä¸ªä¼˜åŒ–èƒ½æŠŠæ—¶é—´å¤æ‚åº¦ä» O(n) é™åˆ° O(1)ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸æ˜¾è‘—çš„æ€§èƒ½æå‡ã€‚å †æ ˆå¯¹äºåƒå‘å¯¼ï¼ˆWizardï¼‰è¿™æ ·ç»å¸¸éœ€è¦æ‰§è¡Œâ€œæ’¤æ¶ˆâ€æ“ä½œçš„åœºæ™¯éå¸¸æœ‰ç”¨ã€‚é€’å½’ä¹Ÿæ˜¯å¿…çŸ¥å¿…ä¼šçš„æ¦‚å¿µï¼Œç‰¹åˆ«æ˜¯å¤„ç†å¯¹è±¡æ—¶ã€‚ä½¿ç”¨åˆ†è€Œæ²»ä¹‹ç­–ç•¥ï¼Œæˆ‘ç”¨è‰¯å¥½çš„é€’å½’å‡½æ•°ï¼ˆå…·æœ‰å›ºå®šçš„åŸºçº¿æ¡ä»¶ï¼‰æ›¿æ¢äº†å¤§é‡ç¼“æ…¢çš„å‡½æ•°ã€‚

## 2) ç¼“å­˜

æ— è®ºä»»ä½•åˆ—è¡¨æ•°å€¼æˆ–æ•°æ®ï¼Œåªè¦æ˜¯éœ€è¦å¤šæ¬¡è®¿é—®ä¸”ä¸ç»å¸¸æ”¹å˜ï¼Œä½ éƒ½åº”è¯¥ç¼“å­˜èµ·æ¥ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘æŠŠè¿™äº›æ•°æ®å­˜åˆ°ä¼šè¯å­˜å‚¨ï¼ˆSession Storageï¼‰ä¸­ã€‚è™½è¯´æœ¬åœ°å­˜å‚¨åœ¨ä¸€äº›åœºæ™¯ä¸­æ›´æœ‰ç”¨ï¼Œä½†å¯¹äºæˆ‘ç¼“å­˜çš„å¤§å¤šæ•°æ•°æ®æ¥è¯´ï¼Œæˆ‘å¸Œæœ›å½“ç”¨æˆ·çš„ä¼šè¯ä¸­æ­¢æ—¶å°±åˆ·æ–°å®ƒä»¬ã€‚ç¼“å­˜æ•°æ®ä¸€å®šè¦è°¨æ…ã€‚ä¾‹å¦‚ï¼ŒæŠŠæ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚ç”¨æˆ·åã€ä¸Šä¸ªç”¨æˆ·çš„éƒ¨åˆ†æ¶ˆæ¯ç­‰ï¼‰å­˜åˆ°æœ¬åœ°å­˜å‚¨ä¸­æ˜¯ä¸€ä¸ªæä¸ºç³Ÿç³•çš„åšæ³•ï¼Œå› ä¸ºä»»ä½•ä½¿ç”¨è¿™å°ç”µè„‘çš„äººéƒ½èƒ½å¾—åˆ°å®ƒä»¬ã€‚å¦‚æœæŸäº›æ•°æ®ä¸éšç€ä¼šè¯çš„æ”¹å˜è€Œæ”¹å˜ï¼Œä¸”éœ€è¦ç»å¸¸è®¿é—®ï¼Œé‚£å°±æœæ–­ç¼“å­˜ä¹‹ï¼

## 3) å‡å°‘ HTTP è¯·æ±‚

å‡å°‘ HTTP è¯·æ±‚å¯¹ç”¨æˆ·æ¥è¯´æ„ä¹‰é‡å¤§ã€‚æœ¬åœ°è°ƒè¯•æ—¶å¿«å¦‚é—ªç”µçš„ API æ¥å£è°ƒç”¨ï¼Œå¯èƒ½åœ¨ 3G ç½‘ç»œä¸‹æ…¢ä¼¼æ ‘æ‡’ï¼Œå®é™…çš„é€Ÿåº¦å–å†³äºç”¨æˆ·çš„ç½‘ç»œçŠ¶å†µã€‚æ¨èå¤§å®¶ä½¿ç”¨ Chrome çš„ Network é¢æ¿å’Œ CPU èŠ‚æµåŠŸèƒ½æ¥æµ‹è¯•ä½ çš„ç½‘ç«™åœ¨è¾ƒç¼“æ…¢çš„ç½‘ç»œä¸­æ€§èƒ½å¦‚ä½•ã€‚

## 4) æ¶ˆé™¤å¡é¡¿ï¼ˆé¡ºæ»‘çš„ CSS åŠ¨ç”»ï¼‰

CSS åŠ¨ç”»ååˆ†å¼ºå¤§ã€‚ â€œå¡é¡¿ï¼ˆJankï¼‰â€æŒ‡çš„æ˜¯åŠ¨ç”»ä¸ç¨³å®šçš„æƒ…å†µã€‚Chrome è°ƒè¯•å·¥å…·ä¸­çš„ Performance é¢æ¿èƒ½å¸®ä½ è®°å½•å¹¶è§‚å¯Ÿ CSS åŠ¨ç”»å’Œè¿‡æ¸¡ï¼ˆTransitionï¼‰çš„ FPS å€¼ã€‚æˆ‘å‘ç°é¡ºæ»‘çš„åŠ¨ç”»èƒ½è®©ç”¨æˆ·æ›´åŠ ä¿¡èµ–ç³»ç»Ÿã€‚åŠ è½½åçš„å…ƒç´ ä¹±è·³æˆ–æ˜æ˜¾çš„è¿‡æ¸¡æŠ–åŠ¨ï¼Œéƒ½ä¼šè®©ç”¨æˆ·æ‹…å¿§ã€‚

## 5) ä¸è¦ä½¿ç”¨ evalâ€¦â€¦ï¼ˆä¸ä»…ä»…æ˜¯ä¸ºäº†å®‰å…¨ï¼‰

å…ˆæŠ›å¼€å®‰å…¨å› ç´ ä¸è°ˆï¼Œæˆ‘å‘ç° eval å®åœ¨æ˜¯å¤ªå¤ªå¤ªæ…¢äº†ã€‚eval ä¼šè§£æä»£ç ï¼Œè€Œåé€šè¿‡è¿½è¸ªæœºå™¨ä»£ç æ¥æŸ¥æ‰¾ä»£ç ä¸­æåŠçš„å˜é‡ã€‚ç”¨å…¶ä»–è§£å†³æ–¹æ¡ˆï¼ˆé€šå¸¸æ˜¯é€’å½’ï¼‰æ›¿ä»£ eval èƒ½æé€Ÿä¸å°‘ã€‚å³ä½¿ä½ ä»¥å®‰å…¨çš„æ–¹å¼ä½¿ç”¨ç€ evalï¼Œå¦‚æœæœ‰å¦ä¸€ä¸ªå¯èƒ½åŒæ ·å¥½çš„è§£å†³æ–¹æ¡ˆï¼Œé‚£å°±èµ¶ç´§å–ç”¨æ›¿ä»£æ–¹æ¡ˆã€‚

## 6) ç†è§£ JavaScript çš„è¿è¡ŒåŸç†

ä»äº‹ä»¶å¾ªç¯ã€è°ƒç”¨æ ˆã€å¼‚æ­¥è¡Œä¸ºã€æ¡†æ¶çš„ç¼–è¯‘åŸç†ã€åŸå‹ã€ä½œç”¨åŸŸé“¾ç­‰è§’åº¦ï¼Œå»ç†è§£å½“ä½ åˆ›å»ºäº†ä¸€ä¸ª Promise/Observable æ—¶å‘ç”Ÿäº†ä»€ä¹ˆï¼Œå°†ä¼šæ˜¯é‡Œç¨‹ç¢‘èˆ¬çš„è¿›æ­¥ã€‚ç†è§£ JavaScript çš„è¿è¡ŒåŸç†èƒ½è®©ä½ çŸ¥é“å½“æ¶‰åŠåˆ°æ€§èƒ½å’Œå¯æ‰©å±•åº”ç”¨çš„è®¾è®¡æ—¶ï¼Œåº”è¯¥å¦‚ä½•åšå‡ºæ­£ç¡®çš„å†³ç­–ã€‚ä¹ŸæåŠ›æ¨èå¤§å®¶çœ‹çœ‹ [Javascript Design Patterns](https://www.dofactory.com/javascript/design-patterns)ï¼Œå…è´¹ä¸”è£¨ç›Šè‰¯å¤šã€‚

æœ€åï¼Œä¸è¦æ‹…å¿ƒå¾®ä¼˜åŒ–ï¼ˆMicro-optimizationï¼‰ã€‚è™½è¯´æœ‰æ€§èƒ½æ„è¯†å¾ˆé‡è¦ï¼Œä½†è®°ä½ï¼Œç¬¬ä¸€è¦åŠ¡ä»æ˜¯å†™å‡ºæ˜“æ‡‚ã€æ˜“ç»´æŠ¤çš„ä»£ç ã€‚å†å¼ºè°ƒä¸€éï¼š

* ä½¿ç”¨è‰¯å¥½çš„æ•°æ®ç»“æ„å’Œç®—æ³•
* é€‚å½“åšç¼“å­˜
* å‡å°‘ HTTP è¯·æ±‚
* æ¶ˆé™¤å¡é¡¿
* åˆ«ç”¨ eval
* ç†è§£ JavaScript è¿è¡ŒåŸç†ï¼

å¸Œæœ›æœ¬æ–‡èƒ½ç»™ä½ å¸¦æ¥å¯å‘ï¼ğŸ˜ƒ

---

> **â€œUncommon thinkers reuse what common thinkers refuse.â€**
>
> **â€” J. R. D. Tata**

> å¦‚æœå‘ç°è¯‘æ–‡å­˜åœ¨é”™è¯¯æˆ–å…¶ä»–éœ€è¦æ”¹è¿›çš„åœ°æ–¹ï¼Œæ¬¢è¿åˆ° [æ˜é‡‘ç¿»è¯‘è®¡åˆ’](https://github.com/xitu/gold-miner) å¯¹è¯‘æ–‡è¿›è¡Œä¿®æ”¹å¹¶ PRï¼Œä¹Ÿå¯è·å¾—ç›¸åº”å¥–åŠ±ç§¯åˆ†ã€‚æ–‡ç« å¼€å¤´çš„ **æœ¬æ–‡æ°¸ä¹…é“¾æ¥** å³ä¸ºæœ¬æ–‡åœ¨ GitHub ä¸Šçš„ MarkDown é“¾æ¥ã€‚

---

> [æ˜é‡‘ç¿»è¯‘è®¡åˆ’](https://github.com/xitu/gold-miner) æ˜¯ä¸€ä¸ªç¿»è¯‘ä¼˜è´¨äº’è”ç½‘æŠ€æœ¯æ–‡ç« çš„ç¤¾åŒºï¼Œæ–‡ç« æ¥æºä¸º [æ˜é‡‘](https://juejin.im) ä¸Šçš„è‹±æ–‡åˆ†äº«æ–‡ç« ã€‚å†…å®¹è¦†ç›– [Android](https://github.com/xitu/gold-miner#android)ã€[iOS](https://github.com/xitu/gold-miner#ios)ã€[å‰ç«¯](https://github.com/xitu/gold-miner#å‰ç«¯)ã€[åç«¯](https://github.com/xitu/gold-miner#åç«¯)ã€[åŒºå—é“¾](https://github.com/xitu/gold-miner#åŒºå—é“¾)ã€[äº§å“](https://github.com/xitu/gold-miner#äº§å“)ã€[è®¾è®¡](https://github.com/xitu/gold-miner#è®¾è®¡)ã€[äººå·¥æ™ºèƒ½](https://github.com/xitu/gold-miner#äººå·¥æ™ºèƒ½)ç­‰é¢†åŸŸï¼Œæƒ³è¦æŸ¥çœ‹æ›´å¤šä¼˜è´¨è¯‘æ–‡è¯·æŒç»­å…³æ³¨ [æ˜é‡‘ç¿»è¯‘è®¡åˆ’](https://github.com/xitu/gold-miner)ã€[å®˜æ–¹å¾®åš](http://weibo.com/juejinfanyi)ã€[çŸ¥ä¹ä¸“æ ](https://zhuanlan.zhihu.com/juejinfanyi)ã€‚
