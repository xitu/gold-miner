> * åŸæ–‡åœ°å€ï¼š[Introduction to Blitz.js](https://blog.bitsrc.io/introduction-to-blitz-js-ff1e48ea5714)
> * åŸæ–‡ä½œè€…ï¼š[Chidume Nnamdi ğŸ”¥ğŸ’»ğŸµğŸ®](https://medium.com/@kurtwanger40)
> * è¯‘æ–‡å‡ºè‡ªï¼š[æ˜é‡‘ç¿»è¯‘è®¡åˆ’](https://github.com/xitu/gold-miner)
> * æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š[https://github.com/xitu/gold-miner/blob/master/article/2020/introduction-to-blitz-js.md](https://github.com/xitu/gold-miner/blob/master/article/2020/introduction-to-blitz-js.md)
> * è¯‘è€…ï¼š[plusmultiply0](https://github.com/plusmultiply0)
> * æ ¡å¯¹è€…ï¼š

# Blitz.js ç®€ä»‹

![](https://cdn-images-1.medium.com/max/2800/0*UyEKhRBaINAtNNiB.png)

Yet another framework on the block. JavaScript ç¤¾åŒºä¸€ç›´åœ¨ç¨³æ­¥å‘å±•ï¼Œè¿™å·²ç»ä¸æ˜¯ä»€ä¹ˆæ–°é—»äº†ï¼Œå¹¶ä¸”å·²ç»æ¨å‡ºäº†æ•°ç™¾ä¸ªæ¡†æ¶ï¼Œè¿™æ— ç–‘è¶…å‡ºäº†æˆ‘ä»¬çš„ç†è§£å’ŒæŒæ¡èŒƒå›´ã€‚

ç°åœ¨ï¼Œå¤§å¤šæ•°ç¨³å®šçš„æ¡†æ¶éƒ½æœ‰åŸºäºå…¶æ„å»ºçš„æ¡†æ¶ï¼Œä½¿å…¶æ›´å¤æ‚ä»¥åŠå…·æœ‰æ›´é«˜çš„æ€§èƒ½ã€‚

åœ¨æœ¬æ–‡ï¼Œæˆ‘ä»¬å°†ä¼šç®€å•ä»‹ç» Blitz.js æ¡†æ¶ã€‚

## ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ blitz.js æ¡†æ¶ï¼Ÿ

æ˜¯çš„ï¼ŒReact å¢å¼ºäº†æˆ‘ä»¬ç°åœ¨æ„å»ºåº”ç”¨çš„æ–¹å¼ã€‚[ç»„ä»¶é©±åŠ¨è®¾è®¡](https://bit.dev) ä½¿å¾—æˆ‘ä»¬ä»å•ä¸ªçš„å•å…ƒå‘ä¸Šæ„å»ºåº”ç”¨æ›´åŠ å®¹æ˜“ã€‚

ä½†æ˜¯ï¼Œæ„å»ºåº”ç”¨å¹¶ä¸ä»…æ˜¯åœ¨ React ä¸­å †å ç»„ä»¶ã€‚æˆ‘ä»¬å¿…é¡»æ€è€ƒï¼Œå¦‚ä½•è®¾ç½®é…ç½®ã€éµå¾ªæœ€ä½³è®¾è®¡æ¨¡å¼ã€å»ºç«‹æ–‡ä»¶å¤¹ç»“æ„ï¼Œç»„ç»‡åº”ç”¨çš„ç»“æ„ã€è§„åˆ’åº”ç”¨çš„è·¯ç”±/é¡µé¢ä»¥åŠä½¿ç”¨ä»€ä¹ˆæ•°æ®åº“ï¼ŒæœåŠ¡å™¨ä»¥åŠæ•°æ®åº“æ¨¡å¼æ¨¡å‹ã€‚

åœ¨ç¼–å†™ä»£ç å‰å°±è¦å†³å®šå¥½ä¸Šè¿°çš„æ‰€æœ‰äº‹æƒ…ï¼Œå®åœ¨æ˜¯ä»¤äººå¤´ç–¼ã€‚

Blitz.js ä¸ºæˆ‘ä»¬è§£å†³äº†ä»¥ä¸Šçš„æ‰€æœ‰é—®é¢˜ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªå…¨æ ˆæ•´ä½“çš„æœåŠ¡å™¨ç«¯æ¸²æŸ“ React åº”ç”¨ç¨‹åºè„šæ‰‹æ¶ï¼Œå¹¶å†…ç½®äº†ç›¸åº”çš„é…ç½®å’Œåç«¯ã€‚å°±åƒ Rails æ¡†æ¶åœ¨ Ruby ä¸Šæ‰€åšçš„ã€‚

é€šè¿‡ blitz.js å¸¦æ¥çš„å¥½å¤„ï¼Œæ‰€æé«˜çš„ç”Ÿäº§åŠ›å°†è¿œè¿œè¶…å‡ºæˆ‘ä»¬çš„æƒ³è±¡ã€‚

ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“ä¸ºä»€ä¹ˆéœ€è¦ blitz.js äº†ã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹æ›´åŠ è¯¦ç»†çš„åŠŸèƒ½ã€‚

## Blitz.js

Blitz.js æ˜¯å— Ruby on Rails å¯å‘ï¼ŒåŸºäº Next.js æ„å»ºçš„é›¶-APIï¼ˆZero-APIï¼‰æ•°æ®å±‚å…¨æ ˆ React æ¡†æ¶ã€‚

è®©æˆ‘ä»¬æ ¹æ®æ¡†æ¶ä½œè€…çš„è¯æ¥çœ‹çœ‹ Blitz.js çš„ä¸»è¦åŠŸèƒ½å’Œä¼˜ç‚¹ï¼š

1. â€œZero-APIâ€ æ•°æ®å±‚è®©ä½ æ— éœ€æ‰‹åŠ¨æ·»åŠ  API ç«¯ç‚¹ï¼ˆAPI endpointsï¼‰æˆ–è¿›è¡Œå®¢æˆ·ç«¯è®¿é—®å’Œç¼“å­˜ï¼ˆfetching and cachingï¼‰å°±èƒ½ç›´æ¥å°†æœåŠ¡å™¨ä»£ç å¯¼å…¥åˆ° React ç»„ä»¶ä¸­ã€‚
2. åŒ…å«äº†äº§å“çº§åº”ç”¨æ‰€éœ€çš„ä¸€åˆ‡äº‹ç‰©ã€‚ä»æ•°æ®åº“åˆ°å‰ç«¯çš„ä¸€åˆ‡çš„ç«¯å¯¹ç«¯äº‹ç‰©ã€‚
3. å¸¦æ¥ Ruby on Rails æ¡†æ¶çš„ç®€æ´å’Œçº¦å®šçš„åŒæ—¶ï¼Œä¿ç•™äº†æˆ‘ä»¬å¯¹ React ä¸­æ‰€çƒ­çˆ±çš„ä¸€åˆ‡äº‹ç‰©ã€‚

#### å®‰è£… & åŸºç¡€ç”¨æ³•

è¦å¼€å§‹ä½¿ç”¨ Blitz.js ï¼Œé¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å®‰è£…å‘½ä»¤è¡Œå·¥å…·ã€‚

Blitz.js éœ€è¿è¡Œåœ¨ Nodejs v12+ã€‚

æˆ‘ä»¬åœ¨è®¡ç®—æœºä¸Šå…¨å±€å®‰è£… Blitz.js çš„å‘½ä»¤è¡Œå·¥å…·ã€‚

```bash
npm install -g blitz
```

å®‰è£…ä»¥åï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨ä»»æ„ç›®å½•ä¸­ä½¿ç”¨ `blitz` å‘½ä»¤äº†ã€‚

ä¸ºäº†åˆ›å»ºä¸€ä¸ªæ–°çš„ Blitzjs åº”ç”¨ï¼Œåœ¨ blitz å‘½ä»¤ä¸­åŠ ä¸Š new å‚æ•°ï¼š

```bash
blitz new blitz-app
```

`new` å­å‘½ä»¤ï¼ˆsub-commandï¼‰ä¼šåˆ›å»ºä¸€ä¸ªä»¥ `blitz-app` ä¸ºåçš„ Blitz æ–°é¡¹ç›®ã€‚

æ¥çœ‹çœ‹ `blitz-app` ç›®å½•ç»“æ„:

```
blitz-app
â”‚
â”œâ”€â”€ app
â”‚ â”œâ”€â”€ components
â”‚ â”‚ â””â”€â”€ ErrorBoundary.tsx
â”‚ â”œâ”€â”€ layouts
â”‚ â””â”€â”€ pages
â”‚   â”œâ”€â”€ _app.tsx
â”‚   â”œâ”€â”€ _document.tsx
â”‚   â””â”€â”€ index.tsx
â”œâ”€â”€ db
â”‚ â”œâ”€â”€ migrations
â”‚ â”œâ”€â”€ index.ts
â”‚ â””â”€â”€ schema.prisma
â”œâ”€â”€ integrations
â”œâ”€â”€ node_modules
â”œâ”€â”€ public
â”‚ â”œâ”€â”€ favicon.ico
â”‚ â””â”€â”€ logo.png
â”œâ”€â”€ utils
â”œâ”€â”€ .babelrc.js
â”œâ”€â”€ .env
â”œâ”€â”€ .eslintrc.js
â”œâ”€â”€ .gitignore
â”œâ”€â”€ .npmrc
â”œâ”€â”€ .prettierignore
â”œâ”€â”€ README.md
â”œâ”€â”€ blitz.config.js
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â””â”€â”€ yarn.lock
```

`app/` ç›®å½•æ˜¯å¤§å¤šæ•°é¡¹ç›®çš„ä¸»è¦å®¹å™¨ã€‚å°±æ˜¯æ”¾ç½®åº”ç”¨ç»„ä»¶ï¼Œé¡µé¢å’Œè·¯ç”±çš„åœ°æ–¹ã€‚å¦‚åŒä½ çš„åº”ç”¨ä¸­ `src` ç›®å½•ã€‚

`app/components` ç›®å½•ç”¨æ¥å­˜æ”¾å±•ç¤ºç»„ä»¶ï¼ˆpresentational componentsï¼‰ã€‚å±•ç¤ºç»„ä»¶æ˜¯ç‹¬ç«‹çš„è§†å›¾å•å…ƒï¼Œå®ƒä»¬å”¯ä¸€çš„ç”¨å¤„å°±æ˜¯æ˜¾ç¤ºå®¹å™¨ç»„ä»¶ï¼ˆcontainer componentsï¼‰ä¼ é€’ç»™å®ƒä»¬çš„æ•°æ®ã€‚

`app/pages` ç›®å½•ç”¨æ¥å­˜æ”¾é¡µé¢è·¯ç”±ã€‚æ¯ä¸ªé¡µé¢éƒ½æ˜¯åŸºäºæ–‡ä»¶åå’Œè·¯ç”±äº§ç”Ÿå…³è”ã€‚åœ¨ Blitz ä¸­ï¼Œé¡µé¢å°±æºäºä» pages ç›®å½•ä¸­ `.js`ã€`.jsx`ã€`.ts` æˆ– `.tsx` æ–‡ä»¶å¯¼å‡ºçš„ React ç»„ä»¶ã€‚

ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœåœ¨æˆ‘ä»¬çš„åº”ç”¨ä¸­æœ‰å¦‚ä¸‹çš„è·¯ç”±ï¼š

* /post
* /profile
* /about

é‚£ä¹ˆï¼Œåœ¨ Blitzjs çš„ pages ç›®å½•ä¸­åº”æœ‰å¦‚ä¸‹çš„æ–‡ä»¶å¤¹å’Œæ–‡ä»¶ã€‚

å½“å¯¼èˆªåˆ° "/post" è·¯ç”±æ—¶ï¼Œ`pages/post/index.js` å¯¼å‡ºçš„ç»„ä»¶ä¼šè¢«æ¸²æŸ“ã€‚

```js
// pages/post/index.js

function Post() {
    return <div>Post</div>
}

export default Post
```

`pages/profile/index.js` æ˜ å°„åˆ° `/profile` è·¯ç”±ã€‚`pages/profile/index.js` å¯¼å‡ºçš„ç»„ä»¶ä¼šåœ¨è·¯ç”±è¢«å¯¼èˆªåˆ°æ—¶æ¸²æŸ“ã€‚

```js
// pages/profile/index.js

function Profile() {
    return <div>Profile</div>
}

export default Profile
```

`pages/about/index.js` æ˜ å°„åˆ° `/about` è·¯ç”±ã€‚

```js
// pages/about/index.js
function About() {
    return <div>About</div>
}

export default About
```

The `db/` is where the app's database configuration goes. By default, Blitz uses Prisma 2 which is a strongly-typed database client. You can use anything you want, such as Mongo, TypeORM, etc. By default, Blitz uses the local SQLite as the database.

```ts
datasource db {
    provider = "sqlite"
    url = env("DATABASE_URL")
}
```

The `provider` tells Prisma that the app uses the SQLite database. If we want to use other databases like Postgres for example we will change the value of `provider` from `sqlite` to `postgres`.

```ts
datasource db {
    provider = "postgres"
    url = env("DATABASE_URL")
}
```

In this schema.prisma file we can define our models:

```ts
datasource db {
    provider = "postgres"
    url = env("DATABASE_URL")
}

model BlogPost {
    id Int @default(autoincrement()) @id
    title String
    description String
}
```

The models map to the tables in the database.

The `node_modules/` directory holds the dependencies installed in your project. This is very much quite heavy in size.

The `public/` directory holds the static assets. The static assets are media files like images, music, video files, favicons, etc.

The `utils/` directory houses the utility files that can be shared or used in the whole app.

`blitz.config.js` is a Blitzjs configuration file. All the custom configurations for your Blitz app is set here. It extends `next.config.js`.

## Server

We can start the Blitz server to serve our project by running the command:

```bash
blitz start
```

Note: you must be inside the `blitz-app` directory for the command to load and serve our app.

Now, we will see the following output:

```
âœ” Prepped for launch
[ wait ] starting the development server ...
[ info ] waiting on http://localhost:3000 ...
[ info ] bundled successfully, waiting for typecheck results
[ wait ] compiling ...
[ info ] bundled successfully, waiting for typecheck results
[ ready ] compiled successfully - ready on http://localhost:3000
```

We see that Blitz has compiled and started a server at localhost:3000 to serve our app. Now navigate to [http://localhost:3000](http://localhost:3000) to see the Blitz rendered.

## Blitz generate

The Blitz CLI tool is quite automated. With this CLI tool, we can use the `generate` sub-command to scaffold all code we want in our Blitz app.

It goes like this:

```
blitz generate <type> <model_name>
```

The blitz â€˜generateâ€™ command can scaffold/generate Prisma models, mutations, queries, pages.

The `\<type>` argument specifies the type of file to generate.

The `\<type>` can have the following values:

`all`: These generate model, queries, mutations, pages files.

Example:

```bash
blitz generate all blogPost
```

See we used the `all` sub-command. This command will generate these files:

```
app/blogPosts/pages/blogPosts/[blogPostId]/edit.tsx
app/blogPosts/pages/blogPosts/[blogPostId].tsx
app/blogPosts/pages/blogPosts/index.tsx
app/blogPosts/pages/blogPosts/new.tsx
app/blogPosts/components/BlogPostForm.tsx
app/blogPosts/queries/getBlogPost.ts
app/blogPosts/queries/getBlogPosts.ts
app/blogPosts/mutations/createBlogPost.ts
app/blogPosts/mutations/deleteBlogPost.ts
app/blogPosts/mutations/updateBlogPost.ts
```

The `all` sub-command generates pages for the blogPost:

```
app/blogPosts/pages/blogPosts/[blogPostId]/edit.tsx
app/blogPosts/pages/blogPosts/[blogPostId].tsx
app/blogPosts/pages/blogPosts/index.tsx
app/blogPosts/pages/blogPosts/new.tsx
```

All these files export components that will be rendered when the route matching the page is navigated to.

app/blogPosts/pages/blogPosts/index.tsx will be loaded when the route `/blogPosts` is navigated to in the browser. It will render all blog posts in the database.

app/blogPosts/pages/blogPosts/new.tsx will be loaded on `/blogPosts/new` route navigation. The page will be to create a new blog post.

app/blogPosts/pages/blogPosts/[blogPostId]/edit.tsx will be loaded on `/blogPosts/[blogPostId]/edit` route navigation. This will be to edit a blog post with its id `[blogPostId]`.

app/blogPosts/pages/blogPosts/[blogPostId].tsx will be loaded on `/blogPosts/[blogPostId]` route navigation. This will render the blog post by its id `[blogPostId]`.

```
app/blogPosts/queries/getBlogPost.ts
app/blogPosts/queries/getBlogPosts.ts
```

The queries houses files that retrieve a blog post or blog posts. app/blogPosts/queries/getBlogPost.ts returns a blog post given the blog post id. app/blogPosts/queries/getBlogPosts.ts retrieves all the blog posts in the database.

```
app/blogPosts/mutations/createBlogPost.ts
app/blogPosts/mutations/deleteBlogPost.ts
app/blogPosts/mutations/updateBlogPost.ts
```

The mutations do the CUD in CRUD, they can create, update, or delete a blog post. app/blogPosts/mutations/createBlogPost.ts this file creates a new blog post. app/blogPosts/mutations/deleteBlogPost.ts delete a blog post given the id. app/blogPosts/mutations/updateBlogPost.ts edit a given blog post.

`resource`: This sub-command creates model, queries, and mutations.

Example:

```bash
blitz generate resource blogPost
```

This command will generate these files:

```
app/blogPosts/queries/getBlogPost.ts
app/blogPosts/queries/getBlogPosts.ts
app/blogPosts/mutations/createBlogPost.ts
app/blogPosts/mutations/deleteBlogPost.ts
app/blogPosts/mutations/updateBlogPost.ts
```

`crud`: This will create queries and mutations. Unlike `resource` it will generate the Prisma model.

Example:

```bash
blitz generate crud blogPost
```

This command will generate these files:

```
app/blogPosts/queries/getBlogPost.ts
app/blogPosts/queries/getBlogPosts.ts
app/blogPosts/mutations/createBlogPost.ts
app/blogPosts/mutations/deleteBlogPost.ts
app/blogPosts/mutations/updateBlogPost.ts
```

`queries` and `query`: This sub-commands will only generate queries files:

Example:

```bash
blitz generate queries blogPost
```

This command will generate these files:

```
app/blogPosts/queries/getBlogPost.ts
app/blogPosts/queries/getBlogPosts.ts
```

`mutations`: This sub-command will generate mutations files only. No queries, pages, and models.

Example:

```bash
blitz generate mutations blogPost
```

This command will generate these files:

```
app/blogPosts/mutations/createBlogPost.ts
app/blogPosts/mutations/deleteBlogPost.ts
app/blogPosts/mutations/updateBlogPost.ts
```

`pages`: This sub-command will generate only pages files.

Example:

```bash
blitz generate pages blogPost
```

This command will generate these files:

```
app/blogPosts/pages/blogPosts/[blogPostId]/edit.tsx
app/blogPosts/pages/blogPosts/[blogPostId].tsx
app/blogPosts/pages/blogPosts/index.tsx
app/blogPosts/pages/blogPosts/new.tsx
```

The `\<model_name>` argument is the model name to generate files for.

## æ€»ç»“

Letâ€™s tick them off. Blitz.js offers us:

* Easy page routing
* Database setup and integration
* SSR-enabled application
* Built-in authentication

Blitzjs is awesome. How it made everything simple for us is quite amazing. Just scaffold your project and your good to go!!

If you have any questions regarding this or anything I should add, correct or remove, feel free to comment, email, or DM me.

è°¢è°¢ï¼ï¼ï¼

## Blitz çš„ç›¸å…³èµ„æº

[Blitz.js â€” The Fullstack React Framework](https://blitzjs.com)

[Getting Started with Blitz](https://blitzjs.com/docs/getting-started)

> å¦‚æœå‘ç°è¯‘æ–‡å­˜åœ¨é”™è¯¯æˆ–å…¶ä»–éœ€è¦æ”¹è¿›çš„åœ°æ–¹ï¼Œæ¬¢è¿åˆ° [æ˜é‡‘ç¿»è¯‘è®¡åˆ’](https://github.com/xitu/gold-miner) å¯¹è¯‘æ–‡è¿›è¡Œä¿®æ”¹å¹¶ PRï¼Œä¹Ÿå¯è·å¾—ç›¸åº”å¥–åŠ±ç§¯åˆ†ã€‚æ–‡ç« å¼€å¤´çš„ **æœ¬æ–‡æ°¸ä¹…é“¾æ¥** å³ä¸ºæœ¬æ–‡åœ¨ GitHub ä¸Šçš„ MarkDown é“¾æ¥ã€‚

---

> [æ˜é‡‘ç¿»è¯‘è®¡åˆ’](https://github.com/xitu/gold-miner) æ˜¯ä¸€ä¸ªç¿»è¯‘ä¼˜è´¨äº’è”ç½‘æŠ€æœ¯æ–‡ç« çš„ç¤¾åŒºï¼Œæ–‡ç« æ¥æºä¸º [æ˜é‡‘](https://juejin.im) ä¸Šçš„è‹±æ–‡åˆ†äº«æ–‡ç« ã€‚å†…å®¹è¦†ç›– [Android](https://github.com/xitu/gold-miner#android)ã€[iOS](https://github.com/xitu/gold-miner#ios)ã€[å‰ç«¯](https://github.com/xitu/gold-miner#å‰ç«¯)ã€[åç«¯](https://github.com/xitu/gold-miner#åç«¯)ã€[åŒºå—é“¾](https://github.com/xitu/gold-miner#åŒºå—é“¾)ã€[äº§å“](https://github.com/xitu/gold-miner#äº§å“)ã€[è®¾è®¡](https://github.com/xitu/gold-miner#è®¾è®¡)ã€[äººå·¥æ™ºèƒ½](https://github.com/xitu/gold-miner#äººå·¥æ™ºèƒ½)ç­‰é¢†åŸŸï¼Œæƒ³è¦æŸ¥çœ‹æ›´å¤šä¼˜è´¨è¯‘æ–‡è¯·æŒç»­å…³æ³¨ [æ˜é‡‘ç¿»è¯‘è®¡åˆ’](https://github.com/xitu/gold-miner)ã€[å®˜æ–¹å¾®åš](http://weibo.com/juejinfanyi)ã€[çŸ¥ä¹ä¸“æ ](https://zhuanlan.zhihu.com/juejinfanyi)ã€‚
