> * åŸæ–‡åœ°å€ï¼š[Identify well-connected Users in a Network](https://towardsdatascience.com/identify-well-connected-users-in-a-social-network-19ea8dd50b16)
> * åŸæ–‡ä½œè€…ï¼š[Guenter Roehrich](https://medium.com/@GuenterRoehrich)
> * è¯‘æ–‡å‡ºè‡ªï¼š[æ˜é‡‘ç¿»è¯‘è®¡åˆ’](https://github.com/xitu/gold-miner)
> * æœ¬æ–‡æ°¸ä¹…é“¾æ¥ï¼š[https://github.com/xitu/gold-miner/blob/master/article/2020/identify-well-connected-users-in-a-network.md](https://github.com/xitu/gold-miner/blob/master/article/2020/identify-well-connected-users-in-a-network.md)
> * è¯‘è€…ï¼š[cf020031308](https://github.com/cf020031308)
> * æ ¡å¯¹è€…ï¼š

# è¯†åˆ«ç½‘ç»œä¸­è¿æ¥ç´§å¯†çš„ç”¨æˆ·

æœ¬æ–‡ä¸»è¦ä»‹ç»å¦‚ä½•ä½¿ç”¨æ— å‘å›¾å’Œ Scipy çš„ç¨€ç–çŸ©é˜µå®ç°ï¼ˆCOOï¼‰æ¥å­˜å‚¨æ•°æ®å’Œåˆ†æç”¨æˆ·ä¹‹é—´çš„è¿æ¥ã€‚

![â€œè¿æ¥â€ â€”â€” ç…§ç‰‡æ¥è‡ª [Unsplash](https://unsplash.com?utm_sourceu003dmedium&utm_mediumu003dreferral) ä¸Šçš„ [NASA](https://unsplash.com/@nasa?utm_sourceu003dmedium&utm_mediumu003dreferral)]( https://cdn-images-1.medium.com/max/13292/0*Ry3dSWy5ckRtkTHY)

æœ€è¿‘æˆ‘å‘ç°æˆ‘çš„ä¸€ä½å‰é›‡ä¸»å»ºç«‹äº†ä¸€ä¸ªç±»ä¼¼ Facebook çš„ç¤¾äº¤ç½‘ç»œï¼Œæœ‰å¤§é‡æ•°æ®äºŸå¾…åˆ†æã€‚ç¤¾äº¤æ•°æ®å·²ç›¸å½“æˆç†Ÿï¼Œåº”ç”¨ä¹Ÿå¾ˆå¹¿ï¼Œå› æ­¤æˆ‘å†³å®šå¯¹å…¶è¿›è¡Œæ›´æ·±å…¥çš„ç ”ç©¶ã€‚

é€šè¿‡ç½‘ä¸Šè°ƒç ”ï¼Œæˆ‘å‘ç°ä¸€ç§å¯è¡Œçš„â€œè®¡ç®—è¿æ¥è´¨é‡â€çš„æœ‰è¶£æ–¹æ³•ï¼Œå…¶æ ¸å¿ƒæ˜¯æ•°ä¸‰è§’å½¢ï¼šé€šè¿‡ä¸¤ä¸ªç”¨æˆ·ä¹‹é—´å…±åŒè¿æ¥çš„ç¬¬ä¸‰è€…çš„æ•°é‡åˆ¤æ–­ä»–ä¿©è¿æ¥çš„ç´§å¯†ç¨‹åº¦ã€‚ä¸ºäº†ä¾¿äºç†è§£ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ã€‚

> **A è®¤è¯† Bï¼ŒB è®¤è¯† C**ã€‚å¾ˆç®€å•çš„å…³ç³»ï¼Œä¸å­˜åœ¨ä¸‰è§’å½¢ï¼Œè¿™ä¸æ˜¯æˆ‘ä»¬è¦å…³æ³¨çš„ã€‚
>
> **A è®¤è¯† B**ï¼Œ**B è®¤è¯† C**ï¼Œ**C è®¤è¯† A**ã€‚å¯¹ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œå› ä¸ºåœ¨ä¸‰ä¸ªäººçš„ç¾¤ä½“ä¸€ä¸ªäººæœ€å¤šæœ‰ 2 ä¸ªè¿æ¥ã€‚å› æ­¤ï¼Œè¿™é‡Œ 2 å°±æ˜¯æœ€å¤§çš„ç´§å¯†è¿æ¥æ•°ã€‚

![ä¸€ä¸ªæ— å‘å›¾çš„ä¾‹å­](https://cdn-images-1.medium.com/max/2000/1*d4TCH2_ayplfLN2EUAtxLg.png)

è¯¥å›¾çš„çŸ©é˜µè¡¨ç¤ºå¦‚ä¸‹ï¼ˆ[triangle.py](https://gist.github.com/guenter-r/87196fcca6a6cda0d211a2e14fc200f4/raw/0fa50b13c874938646d4a730b6c6b1e1073cf2f9/triangle.py)ï¼‰ï¼š

```python
graph = np.array([
    [0,1,1,0,0,0,0,0],
    [1,0,1,1,1,0,0,1],
    [1,1,0,0,0,0,0,0],
    [0,1,0,0,1,0,1,1],
    [0,1,0,1,0,1,0,0],
    [0,0,0,0,1,0,0,0],
    [0,0,0,1,0,0,0,0],
    [0,1,0,1,0,0,0,0]
])
```

[å¡å†…åŸºÂ·æ¢…éš†å¤§å­¦](http://www.math.cmu.edu/~ctsourak/tsourICDM08.pdf) å‘è¡¨è¿‡ä¸€ç¯‡åœ¨çŸ©é˜µä¸­è®¡ç®—ä¸‰è§’å½¢çš„æœ‰è¶£è®ºæ–‡[1]ï¼Œæä¾›äº†å®¹æ˜“ç†è§£çš„ä¼ªä»£ç ç‰‡æ®µâ€”â€”ä¸è¿‡æˆ‘ä»¬åé¢ç ”ç©¶çš„å°†ä¼šæ˜¯å¦ä¸€ç§æ–¹æ³•ã€‚Charalampos E. Tsourakakis ï¼ˆå¡å†…åŸºÂ·æ¢…éš†å¤§å­¦ï¼‰åœ¨è¯¥è®ºæ–‡ä¸­æå‡ºäº†ä¸€ç§å·²è¢«å¹¿æ³›éªŒè¯çš„é«˜ç²¾åº¦ä¼°ç®—æ–¹æ³•ï¼ˆç²¾ç¡®åº¦è¶…è¿‡ 95ï¼…ï¼‰ï¼Œå³é€šè¿‡â€œç‰¹å¾å€¼çš„ç«‹æ–¹å’Œâ€è®¡ç®—ç½‘ç»œä¸­å«æœ‰çš„ä¸‰è§’å½¢ä¸ªæ•°.

![C. E. Tsourakikis æå‡ºçš„â€œç‰¹å¾ä¸‰è§’å½¢â€](https://cdn-images-1.medium.com/max/2000/1*IA7JteyZb7Na8iA2sc269w.png)

ç¿»è¯‘æˆäººè¯å°±æ˜¯ï¼Œç”¨ $\lambda$ è¡¨ç¤ºæ— å‘å›¾çš„é‚»æ¥çŸ©é˜µçš„ç‰¹å¾å€¼ï¼Œè®¡ç®—æ‰€æœ‰ç‰¹å¾å€¼çš„ç«‹æ–¹å’Œå°±å¯ä»¥ç®—å‡ºå›¾ä¸­çš„ä¸‰è§’å½¢æ•°é‡ã€‚æ³¨æ„å‰é¢é™¤ä»¥çš„ 6ï¼šä¸‰è§’å½¢æœ‰ä¸‰ä¸ªç‚¹ï¼Œæ¯ä¸ªç‚¹æ•°ç´§å¯†è¿æ¥æ•°äº†ä¸¤æ¬¡ï¼Œæ‰€ä»¥è¦é™¤ä»¥è¿™ä¸ªåˆ†æ¯â€”â€”ç¨åæˆ‘ä»¬ä¼šå†æ¬¡è§è¯†åˆ°è¿™ä¸ªç¥å¥‡çš„ 6ã€‚

å¦‚æœä½ ä¹Ÿæ˜¯ä¸€ä¸ªâ€œç‰¹å¾äººâ€ï¼ˆæ¥è‡ª MIT æ•™æˆ Gilbert Strang çš„ç©ç¬‘è¯[2]ï¼‰ï¼Œè‚¯å®šä¼šå–œæ¬¢ä¸Šé¢çš„â€œç‰¹å¾ä¸‰è§’å½¢â€å…¬å¼ã€‚é¡ºä¾¿æä¸€ä¸‹ Tsourakakis çš„å¦ä¸€ä¸ªå¿«é€Ÿä¼°ç®—æ³•ï¼Œåªéœ€è¦è¾“å…¥é‚»æ¥çŸ©é˜µå’Œå¯æ¥å—è¯¯å·®ï¼ˆå¦‚æœä½ ä½¿ç”¨çš„æ˜¯æˆ‘ä»¬å‰é¢çš„è¿™ä¸ªå°ä¾‹å­ï¼Œ1e-5 å°±å¤Ÿäº†ï¼‰ï¼š

![Charalampos E. Tsourakakisï¼šå¤§å‹çœŸå®ç½‘ç»œä¸­çš„ä¸‰è§’å½¢å¿«é€Ÿè®¡æ•°ï¼ˆåŸæ–‡ï¼‰](https://cdn-images-1.medium.com/max/2000/1*6-camzK0rSQJy9T963QmRQ.png)

å¯¹è®¡ç®—æœºç¨‹åºæ¥è¯´â€œç‰¹å¾ä¸‰è§’å½¢â€ä¸€ä¸ªéå¸¸ç®€å•çš„ä»»åŠ¡ï¼Œå¦‚ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ Python å®ç°ï¼ˆ[eigen_triangle.py](https://gist.githubusercontent.com/guenter-r/f784a8cb3c0aebb80407597f37b30878/raw/5ef3ffaef03be56a79f4c1da72506b03f59737e4/eigen_triangle.py)ï¼‰ï¼š

```python
from numpy import linalg

def return_eig_triang(graph):
  w,v = linalg.eig(graph)
  w,v
  no_of_triangles = round(np.sum(w**3) / 6,1)
  return no_of_triangles # çŸ©é˜µä¸­çš„ä¸‰è§’å½¢æ€»æ•°
```

ç”±æ­¤å¯è®¡ç®—å¾—æˆ‘ä»¬çš„ä¾‹å­ä¸­æ€»å…±æœ‰ 3 ä¸ªä¸‰è§’å½¢ï¼Œè¿™ä¸€ç‚¹æˆ‘ä»¬ä»å›¾ä¸­ä¹Ÿå¯ä»¥çœ‹åˆ°ã€‚ä¸‰ä¸ªä¸‰è§’å½¢åˆ†åˆ«æ˜¯ **(0,1,2)**ï¼Œ**(1,3,4)** å’Œ **(1,3,7)**ï¼Œå› æ­¤å¯¹æ¯”ç”¨æˆ· **5** å’Œ **6**ï¼Œç”¨æˆ· **0,1,2,3,4,7** åœ¨ç½‘ç»œä¸­çš„è¿æ¥è¦æ›´ä¸ºç´§å¯†ã€‚

---

å‰é¢ä¸ºäº†è§‚å¯Ÿè¾“å‡ºï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ•°æ®ä¾‹å­ã€‚ç°åœ¨æˆ‘ä»¬å°†ç»§ç»­è®¨è®ºæ›´åŠ éšæœºçš„æƒ…å†µï¼Œä¸ºæ­¤å…ˆåˆ›å»ºä¸€ä¸ªäººå·¥çš„ç¨€ç–æ•°æ®é›†ã€‚æˆ‘éšæœºç”Ÿæˆäº†ä¸€ä¸ªæœ‰ 20 ä¸ªç”¨æˆ·çš„ç®€å•çš„æ•°æ®é›†â€”â€”å®é™…ç½‘ç»œçš„è§„æ¨¡å½“ç„¶è¦å¤§å¾—å¤šï¼Œå› æ­¤æˆ‘ä»¬å°†ä½¿ç”¨åæ ‡è¡¨ç¤ºçš„ç¨€ç–çŸ©é˜µï¼Œè™½ç„¶å¯¹æˆ‘ä»¬è¿™ä¸ª 20 ä¸ªç”¨æˆ·çš„äººå·¥æ•°æ®é›†æ¥è¯´è¿˜æ²¡å¿…è¦ç”¨ç¨€ç–çŸ©é˜µã€‚

åˆ›å»ºä¸€ä¸ªéšæœºæ•°æ®é›†ï¼š[create_coo.py](https://gist.githubusercontent.com/guenter-r/1a516c9cc197624b0247a87550a32b90/raw/02d7c1bf7663a4f871249ac579d897b4f1724cf0/create_coo.py)

```python
# åˆ›å»ºç¨€ç–æ•°æ®é›†
connections_list = []

for i in range(31):
    connections = np.random.choice(21,2) # å¯èƒ½æœ‰é‡å¤æ•°æ®ï¼Œå…ˆè¯•è¯•çœ‹èƒ½ä¸èƒ½å¾—åˆ°ä¸‰è§’å½¢â€¦â€¦
    connections_list.append(list(connections))

print(connections_list)
```

ç°åœ¨å¯ä»¥çœ‹çœ‹æˆ‘ä»¬ç”Ÿæˆçš„éšæœºæ•°æ®â€”â€”è¯·æ³¨æ„æˆ‘ä»¬è¿˜å°†ç»§ç»­ä½¿ç”¨æœ¬æ–‡ç¬¬ä¸€ä¸ªå°ä¾‹å­ï¼Œæ¥éªŒè¯æ­¤è¿‡ç¨‹æœ‰æ•ˆã€‚é€šè¿‡å‰é¢çš„ä»£ç æˆ‘ä»¬éšæœºç”Ÿæˆäº†ç”¨æˆ·ä¹‹é—´çš„ä¸€äº›è¿æ¥ã€‚å¦‚æœæˆ‘ä»¬çœ‹åˆ°æœ‰è¿æ¥ (8, 7) å’Œ (16, 8)ï¼Œè‡ªç„¶å¸Œæœ›å†æœ‰è¿æ¥ (16, 7)ï¼Œè¿™æ ·å°±å½¢æˆç´§å¯†çš„ä¸‰è§’å½¢äº†ã€‚ä½†æ³¨æ„ï¼Œç”¨æˆ·ä¸èƒ½ä¸è‡ªå·±è¿æ¥æˆä¸ºæœ‹å‹ï¼

**éšæœº**å‡½æ•°ç”Ÿæˆçš„æ•°æ®å¦‚ä¸‹â€”â€”ä¹ä¸€çœ‹ï¼Œæˆ‘è§‰å¾—å¯ä»¥ç”¨ï¼ˆé‡å¤çš„è¿æ¥æ²¡å…³ç³»ï¼Œä½†è¦é¿å…è‡ªå·±ä¸è‡ªå·±è¿æ¥ï¼‰ï¼š

```
[[2, 3], [18, 3], [14, 10], [2, 10], [3, 12], [10, 11], [19, 16], [7, 2], [6, 0], [14, 9], [11, 5], [12, 3], [19, 8], [9, 0], [4, 18], [12, 19], [10, 4], [3, 2], [16, 6], [7, 3], [2, 18], [10, 11], [8, 18], [2, 10], [19, 1], [17, 3], [13, 4], [2, 0], [17, 2], [4, 0], [1, 17]]
```

åˆæ­¥æ£€æŸ¥ X åæ ‡ä¸ Y åæ ‡ï¼Œå¯ä»¥å‘ç° **{2, 3, 7, 17}** å‡ºç°åœ¨äº†ä¸‰è§’å½¢ä¸­ã€‚æ£€æŸ¥çš„æ–¹å¼å¾ˆç®€å•ï¼Œåªè¦çœ‹è¿æ¥çš„ä¸¤ç«¯æ˜¯å¦æœ‰ 2 å°±å¯ä»¥äº†ã€‚å› ä¸ºæˆ‘ä»¬æ‰“ç®—å°†ç¨€ç–æ•°æ®å­˜å‚¨åœ¨ä¸“é—¨çš„æ•°æ®ç»“æ„ä¸­ï¼Œè¿™é‡Œæˆ‘ä»¬è°ˆè°ˆç¨€ç–çŸ©é˜µã€‚ä¸ºäº†ä¾¿äºç†è§£ï¼Œæˆ‘å†™äº†å¦‚ä¸‹ä¸€ä¸ªç®€å•çš„ä»£ç ç‰‡æ®µï¼Œå¯¹ç§°åœ°æ·»åŠ åæ ‡ï¼ˆ[coo_creation.py](https://gist.githubusercontent.com/guenter-r/d96cd2a91f9d5e5d400142d2f859a1c6/raw/d20c19f40440c3295d5b5063cbd81fd28457a198/coo_creation.py)ï¼‰ï¼š

```python
x,y = [],[]

for element in connections_list:
    xi = element[0]
    yi = element[1]
    
    x.append(xi)
    x.append(yi) # å¯¹ç§°æ·»åŠ 
    y.append(yi)
    y.append(xi) # å¯¹ç§°æ·»åŠ 

# ç¨€ç–çŸ©é˜µä¸­çš„å€¼ä¸º 1
vals = np.ones(len(x))

# numpy(scipy.sparse)
from scipy.sparse import coo_matrix
m = coo_matrix((vals,(x,y)))
```

å‰é¢ç”Ÿæˆçš„è¿æ¥é›†åˆä¸­ï¼Œå¾ˆå¯èƒ½å°±å«æœ‰ä¸‰è§’å½¢ã€‚ä¸ºäº†è®¡ç®—å¤§è§„æ¨¡ç½‘ç»œä¸­æŸä¸ªç»“ç‚¹ï¼ˆå®ƒçš„è¿æ¥ç”±é‚»æ¥çŸ©é˜µä¸­çš„ä¸€è¡Œ **X[è¯¥ç‚¹ç´¢å¼•å€¼]** è¡¨ç¤ºï¼‰æ‰€åœ¨çš„ä¸‰è§’å½¢ä¸ªæ•°â€”â€”è¿™ä¸åŒäºå‰é¢æˆ‘ä»¬è®¡ç®—æ•´ä¸ªç½‘ç»œä¸­çš„ä¸‰è§’å½¢ä¸ªæ•°çš„æ–¹æ³•â€”â€”æˆ‘ä»¬éœ€è¦å¦ä¸€ç§è®¡ç®—æ–¹æ³•ã€‚

åœ¨è®¡ç®—ç‰¹å®šç»“ç‚¹æ‰€åœ¨çš„ä¸‰è§’å½¢æ•°é‡è¿™ä¸ªé—®é¢˜ä¸Šæˆ‘è¢«å›°äº†ä¸å°‘æ—¶é—´ï¼Œåšäº†äº›ç»ƒä¹ åï¼Œæˆ‘ä» Richard Vuduc æ•™æˆ[3]ï¼ˆUC Berkeley, Georgia Techï¼‰çš„ä¸€æœ¬ä¹¦ä¸­å­¦åˆ°äº†ä¸€ä¸ªéå¸¸å¥½çš„çº¿æ€§ä»£æ•°æ–¹æ³•ã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬è®¡ç®—é‚»æ¥çŸ©é˜µ M ä¸è‡ªèº«çš„ç‚¹ç§¯ï¼ˆM å’Œå…¶è½¬ç½® M.T ç›¸ç­‰ï¼‰ã€‚è¿™ä¼šå¾—åˆ°ä»ä¸€ä¸ªç”¨æˆ·åˆ°å¦ä¸€ä¸ªç”¨æˆ·çš„æ‰€æœ‰ä¸¤æ­¥è¿æ¥æ•°ï¼Œä½†ä¸ç›¸è¿çš„ç”¨æˆ·ä¹‹é—´ï¼ˆç”šè‡³è‡ªå·±åˆ°è‡ªå·±ï¼‰ä¹Ÿå¯èƒ½æœ‰ä¸¤æ­¥è¿æ¥ï¼Œå› è€Œå¯¹äºæ•°ä¸‰è§’å½¢çš„ä»»åŠ¡æ¥è¯´ä¼šå­˜åœ¨â€œè®¡æ•°è¿‡é«˜â€ã€‚ä¸è¿‡å½“ç‚¹ç§¯å†ä¸åˆå§‹çŸ©é˜µ M æŒ‰å…ƒç´ ç›¸ä¹˜åï¼Œè¿™äº›å¤šä½™çš„è®¡æ•°å°±ä¼šè¢«â€œå½’é›¶â€ã€‚

**çœŸæ˜¯ä¸€ä¸ªä¼˜é›…çš„æ–¹æ¡ˆï¼**

```python
M = (m.dot(m)) * m # ç‚¹ç§¯ä¸æŒ‰å…ƒç´ ç›¸ä¹˜
```

è¿™æ ·æˆ‘ä»¬å°±ç»ˆäºèƒ½å¾—åˆ°è¿æ¥ç´§å¯†çš„ç”¨æˆ·äº†ã€‚æœ€åï¼Œæˆ‘ä»¬å°†è®¡ç®—æ¯ä¸ªç”¨æˆ·æ‰€åœ¨çš„ä¸‰è§’å½¢æ•°é‡ã€‚æ³¨æ„ä»»ä½•ç»™å‡ºçš„æ•°å­—ï¼ˆè¯‘è€…æ³¨ï¼šæŒ‡åæ–‡çš„â€œä¸‰è§’å½¢å€¼â€ï¼‰éƒ½ä¸èƒ½è§£é‡Šä¸ºâ€œç”¨æˆ· m æ‰€åœ¨çš„ä¸‰è§’å½¢æœ‰ n ä¸ªâ€ï¼Œä½†å…¶ç»“æœå¯ä»¥ç”¨æ¥æ’åºï¼Œä»¥ä¾¿æ‰¾åˆ°ç½‘ç»œä¸­è¿æ¥æœ€ç´§å¯†æˆ–æœ€ç–æ¾çš„ç”¨æˆ·ã€‚

æ³¨æ„ï¼šæ­£å¦‚å‰é¢æåˆ°çš„ï¼Œå¦‚æœæˆ‘ä»¬æŠŠæ‰€æœ‰è¿æ¥æ•°åŠ èµ·æ¥å¹¶é™¤ä»¥ç¥å¥‡çš„ 6ï¼ˆæ¯ä¸ªä¸‰è§’å½¢é™¤ä»¥ 3ï¼Œæ¯æ¡è¿é™¤ä»¥ 2ï¼‰ï¼Œå°±åˆèƒ½å¾—åˆ°æ•´ä¸ªç½‘ç»œä¸­çš„ä¸‰è§’å½¢æ•°é‡äº†ã€‚

ä»å‰é¢çš„åˆæ­¥æ£€æŸ¥ä¸­å·²ç»çŸ¥é“ï¼Œåœ¨ç”¨æˆ· 2 çš„è¿æ¥ä¸­æœ€æœ‰å¯èƒ½å‡ºç°ä¸‰è§’å½¢ï¼Œè¿™ä¹Ÿå¯ä»¥åœ¨æˆ‘ä»¬çš„ç¤ºä¾‹æ•°æ®ä¸­çœ‹å‡ºæ¥ã€‚é«˜ä¸‰è§’å½¢å€¼ä¸‹é¢ç”¨æ˜Ÿå·çªå‡ºæ˜¾ç¤ºï¼š

```
user:  0 	Triangle value:  [[66.]]
user:  1 	Triangle value:  [[26.]]
user:  2 	Triangle value:  [[187.]] *
user:  3 	Triangle value:  [[167.]] *
user:  4 	Triangle value:  [[69.]]
user:  5 	Triangle value:  [[13.]]
user:  6 	Triangle value:  [[22.]]
user:  7 	Triangle value:  [[70.]]
user:  8 	Triangle value:  [[30.]]
user:  9 	Triangle value:  [[24.]]
user:  10 	Triangle value:  [[127.]] *
user:  11 	Triangle value:  [[59.]]
user:  12 	Triangle value:  [[71.]]
user:  13 	Triangle value:  [[15.]]
user:  14 	Triangle value:  [[34.]]
user:  15 	Triangle value:  [[0.]]
user:  16 	Triangle value:  [[15.]]
user:  17 	Triangle value:  [[77.]]
user:  18 	Triangle value:  [[93.]]
user:  19 	Triangle value:  [[39.]]
```

ä»è¿™ä¸ªä¾‹å­ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼šä¸ä¸‰è§’å½¢ç›¸å…³çš„ç»“ç‚¹ç¡®å®å…·æœ‰ç›¸å¯¹è¾ƒé«˜çš„å€¼ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬è¿˜éœ€è¦é¢å¤–è€ƒè™‘ **â€œç®€å•è¿æ¥ä¹Ÿä¼šå¢åŠ æ•´ä½“å€¼â€**ã€‚è¿™åœ¨æ²¡æœ‰ä¸‰è§’å½¢çš„ **10** å’Œæœ‰ä¸‰è§’å½¢çš„ **17** æƒ…å†µä¸‹å°¤å…¶æ˜æ˜¾ã€‚ï¼ˆè¯‘è€…æ³¨ï¼šè¿™éƒ¨åˆ†é—®é¢˜å¤ªå¤šï¼Œç¿»è¯‘å°±ä¸æ¶¦è‰²äº†ï¼Œåé¢ç»Ÿä¸€è¡¥å……è¯´æ˜ã€‚ï¼‰

---

å¦‚å‰æ‰€è¿°ï¼Œæˆ‘ä»¬å†çœ‹çœ‹åˆšå¼€å§‹çš„ä¾‹å­ï¼Œç¡®ä¿æˆ‘ä»¬çš„ç»“æœåˆç†ã€‚å› ä¸ºç”¨æˆ· 1 æ¶‰åŠäº†å…¨éƒ¨ 3 ä¸ªä¸‰è§’å½¢ï¼Œæˆ‘ä»¬è‡ªç„¶æœŸæœ›å®ƒæœ‰æœ€é«˜çš„å€¼ã€‚é€šè¿‡å®Œå…¨ä¸€æ ·çš„æ­¥éª¤ï¼Œæˆ‘ä»¬å¾—åˆ°äº†å¦‚ä¸‹ç»“æœï¼Œè¯å®äº†æˆ‘ä»¬çš„æœŸæœ›ï¼š

```
user:  0 	Triangle value:  2
user:  1 	Triangle value:  6
user:  2 	Triangle value:  2
user:  3 	Triangle value:  4
user:  4 	Triangle value:  2
user:  5 	Triangle value:  0
user:  6 	Triangle value:  0
user:  7 	Triangle value:  2
```

---

å…³äºå¦‚ä½•æ‰¾å‡ºæ— å‘å›¾ä¸­ç´§å¯†è¿æ¥çš„ç»“ç‚¹ï¼Œå¹¶ç”¨ç”¨ç¨€ç–çŸ©é˜µå‚¨å­˜å’Œå¤„ç†ç½‘ç»œæ•°æ®ï¼Œå¸Œæœ›æˆ‘çš„è¿™ä¸ªå°ä¾‹å­å¯¹æ‚¨æœ‰ç”¨ï¼Œä¹Ÿå¸Œæœ›å¾—çŸ¥æ‚¨å°†è¿™äº›é€»è¾‘ç”¨åˆ°å…¶å®ƒé—®é¢˜ä¸Šã€‚ä¸‹æ¬¡è§ ğŸ”²

---

[1] Charalampos E. Tsourakakis, Fast Counting of Triangles in Large Real Networks: Algorithms and Laws

[2] Prof. Gilbert Strang, MIT, https://www.youtube.com/watch?v=cdZnhQjJu4I

[3] Prof. Richard Vuduc, CSE 6040, https://cse6040.gatech.edu/fa17/details/

---

**è¯‘è€…æ³¨ï¼š** åŸæ–‡çš„ç†è®ºæ²¡é—®é¢˜ï¼Œä½†ä»£ç å®ç°ä¸­çš„é—®é¢˜è¾ƒä¸¥é‡ï¼Œå¯¼è‡´ç»“æœå®Œå…¨ä¸å¯¹ã€‚

1. ä½œè€…ç”Ÿæˆçš„è¿æ¥é›†åˆæœ‰é‡å¤çš„ï¼Œæ¯”å¦‚ [2, 10] å‡ºç°äº†ä¸¤æ¬¡ï¼Œè¿™å¯¼è‡´æŒ‰ä»–ä»£ç ç”Ÿæˆçš„çŸ©é˜µä¸­ï¼Œéƒ¨åˆ†å…ƒç´ ä¼šå¤§äº 1ã€‚å› æ­¤ä¸è®ºæ˜¯ç‚¹ç§¯è¿˜æ˜¯æŒ‰å…ƒç´ ç›¸ä¹˜ï¼Œç»“æœéƒ½ä¼šå¾ˆå¤§ã€‚æ­£ç¡®çš„åšæ³•æ˜¯æ·»åŠ ä¸€è¡Œ `m = m.sign()` ä½¿çŸ©é˜µä¸­å…ƒç´ åªæœ‰ 0 å’Œ 1ï¼›
2. numpy ä¸­çš„ '*' ä¸ä¸€å®šæ˜¯æŒ‰å…ƒç´ ç›¸ä¹˜ã€‚å…·ä½“æ¥è¯´ï¼Œå¦‚æœæ“ä½œçš„ç±»å‹æ˜¯ `numpy.ndarray` æ‰æ˜¯æŒ‰å…ƒç´ ç›¸ä¹˜ï¼Œå¦‚æœæ˜¯ `numpy.matrix` æˆ– `scipy.sparse.coo.coo_matrix` åˆ™æ˜¯ç‚¹ç§¯ï¼Œä¸ `dot()` ä¸€æ ·ã€‚æ‰€ä»¥ä½œè€…ä»£ç ä¸­ M çš„ç»“æœå®é™…ä¸Šæ˜¯ä¸¤æ¬¡ç‚¹ç§¯ï¼ˆä¸‰æ¬¡æ–¹ï¼‰ï¼Œåº”æ”¹ä¸º `M = m.dot(m).multiply(m)`ï¼›
3. å…¶å®è¿™æ ·çš„ M ä¸­æ¯ä¸ªå…ƒç´ å€¼å°±åˆšå¥½æ˜¯è¡Œåˆ—å¯¹åº”çš„ä¸¤ä¸ªç»“ç‚¹é—´çš„ä¸‰è§’å½¢æ•°é‡ï¼Œä½†ä½œè€…ä¼¼ä¹å› ä¸ºä»£ç é—®é¢˜å¯¼è‡´ç»“æœä¸å¯¹ï¼Œå› è€Œå¼ºè¡Œè¯´è¿™ä¸ªå€¼ä¸ç­‰äºä¸‰è§’å½¢æ•°é‡åªèƒ½ç”¨æ¥æ’åºã€‚

ä¿®æ­£çš„ä»£ç æ±‡æ€»å¦‚ä¸‹ï¼š

```python
# è¿™é‡Œä¼šçœ‹åˆ°å…¶ä¸­éƒ¨åˆ†å…ƒç´ å¤§äº 1
print(m.todense())

# ä½¿å¤§äº 1 çš„å…ƒç´ ä¸º 1
m = m.sign()

# æ­£ç¡®çš„ç‚¹ç§¯åæŒ‰å…ƒç´ ç›¸ä¹˜
M = m.dot(m).multiply(m)

# è¾“å‡ºä¸º [[0. 0. 6. 6. 0. 0. 0. 2. 0. 0. 0. 0. 0. 0. 0. 0. 0. 2. 2. 0.]]
# å³ 2ã€3 æœ‰ 6 ä¸ªä¸‰è§’å½¢ï¼Œ7 æœ‰ 2 ä¸ªä¸‰è§’å½¢ï¼Œâ€¦â€¦
print(M.sum(axis=1).T)
```

> å¦‚æœå‘ç°è¯‘æ–‡å­˜åœ¨é”™è¯¯æˆ–å…¶ä»–éœ€è¦æ”¹è¿›çš„åœ°æ–¹ï¼Œæ¬¢è¿åˆ° [æ˜é‡‘ç¿»è¯‘è®¡åˆ’](https://github.com/xitu/gold-miner) å¯¹è¯‘æ–‡è¿›è¡Œä¿®æ”¹å¹¶ PRï¼Œä¹Ÿå¯è·å¾—ç›¸åº”å¥–åŠ±ç§¯åˆ†ã€‚æ–‡ç« å¼€å¤´çš„ **æœ¬æ–‡æ°¸ä¹…é“¾æ¥** å³ä¸ºæœ¬æ–‡åœ¨ GitHub ä¸Šçš„ MarkDown é“¾æ¥ã€‚

---

> [æ˜é‡‘ç¿»è¯‘è®¡åˆ’](https://github.com/xitu/gold-miner) æ˜¯ä¸€ä¸ªç¿»è¯‘ä¼˜è´¨äº’è”ç½‘æŠ€æœ¯æ–‡ç« çš„ç¤¾åŒºï¼Œæ–‡ç« æ¥æºä¸º [æ˜é‡‘](https://juejin.im) ä¸Šçš„è‹±æ–‡åˆ†äº«æ–‡ç« ã€‚å†…å®¹è¦†ç›– [Android](https://github.com/xitu/gold-miner#android)ã€[iOS](https://github.com/xitu/gold-miner#ios)ã€[å‰ç«¯](https://github.com/xitu/gold-miner#å‰ç«¯)ã€[åç«¯](https://github.com/xitu/gold-miner#åç«¯)ã€[åŒºå—é“¾](https://github.com/xitu/gold-miner#åŒºå—é“¾)ã€[äº§å“](https://github.com/xitu/gold-miner#äº§å“)ã€[è®¾è®¡](https://github.com/xitu/gold-miner#è®¾è®¡)ã€[äººå·¥æ™ºèƒ½](https://github.com/xitu/gold-miner#äººå·¥æ™ºèƒ½)ç­‰é¢†åŸŸï¼Œæƒ³è¦æŸ¥çœ‹æ›´å¤šä¼˜è´¨è¯‘æ–‡è¯·æŒç»­å…³æ³¨ [æ˜é‡‘ç¿»è¯‘è®¡åˆ’](https://github.com/xitu/gold-miner)ã€[å®˜æ–¹å¾®åš](http://weibo.com/juejinfanyi)ã€[çŸ¥ä¹ä¸“æ ](https://zhuanlan.zhihu.com/juejinfanyi)ã€‚
