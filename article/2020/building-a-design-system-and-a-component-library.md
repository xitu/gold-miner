> * 原文地址：[Building a design system and a component library](https://medium.com/javascript-in-plain-english/building-a-design-system-and-a-component-library-3f4e01a7b0b4)
> * 原文作者：[Bruno Sampaio](https://medium.com/@bensampaio)
> * 译文出自：[掘金翻译计划](https://github.com/xitu/gold-miner)
> * 本文永久链接：[https://github.com/xitu/gold-miner/blob/master/article/2020/building-a-design-system-and-a-component-library.md](https://github.com/xitu/gold-miner/blob/master/article/2020/building-a-design-system-and-a-component-library.md)
> * 译者：Charlo
> * 校对者：

# 构建设计系统和组建库

![](https://cdn-images-1.medium.com/max/3200/0*d_TQ28ARHmOchSvG)

本文基于系列文章：**用 React 现代化 jQuery 前端**。如果你想更好地了解我们写这篇文章的动机，建议你先阅读我们的[第一篇文章](https://medium.com/@bensampaio/8598b252ceb3)。

当我们开始在 React 中重建前端时，可重用 UI 组件还不在我们设计和开发工作流程之内。我们的 jQuery 前端主要是基于 Twitter 引导组件构建的，这些组件针对特定的用例进行了调整，或者通过附加功能进行了扩展。新设计从旧设计中汲取精华，并改进调整，赋予新特性。随着团队和应用程序的不断发展，我们的组件向多个方向发展。这导致了文本大小、配色、按钮和链接的多种变化，从而导致整个应用程序的用户体验脱节。

在 React 中重新构建我们的前端是一个重新思考我们的设计和开发工作流的机会，并将重点放在为用户提供更有凝聚力的体验上。这一点尤其重要，因为我们知道我们需要使我们的应用程序访问和响应的更容易。这导致了组件库的创建，激发了设计系统的需求。这个过程一开始是困难和缓慢的，但随着时间的推移变得令人兴奋和有用。

## 什么是设计系统?

设计系统是关于如何创建、记录和使用 UI 组件的全面指南。它定义了一组适用于所有设计的规则、约束、原则和最佳实践。设计系统的核心元素是一组 UI 组件，如按钮、链接和列表。对每个设计的组件，你可以拥有记录设计期间所做选择的使用指南、定义组件的规则、行为和约束、用例和其他易于通过文字交流的细节。

## 什么是组件库?

组件库是用编程语言实现的可重用 UI 组件的集合。当得到设计系统的支持时，它也可以被视为设计及其指导方针的交互式实现。

## 为什么要关心这个?

正如 [Airbnb 的 Karri Saarinen](https://medium.com/airbnb-design/224748775e4e) 所言:“统一的设计体系是建设更好更快的关键;更好的原因是用户更容易理解有凝聚力的体验，更快的原因是它为我们提供了一种共同的语言。

在 Karify，它帮助我们创造和遵循我们自己的准则。它帮助我们在多种平台和设备上创建一个有凝聚力的用户体验。最后，它帮助我们的团队更聪明、更快、更紧密地合作。以下是我们发现的一些更详细的优势：

* **沟通**：设计人员理解开发人员，反之亦然。以前对双方都很难理解的概念现在清楚多了。讨论组件和使用我们在通信中定义的规则使设计和开发过程更加容易。
* **一致性**：应用程序页面的外观和体验变得相同。我们知道一个标题或正常的文本应该使用的大小，我们应该主要行动配置什么类型的按钮，什么颜色用来沟通用特定类型的行为或信息，以及每种类型的元素之间应该有多少间距。如果我们决定更改其中任何一个，那么它们可以很容易地在整个设计系统、组件库和应用程序中进行更改。
* **协作**：设计师和开发人员工作得更紧密，能够更容易地分享想法和见解。由于沟通变得更容易，因此讨论功能限制以及在早期阶段将它们合并到设计中就变得更容易了。使用像 [Zeplin](https://zeplin.io/) 这样的工具使这个过程特别快，因为它允许你在设计的任何细节的环境下开始讨论。
* **文档**：组件指南提供了关于组件的外观、使用、行为以及为什么这样做的清晰信息。如果将来某个组件的设计或实现出现了问题，就更容易找到背后的原因，并防止再考虑之前已经考虑过的问题(除非它不再有意义)。
* **模块化**：所有组件都用有限的规则和关注点来表示设计和代码的一小部分。这样强制在设计和代码中分离关注点。
* **可维护性**：这使设计和代码的更新变得更加容易，因为当一个组件被修改时，使用它的所有其他组件都会更新。这也会导致在旧组件上的额外工作，但可以让你看到你的变化的影响。

与任何其他方法一样，我们在设计系统也发现了一些缺点：

* **耗费时间**：开始的时候尤其如此。定义所有规则、约束和基本组件(如文本、颜色和间距)需要进行大量讨论。随着时间的推移，它会变快。这取决于在设计新特性之前需要创建多少新组件。但是一旦你有了一些，在现有的或新的设计中重用它们就会变得非常快。这同样适用于应用程序的开发。
* **缺乏创造力**：由于所有的规则和约束，有创作空间更少。然而，这也可以被视为一种优势，因为这会带来一致性。
* **陡峭的学习曲线**：这主要是团队里新人面临的问题，因为他们将需要熟悉许多规则，才能始流畅地应用它们。另一方面，这也使他们更容易，因为设计系统传达了规则。
* **复杂性**：如果有太多依赖于其他组件的组件，那么维护和重用它们也会变得很复杂。

不过，不要让这些缺点吓到你。这是学习最小化它们的过程的一部分。随着时间的推移，优势变得比劣势更明显。

## 如何开始呢?

如何开始呢？首先，我们建议你了解[原子设计](https://bradfrost.com/blog/post/atomic-web-design/)的概念以及[设计系统的最佳实践](https://airbnb.design/systems-thinking-unlocked/)和像[Airbnb](https://airbnb.design/building-a-visual-language)设计系统的例子 。此外，你还应该选择用于构建设计系统的工具。我们选择了 [Sketch](https://www.sketch.com/)，但也有其他选择，比如 [Figma](https://www.figma.com/)。

从那里你可以开始定义你的一套颜色，排版风格和间距大小，这将是你的第一个原子。这将允许你开始定义你的第一个分子，如按钮，链接，页面等等。在第一次迭代中，你很可能会错过一些用例，这将导致更多的迭代，直到一切都感觉良好并作为未来的证据。

如果你已经有了一个应用程序，但不能一次全部更改，那么我们建议你基于现有的设计系统。对于每个部分，分析你所拥有的，选择你喜欢的部分，改进你不喜欢的部分。即使这是大量的工作，也应该将未来的组件从遗留组件中分离出来。这样，你就可以避免在新组件中使用遗留组件。慢慢地，这会让你达到你的目标。

## 我们是怎么做到的?

我们的团队由两名设计师和一名前端开发人员组成。后来，又有一个开发人员加入了这个团队。这个团队的规模不管过去还是现在仍然足够用足够的时间来处理细节问题。然而，我们会说团队的规模取决于项目的规模和公司的进度。

从头开始重建前端的机会也让我们可以从过去的错误中吸取教训。因此，我们根据用户的反馈来设计新组件，他们经常提到可访问性和响应性问题。为了解决这些问题，我们认为需要首先重新设计导航系统，然后再重新设计应用程序中的每个页面。

我们先将新导航作为一个整体设计，随着它变得更加稳固，我们开始将其分解为更小的组件。这就导致了原有的原子设计被割裂成原子、分子和有机体。理想情况下，你应该从原子开始，但如果没有明确的方向，这是很困难的。如今，既然我们已经定义了几个原子和分子，开始将它们组合成新的有机体或页面就更容易了。

在创建组件时，我们将它们定义为`符号`，并将它们在`原子`、`分子`和`生物体`的 Sketch 库文件中分割。 Sketch 有助于重用我们的原子组件作为符号在其他`分子`或`有机体`组件。在 Sketch 中，它们被称为`嵌套符号`。我们确保按级联顺序使用组件，因此更新只能按一个方向传播。

![](https://cdn-images-1.medium.com/max/3200/0*oXhrNGXE1iLKgoBL)

**我们的 Sketch `分子库`：按钮组件中的图标组件是从 Sketch `原子` 库中复用的。**

为了记录我们的选择，我们在 Material UI 组件指南中为每个组件(不管它是原子、分子还是有机体)创建了指南。在组件指导方针的旁边，我们还有一些适用于所有组件的通用指导方针，因为有些指导方针是超越的，比如可访问性和声调。这些指导方针是我们唯一的真理来源。他们确保没有任何东西可以留给想象力。为了给人留下印象，这是一份简单的文件，包括以下部分：

* 使用
* 分解
* 不同的视图的布局
* 行为
* 可访问性

我们在 `模板 `或 `页面 `文件中使用是为每个特性/项目创建的这些组件文件。当一个组件或页面准备好了，我们与开发人员和其他利益相关者通过 [Zeplin](https://zeplin.io/) 分享设计。这个工具允许他们从设计中提取信息，比如颜色、大小和资源。它还允许每个组件进行通信，这可以极大地改善协作，因为通常需要召开会议讨论的细节变得非常容易。

![](https://cdn-images-1.medium.com/max/3200/0*rp1keWbCPclqMTwx)

**在 Zeplin 中协作开发的按钮组件。**

从这一点开始，开发人员可以使用 Zeplin 中的信息来开始构建相应的 React 组件。理想情况下，每个设计组件都应该有一个 React 组件，使设计和代码之间的关系就越紧密越好。为了获得灵感，我们经常看看其他组件库是如何做到这一点的，比如 [Material-UI](https://material-ui.com/)。

为了简化这个过程，我们使用了 [Storybook](https://storybook.js.org/)，它促进了组件的独立开发。它还提供了一种与库中所有组件可视化交互的方法，设计人员可以使用这些组件来验证最终的实现。

![](https://cdn-images-1.medium.com/max/3200/0*QII0QzNhlLMhXNCX)

**Storybook 中相同的按钮：准备审核**

在我们的设计系统和组件库中，我们都按按钮、颜色、表单元素、布局、链接、排版等类别对组件进行分组。这有助于将不同的原子、分子和组织，同时也有助于设计师和开发人员之间的交流。

从本质上说，这些工具帮助我们在工作过程中促进反馈循环，改善沟通和协作：设计师可以通过查看 Storybook 轻松地对组件库给出反馈，开发人员可以轻松地在 Zeplin 对设计进行评论或者下载资源。

## 我们有什么可以做得更好？

总的来说，我们觉得我们在这个过程中做得很好，但我们知道有些事情我们可以做得不一样。下面是我们一路上遇到的一些痛点：

* **可访问性指南**：我们完全低估了可访问性。[WCAG guidelines](https://www.w3.org/TR/WCAG21/) 有很多指导方针，但你不可能在这么小的团队中全部实现。我们必须选择哪些是对我们的用户最重要的。然而，我们在这个过程中很晚才做出这个选择，因为它对我们的原子组件(主要是字体和颜色)产生了影响，这迫使我们重新考虑一些分子和组织。
* **复杂组件**：我们经常尝试创建有太功能或对其他组件有太多依赖的组件。最好将它们分解成更小的组件，而不是使它们太可定制。它可能在设计和代码上都会有一些重复，但它更容易理解。
* **缺乏计划和无限的范围**：有一段时间，项目的范围只是持续增长。有些事情很重要，但有些就不那么重要了。由于这个项目没有结束日期，很难划定界限。最终，我们开始更频繁地讨论这些问题，以确定哪些是真正重要的。

最后，在重新设计完导航系统的后，我们对这些问题进行了学习和改进。我们仍然不时地遇到一些复杂的组件，但我认为尽快的发现并认清错误也是其中的一个过程。

## 总结

在我们看来，构建一个设计系统和一个组件库是值得的。它带来了我们从一开始就在寻找的一致性设计。这并不意味着我们会把它推荐给所有人。在开始之前，我们建议你确保这是你项目的正确解决方案。我们会说，只有当你知道或期望产品需要大量不同的页面，这些页面具有重用相同组件的复杂交互时，才需要这样做。当你还是一家初创公司或小公司，并希望在未来几年扩大规模时，这一点尤其重要。然而，如果你期望你的产品是一个简单的网站，在几年之内不会有太大的变化，那么这可能是过分的。

我希望本文能够帮助您做出更好的设计决策。如果你对你在这里读到的内容有问题、反馈或建议，我很乐意在下面的评论部分听到你的意见。

> 如果发现译文存在错误或其他需要改进的地方，欢迎到 [掘金翻译计划](https://github.com/xitu/gold-miner) 对译文进行修改并 PR，也可获得相应奖励积分。文章开头的 **本文永久链接** 即为本文在 GitHub 上的 MarkDown 链接。

---

> [掘金翻译计划](https://github.com/xitu/gold-miner) 是一个翻译优质互联网技术文章的社区，文章来源为 [掘金](https://juejin.im) 上的英文分享文章。内容覆盖 [Android](https://github.com/xitu/gold-miner#android)、[iOS](https://github.com/xitu/gold-miner#ios)、[前端](https://github.com/xitu/gold-miner#前端)、[后端](https://github.com/xitu/gold-miner#后端)、[区块链](https://github.com/xitu/gold-miner#区块链)、[产品](https://github.com/xitu/gold-miner#产品)、[设计](https://github.com/xitu/gold-miner#设计)、[人工智能](https://github.com/xitu/gold-miner#人工智能)等领域，想要查看更多优质译文请持续关注 [掘金翻译计划](https://github.com/xitu/gold-miner)、[官方微博](http://weibo.com/juejinfanyi)、[知乎专栏](https://zhuanlan.zhihu.com/juejinfanyi)。
